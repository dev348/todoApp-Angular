"use strict";(self.webpackChunktodoApp=self.webpackChunktodoApp||[]).push([[179],{2051:(yt,xe,F)=>{var I=F(4650);let Q=null;function P(){return Q}const ue=new I.OlP("DocumentToken");let sn=(()=>{class n{constructor(t,i,a,c){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,I.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,I.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(a=>{i?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ko{constructor(e,t,i,a){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fs=(()=>{class n{constructor(t,i,a){this._viewContainer=t,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((a,c,p)=>{if(null==a.previousIndex)i.createEmbeddedView(this._template,new Ko(a.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)i.remove(null===c?void 0:c);else if(null!==c){const y=i.get(c);i.move(y,p),cs(y,a)}});for(let a=0,c=i.length;a<c;a++){const y=i.get(a).context;y.index=a,y.count=c,y.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{cs(i.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function cs(n,e){n.context.$implicit=e.item}let Qo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({}),n})();function fr(n){return"server"===n}class Us extends class Bl extends class ae{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Q||(Q=n)}(new Us)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cu(){return js=js||document.querySelector("base"),js?js.getAttribute("href"):null}();return null==t?null:function Wr(n){Zn=Zn||document.createElement("a"),Zn.setAttribute("href",n);const e=Zn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[a,c]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Zn,js=null;const dn=new I.OlP("TRANSITION_ID"),Sc=[{provide:I.ip1,useFactory:function Ul(n,e,t){return()=>{t.get(I.CZH).donePromise.then(()=>{const i=P(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)i.remove(a[c])})}},deps:[dn,ue,I.zs3],multi:!0}];let Ac=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const lu=new I.OlP("EventManagerPlugins");let jl=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,a){return this._findPluginFor(i).addEventListener(t,i,a)}addGlobalEventListener(t,i,a){return this._findPluginFor(i).addGlobalEventListener(t,i,a)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const a=this._plugins;for(let c=0;c<a.length;c++){const p=a[c];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(lu),I.LFG(I.R0b))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class du{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const a=P().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,i)}}let $s=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),i.add(a))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})(),ao=(()=>{class n extends $s{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,a){t.forEach(c=>{const p=this._doc.createElement("style");p.textContent=c,a.push(i.appendChild(p))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach($l),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,a)=>{this._addStylesToHost(t,a,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($l))}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(ue))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();function $l(n){P().remove(n)}const uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hl=/%COMP%/g;function pu(n,e,t){for(let i=0;i<e.length;i++){let a=e[i];Array.isArray(a)?pu(n,a,t):(a=a.replace(Hl,n),t.push(a))}return t}function Gl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let co=(()=>{class n{constructor(t,i,a){this.eventManager=t,this.sharedStylesHost=i,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new lo(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case I.ifc.Emulated:{let a=this.rendererByCompId.get(i.id);return a||(a=new Wl(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,a)),a.applyToHost(t),a}case 1:case I.ifc.ShadowDom:return new ql(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const a=pu(i.id,i.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(jl),I.LFG(ao),I.LFG(I.AFp))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class lo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(uo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(sa(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(sa(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,a){if(a){t=a+":"+t;const c=uo[a];c?e.setAttributeNS(c,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const a=uo[i];a?e.removeAttributeNS(a,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,a){a&(I.JOm.DashCase|I.JOm.Important)?e.style.setProperty(t,i,a&I.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&I.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Gl(i)):this.eventManager.addEventListener(e,t,Gl(i))}}function sa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Wl extends lo{constructor(e,t,i,a){super(e),this.component=i;const c=pu(a+"-"+i.id,i.styles,[]);t.addStyles(c),this.contentAttr=function Tn(n){return"_ngcontent-%COMP%".replace(Hl,n)}(a+"-"+i.id),this.hostAttr=function fu(n){return"_nghost-%COMP%".replace(Hl,n)}(a+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class ql extends lo{constructor(e,t,i,a){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=pu(a.id,a.styles,[]);for(let p=0;p<c.length;p++){const y=document.createElement("style");y.textContent=c[p],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let or=(()=>{class n extends du{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,a){return t.addEventListener(i,a,!1),()=>this.removeEventListener(t,i,a)}removeEventListener(t,i,a){return t.removeEventListener(i,a)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(ue))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const oa=["alt","control","meta","shift"],aa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ai={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ua=(()=>{class n extends du{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,a){const c=n.parseEventName(i),p=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,c.domEventName,p))}static parseEventName(t){const i=t.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(i.pop());let p="",y=i.indexOf("code");if(y>-1&&(i.splice(y,1),p="code."),oa.forEach(C=>{const x=i.indexOf(C);x>-1&&(i.splice(x,1),p+=C+".")}),p+=c,0!=i.length||0===c.length)return null;const D={};return D.domEventName=a,D.fullKey=p,D}static matchEventFullKeyCode(t,i){let a=aa[t.key]||t.key,c="";return i.indexOf("code.")>-1&&(a=t.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),oa.forEach(p=>{p!==a&&(0,Ai[p])(t)&&(c+=p+".")}),c+=a,c===i)}static eventCallback(t,i,a){return c=>{n.matchEventFullKeyCode(c,t)&&a.runGuarded(()=>i(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(ue))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:"browser"},{provide:I.g9A,useValue:function mu(){Us.makeCurrent()},multi:!0},{provide:ue,useFactory:function la(){return(0,I.RDi)(document),document},deps:[]}]),ps=new I.OlP(""),Kl=[{provide:I.rWj,useClass:class Nh{addToWindow(e){I.dqk.getAngularTestability=(i,a=!0)=>{const c=e.findTestabilityInTree(i,a);if(null==c)throw new Error("Could not find testability for element.");return c},I.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(i=>{const a=I.dqk.getAllAngularTestabilities();let c=a.length,p=!1;const y=function(D){p=p||D,c--,0==c&&i(p)};a.forEach(function(D){D.whenStable(y)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],gs=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function Ws(){return new I.qLn},deps:[]},{provide:lu,useClass:or,multi:!0,deps:[ue,I.R0b,I.Lbi]},{provide:lu,useClass:ua,multi:!0,deps:[ue]},{provide:co,useClass:co,deps:[jl,ao,I.AFp]},{provide:I.FYo,useExisting:co},{provide:$s,useExisting:ao},{provide:ao,useClass:ao,deps:[ue]},{provide:jl,useClass:jl,deps:[lu,I.R0b]},{provide:class so{},useClass:Ac,deps:[]},[]];let Mc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:I.AFp,useValue:t.appId},{provide:dn,useExisting:I.AFp},Sc]}}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(ps,12))},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[...gs,...Kl],imports:[Qo,I.hGG]}),n})();typeof window<"u"&&window;var Pc=F(4986),vs=F(8306),Is=F(8996),yo=F(7669);function Yn(...n){const e=(0,yo.yG)(n);return(0,Is.D)(n,e)}var un=F(7184),Yl=F(6131);function Hi(...n){return function _o(){return(0,Yl.J)(1)}()((0,Is.D)(n,(0,yo.yG)(n)))}var si=F(4482);function Ql(...n){const e=(0,yo.yG)(n);return(0,si.e)((t,i)=>{(e?Hi(n,t,e):Hi(n,t)).subscribe(i)})}var yi=F(5403);function vo(){return(0,si.e)((n,e)=>{let t,i=!1;n.subscribe((0,yi.x)(e,a=>{const c=t;t=a,i&&e.next([c,a]),i=!0}))})}var Qn=F(4004);function Du(n,e,t,i,a){return(c,p)=>{let y=t,D=e,C=0;c.subscribe((0,yi.x)(p,x=>{const k=C++;D=y?n(D,x,k):(y=!0,x),i&&p.next(D)},a&&(()=>{y&&p.next(D),p.complete()})))}}function Tr(n,e){return(0,si.e)(Du(n,e,arguments.length>=2,!0))}var bu=F(4671);function Jl(n,e){return n===e}function wo(n,e){return(0,si.e)((t,i)=>{let a=0;t.subscribe((0,yi.x)(i,c=>n.call(e,c,a++)&&i.next(c)))})}var at,zr=F(2011),ga=(F(407),F(3942)),de=F(5861),_i=F(9681),Eo=F(4859),kr=F(1877),$t=F(2090),Rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pr={},Do=Do||{},vt=Rm||self;function Zs(){}function bo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function To(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Gi="closure_uid_"+(1e9*Math.random()>>>0),ws=0;function $n(n,e,t){return n.call.apply(n.bind,arguments)}function Ph(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Hn(n,e,t){return(Hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$n:Ph).apply(null,arguments)}function Co(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Cn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,a,c){for(var p=Array(arguments.length-2),y=2;y<arguments.length;y++)p[y-2]=arguments[y];return e.prototype[a].apply(i,p)}}function Wi(){this.s=this.s,this.o=this.o}Wi.prototype.s=!1,Wi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Kr(n){Object.prototype.hasOwnProperty.call(n,Gi)&&n[Gi]||(n[Gi]=++ws)}(this)},Wi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function A(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function O(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(bo(i)){const a=n.length||0,c=i.length||0;n.length=a+c;for(let p=0;p<c;p++)n[a+p]=i[p]}else n.push(i)}}function H(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",Zs,e),vt.removeEventListener("test",Zs,e)}catch{}return n}();function De(n){return/^[\s\xa0]*$/.test(n)}var Ke=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $e(n,e){return n<e?-1:n>e?1:0}function Je(){var n=vt.navigator;return n&&(n=n.userAgent)?n:""}function Ct(n){return-1!=Je().indexOf(n)}function Dt(n){return Dt[" "](n),n}Dt[" "]=Zs;var ed,n,vn=Ct("Opera"),Pr=Ct("Trident")||Ct("MSIE"),So=Ct("Edge"),Ao=So||Pr,Yr=Ct("Gecko")&&!(-1!=Je().toLowerCase().indexOf("webkit")&&!Ct("Edge"))&&!(Ct("Trident")||Ct("MSIE"))&&!Ct("Edge"),Es=-1!=Je().toLowerCase().indexOf("webkit")&&!Ct("Edge");function Tu(){var n=vt.document;return n?n.documentMode:void 0}e:{var Oh="",td=(n=Je(),Yr?/rv:([^\);]+)(\)|;)/.exec(n):So?/Edge\/([\d\.]+)/.exec(n):Pr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Es?/WebKit\/(\S+)/.exec(n):vn?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(td&&(Oh=td?td[1]:""),Pr){var Cu=Tu();if(null!=Cu&&Cu>parseFloat(Oh)){ed=String(Cu);break e}}ed=Oh}var Oc={};var vp=vt.document&&Pr&&(Tu()||parseInt(ed,10))||void 0;function rd(n,e){if(H.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Yr){e:{try{Dt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Om[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rd.X.h.call(this)}}Cn(rd,H);var Om={2:"touch",3:"pen",4:"mouse"};rd.prototype.h=function(){rd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fc="closure_listenable_"+(1e6*Math.random()|0),Fh=0;function Ip(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=a,this.key=++Fh,this.ba=this.ea=!1}function Lh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Lc(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Fm(n){const e={};for(const t in n)e[t]=n[t];return e}const Lm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vm(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let c=0;c<Lm.length;c++)t=Lm[c],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function id(n){this.src=n,this.g={},this.h=0}function wp(n,e){var t=e.type;if(t in n.g){var c,i=n.g[t],a=b(i,e);(c=0<=a)&&Array.prototype.splice.call(i,a,1),c&&(Lh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vh(n,e,t,i){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==i)return a}return-1}id.prototype.add=function(n,e,t,i,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var p=Vh(n,e,i,a);return-1<p?(e=n[p],t||(e.ea=!1)):((e=new Ip(e,this.src,c,!!i,a)).ea=t,n.push(e)),e};var sd="closure_lm_"+(1e6*Math.random()|0),Vc={};function Bc(n,e,t,i,a){if(i&&i.once)return qi(n,e,t,i,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Bc(n,e[c],t,i,a);return null}return t=$h(t),n&&n[Fc]?n.N(e,t,To(i)?!!i.capture:!!i,a):Bh(n,e,t,!1,i,a)}function Bh(n,e,t,i,a,c){if(!e)throw Error("Invalid event type");var p=To(a)?!!a.capture:!!a,y=Su(n);if(y||(n[sd]=y=new id(n)),(t=y.add(e,t,i,p,c)).proxy)return t;if(i=function od(){const e=Ep;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Y||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(ad(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function qi(n,e,t,i,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)qi(n,e[c],t,i,a);return null}return t=$h(t),n&&n[Fc]?n.O(e,t,To(i)?!!i.capture:!!i,a):Bh(n,e,t,!0,i,a)}function Uh(n,e,t,i,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Uh(n,e[c],t,i,a);else i=To(i)?!!i.capture:!!i,t=$h(t),n&&n[Fc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vh(c=n.g[e],t,i,a))&&(Lh(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Su(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vh(e,t,i,a)),(t=-1<n?e[n]:null)&&jh(t))}function jh(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Fc])wp(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(ad(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Su(e))?(wp(t,n),0==t.h&&(t.src=null,e[sd]=null)):Lh(n)}}}function ad(n){return n in Vc?Vc[n]:Vc[n]="on"+n}function Ep(n,e){if(n.ba)n=!0;else{e=new rd(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&jh(n),n=t.call(i,e)}return n}function Su(n){return(n=n[sd])instanceof id?n:null}var ud="__closure_events_fn_"+(1e9*Math.random()>>>0);function $h(n){return"function"==typeof n?n:(n[ud]||(n[ud]=function(e){return n.handleEvent(e)}),n[ud])}function gr(){Wi.call(this),this.i=new id(this),this.P=this,this.I=null}function mr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new H(e,n);else if(e instanceof H)e.target=e.target||n;else{var a=e;Vm(e=new H(i,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var p=e.g=t[c];a=cd(p,i,!0,e)&&a}if(a=cd(p=e.g=n,i,!0,e)&&a,a=cd(p,i,!1,e)&&a,t)for(c=0;c<t.length;c++)a=cd(p=e.g=t[c],i,!1,e)&&a}function cd(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.ba&&p.capture==t){var y=p.listener,D=p.ha||p.src;p.ea&&wp(n.i,p),a=!1!==y.call(D,i)&&a}}return a&&!i.defaultPrevented}Cn(gr,Wi),gr.prototype[Fc]=!0,gr.prototype.removeEventListener=function(n,e,t,i){Uh(this,n,e,t,i)},gr.prototype.M=function(){if(gr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Lh(t[i]);delete n.g[e],n.h--}}this.I=null},gr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},gr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Hh=vt.JSON.stringify;function Or(){var n=Wh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var xu,Dp=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ys,n=>n.reset());class Ys{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Fr(n){vt.setTimeout(()=>{throw n},0)}function Au(n,e){xu||function Bm(){var n=vt.Promise.resolve(void 0);xu=function(){n.then(Um)}}(),Uc||(xu(),Uc=!0),Wh.add(n,e)}var Uc=!1,Wh=new class Gh{constructor(){this.h=this.g=null}add(e,t){const i=Dp.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function Um(){for(var n;n=Or();){try{n.h.call(n.g)}catch(t){Fr(t)}var e=Dp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Uc=!1}function ma(n,e){gr.call(this),this.h=n||1,this.g=e||vt,this.j=Hn(this.lb,this),this.l=Date.now()}function qh(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ld(n,e,t){if("function"==typeof n)t&&(n=Hn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hn(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function dd(n){n.g=ld(()=>{n.g=null,n.i&&(n.i=!1,dd(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Cn(ma,gr),(at=ma.prototype).ca=!1,at.R=null,at.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),mr(this,"tick"),this.ca&&(qh(this),this.start()))}},at.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){ma.X.M.call(this),qh(this),delete this.g};class jm extends Wi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dd(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ya(n){Wi.call(this),this.h=n,this.g={}}Cn(ya,Wi);var hd=[];function bp(n,e,t,i){Array.isArray(t)||(t&&(hd[0]=t.toString()),t=hd);for(var a=0;a<t.length;a++){var c=Bc(e,t[a],i||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function zh(n){Lc(n.g,function(e,t){this.g.hasOwnProperty(t)&&jh(e)},n),n.g={}}function jc(){this.g=!0}function Mu(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Hc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<a.length;p++)a[p]=""}}}return Hh(t)}catch{return e}}(n,t)+(i?" "+i:"")})}ya.prototype.M=function(){ya.X.M.call(this),zh(this)},ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jc.prototype.Aa=function(){this.g=!1},jc.prototype.info=function(){};var xo={},Hm=null;function xi(){return Hm=Hm||new gr}function fd(n){H.call(this,xo.Pa,n)}function Nu(n){const e=xi();mr(e,new fd(e))}function Tp(n,e){H.call(this,xo.STAT_EVENT,n),this.stat=e}function yr(n){const e=xi();mr(e,new Tp(e,n))}function Cp(n,e){H.call(this,xo.Qa,n),this.size=e}function Gc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}xo.Pa="serverreachability",Cn(fd,H),xo.STAT_EVENT="statevent",Cn(Tp,H),xo.Qa="timingevent",Cn(Cp,H);var pd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Sp={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function va(){}function gd(){}va.prototype.h=null;var Kh,Ia={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function md(){H.call(this,"d")}function Wc(){H.call(this,"c")}function qc(){}function Mo(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new ya(this),this.O=No,this.T=new ma(n=Ao?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new zc}function zc(){this.i=null,this.g="",this.h=!1}Cn(md,H),Cn(Wc,H),Cn(qc,va),qc.prototype.g=function(){return new XMLHttpRequest},qc.prototype.i=function(){return{}},Kh=new qc;var No=45e3,yd={},wa={};function Zh(n,e,t){n.K=1,n.v=ko(Mi(e)),n.s=t,n.P=!0,vi(n,null)}function vi(n,e){n.F=Date.now(),Ro(n),n.A=Mi(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),N(t.i,"t",i),n.C=0,t=n.l.H,n.h=new zc,n.g=ny(n.l,t?e:null,!n.s),0<n.N&&(n.L=new jm(Hn(n.La,n,n.g),n.N)),bp(n.S,n.g,"readystatechange",n.ib),e=n.H?Fm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Nu(),function _a(n,e,t,i,a,c){n.info(function(){if(n.g)if(c)for(var p="",y=c.split("&"),D=0;D<y.length;D++){var C=y[D].split("=");if(1<C.length){var x=C[0];C=C[1];var k=x.split("_");p=2<=k.length&&"type"==k[1]?p+(x+"=")+C+"&":p+(x+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Qs(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Yh(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=xp(n,t),a==wa){4==e&&(n.o=4,yr(14),i=!1),Mu(n.j,n.m,null,"[Incomplete Response]");break}if(a==yd){n.o=4,yr(15),Mu(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Mu(n.j,n.m,a,null),Ii(n,a)}Qs(n)&&a!=wa&&a!=yd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ey(e),e.K=!0,yr(11))):(Mu(n.j,n.m,t,"[Invalid Chunked Response]"),Ds(n),Ea(n))}function xp(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?wa:(t=Number(e.substring(t,i)),isNaN(t)?yd:(i+=1)+t>e.length?wa:(e=e.substr(i,t),n.C=i+t,e))}function Ro(n){n.V=Date.now()+n.O,Kc(n,n.O)}function Kc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gc(Hn(n.gb,n),e)}function Ru(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function Ea(n){0==n.l.G||n.I||$v(n.l,n)}function Ds(n){Ru(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qh(n.T),zh(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ii(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||er(t.h,n)))if(!n.J&&er(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Lp(t),Pp(t)}Xm(t),yr(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Gc(Hn(t.cb,t),6e3));if(1>=Xn(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Dd(t,11)}else if((n.J||t.g==n)&&Lp(t),!De(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let C=a[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const x=C[3];null!=x&&(t.ma=x,t.j.info("VER="+t.ma));const k=C[4];null!=k&&(t.Ca=k,t.j.info("SVER="+t.Ca));const q=C[5];null!=q&&"number"==typeof q&&0<q&&(t.J=i=1.5*q,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const te=n.g;if(te){const me=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(me){var c=i.h;c.g||-1==me.indexOf("spdy")&&-1==me.indexOf("quic")&&-1==me.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(bs(c,c.h),c.h=null))}if(i.D){const Ve=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(i.za=Ve,on(i.F,i.D,Ve))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var p=n;if((i=t).sa=ty(i,i.H?i.ka:null,i.V),p.J){tf(i.h,p);var y=p,D=i.J;D&&y.setTimeout(D),y.B&&(Ru(y),Ro(y)),i.g=p}else Jm(i);0<t.i.length&&Fp(t)}else"stop"!=C[0]&&"close"!=C[0]||Dd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Dd(t,7):Ed(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Nu()}catch{}}function _d(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(bo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Jh(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(bo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function Qh(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(bo(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,c=0;c<a;c++)e.call(void 0,i[c],t&&t[c],n)}(at=Mo.prototype).setTimeout=function(n){this.O=n},at.ib=function(n){n=n.target;const e=this.L;e&&3==Oo(n)?e.l():this.La(n)},at.La=function(n){try{if(n==this.g)e:{const x=Oo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>x)&&(3!=x||Ao||this.g&&(this.h.h||this.g.fa()||Vv(this.g)))){this.I||4!=x||7==e||Nu(),Ru(this);var t=this.g.aa();this.Y=t;t:if(Qs(this)){var i=Vv(this.g);n="";var a=i.length,c=4==Oo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),Ea(this);var p="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:c&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.fa();if(this.i=200==t,function $m(n,e,t,i,a,c,p){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+p})}(this.j,this.u,this.A,this.m,this.U,x,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,D=this.g;if((y=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!De(y)){var C=y;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,yr(12),Ds(this),Ea(this);break e}Mu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ii(this,t)}this.P?(Yh(this,x,p),Ao&&this.i&&3==x&&(bp(this.S,this.T,"tick",this.hb),this.T.start())):(Mu(this.j,this.m,p,null),Ii(this,p)),4==x&&Ds(this),this.i&&!this.I&&(4==x?$v(this.l,this):(this.i=!1,Ro(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,yr(12)):(this.o=0,yr(13)),Ds(this),Ea(this)}}}catch{}},at.hb=function(){if(this.g){var n=Oo(this.g),e=this.g.fa();this.C<e.length&&(Ru(this),Yh(this,n,e),this.i&&4!=n&&Ro(this))}},at.cancel=function(){this.I=!0,Ds(this)},at.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function $c(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Nu(),yr(17)),Ds(this),this.o=2,Ea(this)):Kc(this,this.V-n)};var vd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jn(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Jn){this.h=void 0!==e?e:n.h,Pu(this,n.j),this.s=n.s,this.g=n.g,Id(this,n.m),this.l=n.l,e=n.i;var t=new d;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zi(this,t),this.o=n.o}else n&&(t=String(n).match(vd))?(this.h=!!e,Pu(this,t[1]||"",!0),this.s=Po(t[2]||""),this.g=Po(t[3]||"",!0),Id(this,t[4]),this.l=Po(t[5]||"",!0),zi(this,t[6]||"",!0),this.o=Po(t[7]||"")):(this.h=!!e,this.i=new d(null,this.h))}function Mi(n){return new Jn(n)}function Pu(n,e,t){n.j=t?Po(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Id(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zi(n,e,t){e instanceof d?(n.i=e,function ie(n,e){e&&!n.j&&(f(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(_(this,i),N(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ki(e,ef)),n.i=new d(e,n.h))}function on(n,e,t){n.i.set(e,t)}function ko(n){return on(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Po(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ki(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Xh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Xh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jn.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ki(e,Mp,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ki(e,Mp,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ki(t,"/"==t.charAt(0)?Gm:Fv,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ki(t,g)),n.join("")};var Mp=/[#\/\?@]/g,Fv=/[#\?:]/g,Gm=/[#\?]/g,ef=/[#\?@]/g,g=/#/g;function d(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function f(n){n.g||(n.g=new Map,n.h=0,n.i&&function ku(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var c=n[t].substring(0,i);a=n[t].substring(i+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _(n,e){f(n),e=G(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function S(n,e){return f(n),e=G(n,e),n.g.has(e)}function N(n,e,t){_(n,e),0<t.length&&(n.i=null,n.g.set(G(n,e),A(t)),n.h+=t.length)}function G(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rt(n){this.l=n||Et,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ga&&vt.g.Ga()&&vt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=d.prototype).add=function(n,e){f(this),this.i=null,n=G(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){f(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},at.oa=function(){f(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let c=0;c<a.length;c++)t.push(e[i])}return t},at.W=function(n){f(this);let e=[];if("string"==typeof n)S(this,n)&&(e=e.concat(this.g.get(G(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return f(this),this.i=null,S(this,n=G(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const c=encodeURIComponent(String(i)),p=this.W(i);for(i=0;i<p.length;i++){var a=c;""!==p[i]&&(a+="="+encodeURIComponent(String(p[i]))),n.push(a)}}return this.i=n.join("&")};var Et=10;function gt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Xn(n){return n.h?1:n.g?n.g.size:0}function er(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function bs(n,e){n.g?n.g.add(e):n.h=e}function tf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nf(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return A(n.i)}function rf(){}function Wm(){this.g=new rf}function Np(n,e,t){const i=t||"";try{_d(n,function(a,c){let p=a;To(a)&&(p=Hh(a)),e.push(i+c+"="+encodeURIComponent(p))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function Ou(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function Da(n){this.l=n.ac||null,this.j=n.jb||!1}function Zc(n,e){gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=sf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rt.prototype.cancel=function(){if(this.i=nf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},rf.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},rf.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},Cn(Da,va),Da.prototype.g=function(){return new Zc(this.l,this.j)},Da.prototype.i=function(n){return function(){return n}}({}),Cn(Zc,gr);var sf=0;function wd(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ba(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zi(n)}function Zi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=Zc.prototype).open=function(n,e){if(this.readyState!=sf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zi(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ba(this)),this.readyState=sf},at.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wd(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},at.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ba(this):Zi(this),3==this.readyState&&wd(this)}},at.Va=function(n){this.g&&(this.response=this.responseText=n,ba(this))},at.Ua=function(n){this.g&&(this.response=n,ba(this))},at.ga=function(){this.g&&ba(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var of=vt.JSON.parse;function Gn(n){gr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zm,this.K=this.L=!1}Cn(Gn,gr);var zm="",Lv=/^https?$/i,gb=["POST","PUT"];function Zw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Rp(n),Km(n)}function Rp(n){n.D||(n.D=!0,mr(n,"complete"),mr(n,"error"))}function kp(n){if(n.h&&typeof Do<"u"&&(!n.C[1]||4!=Oo(n)||2!=n.aa()))if(n.v&&4==Oo(n))ld(n.Ha,0,n);else if(mr(n,"readystatechange"),4==Oo(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===y){var a=String(n.H).match(vd)[1]||null;if(!a&&vt.self&&vt.self.location){var c=vt.self.location.protocol;a=c.substr(0,c.length-1)}i=!Lv.test(a?a.toLowerCase():"")}t=i}if(t)mr(n,"complete"),mr(n,"success");else{n.m=6;try{var p=2<Oo(n)?n.g.statusText:""}catch{p=""}n.j=p+" ["+n.aa()+"]",Rp(n)}}finally{Km(n)}}}function Km(n,e){if(n.g){Yw(n);const t=n.g,i=n.C[0]?Zs:null;n.g=null,n.C=null,e||mr(n,"ready");try{t.onreadystatechange=i}catch{}}}function Yw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function Oo(n){return n.g?n.g.readyState:0}function Vv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Bv(n){let e="";return Lc(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Zm(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Bv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):on(n,e,t))}function af(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ym(n){this.Ca=0,this.i=[],this.j=new jc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=af("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=af("baseRetryDelayMs",5e3,n),this.bb=af("retryDelaySeedMs",1e4,n),this.$a=af("forwardChannelMaxRetries",2,n),this.ta=af("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rt(n&&n.concurrentRequestLimit),this.Fa=new Wm,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ed(n){if(Op(n),3==n.G){var e=n.U++,t=Mi(n.F);on(t,"SID",n.I),on(t,"RID",e),on(t,"TYPE","terminate"),uf(n,t),(e=new Mo(n,n.j,e,void 0)).K=2,e.v=ko(Mi(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon&&(t=vt.navigator.sendBeacon(e.v.toString(),"")),!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ny(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ro(e)}bd(n)}function Pp(n){n.g&&(ey(n),n.g.cancel(),n.g=null)}function Op(n){Pp(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Lp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function Fp(n){gt(n.h)||n.m||(n.m=!0,Au(n.Ja,n),n.C=0)}function Uv(n,e){var t;t=e?e.m:n.U++;const i=Mi(n.F);on(i,"SID",n.I),on(i,"RID",t),on(i,"AID",n.T),uf(n,i),n.o&&n.s&&Zm(i,n.o,n.s),t=new Mo(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Qm(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),bs(n.h,t),Zh(t,i,e)}function uf(n,e){n.ia&&Lc(n.ia,function(t,i){on(e,i,t)}),n.l&&_d({},function(t,i){on(e,i,t)})}function Qm(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Hn(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const p=["count="+t];-1==c?0<t?(c=a[0].h,p.push("ofs="+c)):c=0:p.push("ofs="+c);let y=!0;for(let D=0;D<t;D++){let C=a[D].h;const x=a[D].g;if(C-=c,0>C)c=Math.max(0,a[D].h-100),y=!1;else try{Np(x,p,"req"+C+"_")}catch{i&&i(x)}}if(y){i=p.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function Jm(n){n.g||n.u||(n.Z=1,Au(n.Ia,n),n.A=0)}function Xm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Gc(Hn(n.Ia,n),Qw(n,n.A)),n.A++,0))}function ey(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function jv(n){n.g=new Mo(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Mi(n.sa);on(e,"RID","rpc"),on(e,"SID",n.I),on(e,"CI",n.L?"0":"1"),on(e,"AID",n.T),on(e,"TYPE","xmlhttp"),uf(n,e),n.o&&n.s&&Zm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ko(Mi(e)),t.s=null,t.P=!0,vi(t,n)}function Lp(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function $v(n,e){var t=null;if(n.g==e){Lp(n),ey(n),n.g=null;var i=2}else{if(!er(n.h,e))return;t=e.D,tf(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;mr(i=xi(),new Cp(i,t)),Fp(n)}else Jm(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==i&&function _r(n,e){return!(Xn(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Gc(Hn(n.Ja,n,e),Qw(n,n.C)),n.C++,0)))}(n,e)||2==i&&Xm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Dd(n,5);break;case 4:Dd(n,10);break;case 3:Dd(n,6);break;default:Dd(n,2)}}function Qw(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Dd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Hn(n.kb,n);t||(t=new Jn("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||Pu(t,"https"),ko(t)),function qm(n,e){const t=new jc;if(vt.Image){const i=new Image;i.onload=Co(Ou,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Co(Ou,t,i,"TestLoadImage: error",!1,e),i.onabort=Co(Ou,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Co(Ou,t,i,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else yr(2);n.G=0,n.l&&n.l.va(e),bd(n),Op(n)}function bd(n){if(n.G=0,n.la=[],n.l){const e=nf(n.h);(0!=e.length||0!=n.i.length)&&(O(n.la,e),O(n.la,n.i),n.h.i.length=0,A(n.i),n.i.length=0),n.l.ua()}}function ty(n,e,t){var i=t instanceof Jn?Mi(t):new Jn(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Id(i,i.m);else{var a=vt.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Jn(null,void 0);i&&Pu(c,i),e&&(c.g=e),a&&Id(c,a),t&&(c.l=t),i=c}return e=n.za,(t=n.D)&&e&&on(i,t,e),on(i,"VER",n.ma),uf(n,i),i}function ny(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gn(t&&n.Da&&!n.ra?new Da({jb:!0}):n.ra)).Ka(n.H),e}function ry(){}function cf(){if(Pr&&!(10<=Number(vp)))throw Error("Environmental error: no available transport.")}function Yi(n,e){gr.call(this),this.g=new Ym(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!De(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!De(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fu(this)}function iy(n){md.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sy(){Wc.call(this),this.status=1}function Fu(n){this.g=n}(at=Gn.prototype).Ka=function(n){this.L=n},at.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kh.g(),this.C=function Ap(n){return n.h||(n.h=n.i())}(this.u?this.u:Kh),this.g.onreadystatechange=Hn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void Zw(this,c)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const c of i.keys())t.set(c,i.get(c))}i=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=vt.FormData&&n instanceof vt.FormData,!(0<=b(gb,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of t)this.g.setRequestHeader(c,p);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yw(this),0<this.B&&((this.K=function mb(n){return Pr&&function km(){return function Zr(n){var e=Oc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ke(String(ed)).split("."),t=Ke("9").split("."),i=Math.max(e.length,t.length);for(let p=0;0==n&&p<i;p++){var a=e[p]||"",c=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=$e(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||$e(0==a[2].length,0==c[2].length)||$e(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hn(this.qa,this)):this.A=ld(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Zw(this,c)}},at.qa=function(){typeof Do<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mr(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mr(this,"complete"),mr(this,"abort"),Km(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Km(this,!0)),Gn.X.M.call(this)},at.Ha=function(){this.s||(this.F||this.v||this.l?kp(this):this.fb())},at.fb=function(){kp(this)},at.aa=function(){try{return 2<Oo(this)?this.g.status:-1}catch{return-1}},at.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),of(e)}},at.Ea=function(){return this.m},at.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=Ym.prototype).ma=8,at.G=1,at.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Mo(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=Fm(c),Vm(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qm(this,a,e),on(t=Mi(this.F),"RID",n),on(t,"CVER",22),this.D&&on(t,"X-HTTP-Session-Id",this.D),uf(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(Bv(c)))+"&"+e:this.o&&Zm(t,this.o,c)),bs(this.h,a),this.Ya&&on(t,"TYPE","init"),this.O?(on(t,"$req",e),on(t,"SID","null"),a.Z=!0,Zh(a,t,null)):Zh(a,t,e),this.G=2}}else 3==this.G&&(n?Uv(this,n):0==this.i.length||gt(this.h)||Uv(this))},at.Ia=function(){if(this.u=null,jv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Gc(Hn(this.eb,this),n)}},at.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,yr(10),Pp(this),jv(this))},at.cb=function(){null!=this.v&&(this.v=null,Pp(this),Xm(this),yr(19))},at.kb=function(n){n?(this.j.info("Successfully pinged google.com"),yr(2)):(this.j.info("Failed to ping google.com"),yr(1))},(at=ry.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Ra=function(){},cf.prototype.g=function(n,e){return new Yi(n,e)},Cn(Yi,gr),Yi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;yr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ty(n,null,n.V),Fp(n)},Yi.prototype.close=function(){Ed(this.g)},Yi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Hh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Fp(e)},Yi.prototype.M=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,Yi.X.M.call(this)},Cn(iy,md),Cn(sy,Wc),Cn(Fu,ry),Fu.prototype.xa=function(){mr(this.g,"a")},Fu.prototype.wa=function(n){mr(this.g,new iy(n))},Fu.prototype.va=function(n){mr(this.g,new sy)},Fu.prototype.ua=function(){mr(this.g,"b")},cf.prototype.createWebChannel=cf.prototype.g,Yi.prototype.send=Yi.prototype.u,Yi.prototype.open=Yi.prototype.m,Yi.prototype.close=Yi.prototype.close,pd.NO_ERROR=0,pd.TIMEOUT=8,pd.HTTP_ERROR=6,Sp.COMPLETE="complete",gd.EventType=Ia,Ia.OPEN="a",Ia.CLOSE="b",Ia.ERROR="c",Ia.MESSAGE="d",gr.prototype.listen=gr.prototype.N,Gn.prototype.listenOnce=Gn.prototype.O,Gn.prototype.getLastError=Gn.prototype.Oa,Gn.prototype.getLastErrorCode=Gn.prototype.Ea,Gn.prototype.getStatus=Gn.prototype.aa,Gn.prototype.getResponseJson=Gn.prototype.Sa,Gn.prototype.getResponseText=Gn.prototype.fa,Gn.prototype.send=Gn.prototype.da,Gn.prototype.setWithCredentials=Gn.prototype.Ka;var yb=pr.createWebChannelTransport=function(){return new cf},Jw=pr.getStatEventTarget=function(){return xi()},lf=pr.ErrorCode=pd,Hv=pr.EventType=Sp,Gv=pr.Event=xo,Lu=pr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Xw=pr.FetchXmlHttpFactory=Da,Td=pr.WebChannel=gd,Vp=pr.XhrIo=Gn;const Wv="@firebase/firestore";class vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");let Ta="9.17.1";const Qi=new kr.Yd("@firebase/firestore");function Bp(){return Qi.logLevel}function ke(n,...e){if(Qi.logLevel<=kr.in.DEBUG){const t=e.map(Bu);Qi.debug(`Firestore (${Ta}): ${n}`,...t)}}function ur(n,...e){if(Qi.logLevel<=kr.in.ERROR){const t=e.map(Bu);Qi.error(`Firestore (${Ta}): ${n}`,...t)}}function Vu(n,...e){if(Qi.logLevel<=kr.in.WARN){const t=e.map(Bu);Qi.warn(`Firestore (${Ta}): ${n}`,...t)}}function Bu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function dt(n,e){n||ot()}function ze(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends $t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vr.UNAUTHENTICATED))}shutdown(){}}class _b{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tE{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const c=C=>this.i!==a?(a=this.i,t(C)):Promise.resolve();let p=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Ir,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const C=p;e.enqueueRetryable((0,de.Z)(function*(){yield C.promise,yield c(i.currentUser)}))},D=C=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(C=>D(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?D(C):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Ir)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt("string"==typeof i.accessToken),new qv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new vr(e)}}class Up{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class nE{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a}getToken(){return Promise.resolve(new Up(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class df{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=c=>{null!=c.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.A;return this.A=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const a=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.A=t.token,new Yc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ib(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class ay{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=Ib(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+=e.charAt(a[c]%e.length))}return i}}function Ot(n,e){return n<e?-1:n>e?1:0}function Cd(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function Kv(n){return n+"\0"}class Sn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Sn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Sn(0,0))}static max(){return new mt(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qc{constructor(e,t,i){void 0===t?t=0:t>e.length&&ot(),void 0===i?i=e.length-t:i>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Qc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qc?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Qc{construct(e,t,i){return new Zt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const rE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Qc{construct(e,t,i){return new Pn(e,t,i)}static isValidIdentifier(e){return rE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pn(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(0===i.length)throw new Se(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let p=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Se(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const D=e[a+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new Se(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=D,a+=2}else"`"===y?(p=!p,a++):"."!==y||p?(i+=y,a++):(c(),a++)}if(c(),p)throw new Se(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Zt.fromString(e))}static fromName(e){return new Ue(Zt.fromString(e).popFirst(5))}static empty(){return new Ue(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Zt(e.slice()))}}class jp{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function uy(n){return n.fields.find(e=>2===e.kind)}function Jc(n){return n.fields.filter(e=>2!==e.kind)}jp.UNKNOWN_ID=-1;class $p{constructor(e,t){this.fieldPath=e,this.kind=t}}class hf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hf(0,Ji.min())}}function Xc(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=mt.fromTimestamp(1e9===i?new Sn(t+1,0):new Sn(t,i));return new Ji(a,Ue.empty(),e)}function Fo(n){return new Ji(n.readTime,n.key,-1)}class Ji{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ji(mt.min(),Ue.empty(),-1)}static max(){return new Ji(mt.max(),Ue.empty(),-1)}}function cy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}const oE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ca(n){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,de.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==oE)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),Zv.apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,i)=>{t(e)})}static reject(e){return new J((t,i)=>{i(e)})}static waitFor(e){return new J((t,i)=>{let a=0,c=0,p=!1;e.forEach(y=>{++a,y.next(()=>{++c,p&&c===a&&t()},D=>i(D))}),p=!0,c===a&&t()})}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next(a=>a?J.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,c)=>{i.push(t.call(this,a,c))}),this.waitFor(i)}static mapArray(e,t){return new J((i,a)=>{const c=e.length,p=new Array(c);let y=0;for(let D=0;D<c;D++){const C=D;t(e[C]).next(x=>{p[C]=x,++y,y===c&&i(p)},x=>a(x))}})}static doWhile(e,t){return new J((i,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):i()};c()})}}class ly{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Sd(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const a=Hp(i.target.error);this.P.reject(new Sd(e,a))}}static open(e,t,i,a){try{return new ly(t,e.transaction(a,i))}catch(c){throw new Sd(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cE(t)}}class Ts{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===Ts.D((0,$t.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Qr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,$t.hl)())return!1;if(Ts.N())return!0;const e=(0,$t.z$)(),t=Ts.D(e),i=0<t&&t<10,a=Ts.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,de.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=p=>{i(p.target.result)},c.onblocked=()=>{a(new Sd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const y=p.target.error;a("VersionError"===y.name?new Se(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Se(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Sd(e,y))},c.onupgradeneeded=p=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.S.$(p.target.result,c.transaction,p.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var c=this;return(0,de.Z)(function*(){const p="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.F(e);const D=ly.open(c.db,e,p?"readonly":"readwrite",i),C=a(D).next(x=>(D.V(),x)).catch(x=>(D.abort(x),J.reject(x))).toPromise();return C.catch(()=>{}),yield D.v,C}catch(D){const C=D,x="FirebaseError"!==C.name&&y<3;if(ke("SimpleDb","Transaction failed with error:",C.message,"Retrying:",x),c.close(),!x)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uE{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Qr(this.q.delete())}}class Sd extends Se{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uu(n){return"IndexedDbTransactionError"===n.name}class cE{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Qr(i)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Qr(this.store.add(e))}get(e){return Qr(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Qr(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Qr(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),c=[];return this.H(a,(p,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(i.range);return new J((c,p)=>{a.onerror=y=>{p(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new J((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,(c,p,y)=>y.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}tt(e){const t=this.cursor({});return new J((i,a)=>{t.onerror=c=>{const p=Hp(c.target.error);a(p)},t.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(y=>{y?p.continue():i()}):i()}})}H(e,t){const i=[];return new J((a,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const y=p.target.result;if(!y)return void a();const D=new uE(y),C=t(y.primaryKey,y.value,D);if(C instanceof J){const x=C.catch(k=>(D.done(),J.reject(k)));i.push(x)}D.isDone?a():null===D.G?y.continue():y.continue(D.G)}}).next(()=>J.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qr(n){return new J((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=Hp(i.target.error);t(a)}})}let Yv=!1;function Hp(n){const e=Ts.D((0,$t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yv||(Yv=!0,setTimeout(()=>{throw i},0)),i}}return n}class lE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,de.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Uu(i)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ca(i)}yield t.nt(6e4)}))}}class dE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,de.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let a=t,c=!0;return J.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!i.has(p))return ke("IndexBackiller",`Processing collection: ${p}`),this.rt(e,p,a).next(y=>{a-=y,i.add(p)});c=!1})).next(()=>t-a)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ot(a,c)).next(y=>(ke("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>p.size)}))}ot(e,t){let i=e;return t.changes.forEach((a,c)=>{const p=Fo(c);cy(p,i)>0&&(i=p)}),new Ji(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Xi=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>i.writeSequenceNumber(a))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class hE{constructor(e,t,i,a,c,p,y,D){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.useFetchStreams=D}}class Sa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sa&&e.projectId===this.projectId&&e.database===this.database}}function Qv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function el(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kt(n){return null==n}function Ad(n){return 0===n&&1/n==-1/0}function dy(n){return"number"==typeof n&&Number.isInteger(n)&&!Ad(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Cr(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const fE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(n){if(dt(!!n),"string"==typeof n){let e=0;const t=fE.exec(n);if(dt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ju(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function hy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function e0(n){const e=n.mapValue.fields.__previous_value__;return hy(e)?e0(e):e}function Gp(n){const e=Aa(n.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}const xa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ff={nullValue:"NULL_VALUE"};function es(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hy(n)?4:py(n)?9007199254740991:10:ot()}function Lo(n,e){if(n===e)return!0;const t=es(n);if(t!==es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gp(n).isEqual(Gp(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=Aa(i.timestampValue),p=Aa(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,ju(n.bytesValue).isEqual(ju(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return tr(i.geoPointValue.latitude)===tr(a.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return tr(i.integerValue)===tr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=tr(i.doubleValue),p=tr(a.doubleValue);return c===p?Ad(c)===Ad(p):isNaN(c)&&isNaN(p)}return!1}(n,e);case 9:return Cd(n.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:return function(i,a){const c=i.mapValue.fields||{},p=a.mapValue.fields||{};if(Qv(c)!==Qv(p))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===p[y]||!Lo(c[y],p[y])))return!1;return!0}(n,e);default:return ot()}var a}function tl(n,e){return void 0!==(n.values||[]).find(t=>Lo(t,e))}function Vo(n,e){if(n===e)return 0;const t=es(n),i=es(e);if(t!==i)return Ot(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(a,c){const p=tr(a.integerValue||a.doubleValue),y=tr(c.integerValue||c.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1}(n,e);case 3:return t0(n.timestampValue,e.timestampValue);case 4:return t0(Gp(n),Gp(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(a,c){const p=ju(a),y=ju(c);return p.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const p=a.split("/"),y=c.split("/");for(let D=0;D<p.length&&D<y.length;D++){const C=Ot(p[D],y[D]);if(0!==C)return C}return Ot(p.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const p=Ot(tr(a.latitude),tr(c.latitude));return 0!==p?p:Ot(tr(a.longitude),tr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const p=a.values||[],y=c.values||[];for(let D=0;D<p.length&&D<y.length;++D){const C=Vo(p[D],y[D]);if(C)return C}return Ot(p.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===xa.mapValue&&c===xa.mapValue)return 0;if(a===xa.mapValue)return 1;if(c===xa.mapValue)return-1;const p=a.fields||{},y=Object.keys(p),D=c.fields||{},C=Object.keys(D);y.sort(),C.sort();for(let x=0;x<y.length&&x<C.length;++x){const k=Ot(y[x],C[x]);if(0!==k)return k;const q=Vo(p[y[x]],D[C[x]]);if(0!==q)return q}return Ot(y.length,C.length)}(n.mapValue,e.mapValue);default:throw ot()}}function t0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Aa(n),i=Aa(e),a=Ot(t.seconds,i.seconds);return 0!==a?a:Ot(t.nanos,i.nanos)}function pf(n){return n0(n)}function n0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=Aa(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ju(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",c=!0;for(const p of i.values||[])c?c=!1:a+=",",a+=n0(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let c="{",p=!0;for(const y of a)p?p=!1:c+=",",c+=`${y}:${n0(i.fields[y])}`;return c+"}"}(n.mapValue):ot();var e}function xd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fy(n){return!!n&&"integerValue"in n}function Md(n){return!!n&&"arrayValue"in n}function pE(n){return!!n&&"nullValue"in n}function r0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ma(n){return!!n&&"mapValue"in n}function gf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return el(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=gf(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function py(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Wp(n){return"nullValue"in n?ff:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xd(Sa.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function gE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xd(Sa.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xa:ot()}function gy(n,e){const t=Vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function s0(n,e){const t=Vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $u{constructor(e,t){this.position=e,this.inclusive=t}}function o0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const c=e[a],p=n.position[a];if(i=c.field.isKeyField()?Ue.comparator(Ue.fromName(p.referenceValue),t.key):Vo(p,t.data.field(c.field)),"desc"===c.dir&&(i*=-1),0!==i)break}return i}function a0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lo(n.position[t],e.position[t]))return!1;return!0}class u0{}class zt extends u0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new _E(e,t,i):"array-contains"===t?new d0(e,i):"in"===t?new h0(e,i):"not-in"===t?new my(e,i):"array-contains-any"===t?new Na(e,i):new zt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new l0(e,i):new zp(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vo(t,this.value)):null!==t&&es(this.value)===es(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fn extends u0{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new fn(e,t)}matches(e){return nl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function nl(n){return"and"===n.op}function qp(n){return"or"===n.op}function mf(n){return mE(n)&&nl(n)}function mE(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function yf(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+pf(n.value);if(mf(n))return n.filters.map(e=>yf(e)).join(",");{const e=n.filters.map(t=>yf(t)).join(",");return`${n.op}(${e})`}}function c0(n,e){return n instanceof zt?(t=n,(i=e)instanceof zt&&t.op===i.op&&t.field.isEqual(i.field)&&Lo(t.value,i.value)):n instanceof fn?function(t,i){return i instanceof fn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((a,c,p)=>a&&c0(c,i.filters[p]),!0)}(n,e):void ot();var t,i}function yE(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function rl(n){return n instanceof zt?`${(e=n).field.canonicalString()} ${e.op} ${pf(e.value)}`:n instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(rl).join(" ,")+"}"}(n):"Filter";var e}class _E extends zt{constructor(e,t,i){super(e,t,i),this.key=Ue.fromName(i.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class l0 extends zt{constructor(e,t){super(e,"in",t),this.keys=Cs(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zp extends zt{constructor(e,t){super(e,"not-in",t),this.keys=Cs(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cs(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ue.fromName(i.referenceValue))}class d0 extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Md(t)&&tl(t.arrayValue,this.value)}}class h0 extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tl(this.value.arrayValue,t)}}class my extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tl(this.value.arrayValue,t)}}class Na extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Md(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>tl(this.value.arrayValue,i))}}class Hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function f0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class On{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new On(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new On(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yy(this.root,e,this.comparator,!1)}getReverseIterator(){return new yy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yy(this.root,e,this.comparator,!0)}}class yy{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lr{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??Lr.RED,this.left=a??Lr.EMPTY,this.right=c??Lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new Lr(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Lr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1,Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,i,a){return this}insert(n,e,t){return new Lr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new On(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _f(this.data.getIterator())}getIteratorFrom(e){return new _f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class _f{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ra(n){return n.hasNext()?n.getNext():void 0}class oi{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new oi([])}unionWith(e){let t=new yn(Pn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cd(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Sr{constructor(e){this.value=e}static empty(){return new Sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ma(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gf(t)}setAll(e){let t=Pn.emptyPath(),i={},a=[];e.forEach((p,y)=>{if(!t.isImmediateParentOf(y)){const D=this.getFieldsMap(t);this.applyChanges(D,i,a),i={},a=[],t=y.popLast()}p?i[y.lastSegment()]=gf(p):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());Ma(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Ma(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){el(t,(a,c)=>e[a]=c);for(const a of i)delete e[a]}clone(){return new Sr(gf(this.value))}}function Kp(n){const e=[];return el(n.fields,(t,i)=>{const a=new Pn([t]);if(Ma(i)){const c=Kp(i.mapValue).fields;if(0===c.length)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new oi(e)}class Fn{constructor(e,t,i,a,c,p,y){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=c,this.data=p,this.documentState=y}static newInvalidDocument(e){return new Fn(e,0,mt.min(),mt.min(),mt.min(),Sr.empty(),0)}static newFoundDocument(e,t,i,a){return new Fn(e,1,t,mt.min(),i,a,0)}static newNoDocument(e,t){return new Fn(e,2,t,mt.min(),mt.min(),Sr.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,mt.min(),mt.min(),Sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vE{constructor(e,t=null,i=[],a=[],c=null,p=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=p,this.endAt=y,this.ft=null}}function _y(n,e=null,t=[],i=[],a=null,c=null,p=null){return new vE(n,e,t,i,a,c,p)}function il(n){const e=ze(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>yf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),kt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>pf(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>pf(i)).join(",")),e.ft=t}return e.ft}function vf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!f0(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!c0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!a0(n.startAt,e.startAt)&&a0(n.endAt,e.endAt)}function If(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vy(n,e){return n.filters.filter(t=>t instanceof zt&&t.field.isEqual(e))}function p0(n,e,t){let i=ff,a=!0;for(const c of vy(n,e)){let p=ff,y=!0;switch(c.op){case"<":case"<=":p=Wp(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,y=!1;break;case"!=":case"not-in":p=ff}gy({value:i,inclusive:a},{value:p,inclusive:y})<0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];gy({value:i,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}function IE(n,e,t){let i=xa,a=!0;for(const c of vy(n,e)){let p=xa,y=!0;switch(c.op){case">=":case">":p=gE(c.value),y=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,y=!1;break;case"!=":case"not-in":p=xa}s0({value:i,inclusive:a},{value:p,inclusive:y})>0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];s0({value:i,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}class Bo{constructor(e,t=null,i=[],a=[],c=null,p="F",y=null,D=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=p,this.startAt=y,this.endAt=D,this.dt=null,this._t=null}}function Iy(n,e,t,i,a,c,p,y){return new Bo(n,e,t,i,a,c,p,y)}function Nd(n){return new Bo(n)}function Zp(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function g0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function wy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function m0(n){return null!==n.collectionGroup}function Rd(n){const e=ze(n);if(null===e.dt){e.dt=[];const t=wy(e),i=g0(e);if(null!==t&&null===i)t.isKeyField()||e.dt.push(new Hu(t)),e.dt.push(new Hu(Pn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.dt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Hu(Pn.keyField(),c))}}}return e.dt}function Ni(n){const e=ze(n);if(!e._t)if("F"===e.limitType)e._t=_y(e.path,e.collectionGroup,Rd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Rd(e))t.push(new Hu(c.field,"desc"===c.dir?"asc":"desc"));const i=e.endAt?new $u(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new $u(e.startAt.position,e.startAt.inclusive):null;e._t=_y(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e._t}function y0(n,e){e.getFirstInequalityField(),wy(n);const t=n.filters.concat([e]);return new Bo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ey(n,e,t){return new Bo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Yp(n,e){return vf(Ni(n),Ni(e))&&n.limitType===e.limitType}function wE(n){return`${il(Ni(n))}|lt:${n.limitType}`}function _0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>rl(i)).join(", ")}]`),kt(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(a=i).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>pf(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>pf(i)).join(",")),`Target(${t})`}(Ni(n))}; limitType=${n.limitType})`}function Ss(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ue.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of Rd(t))if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,c,p){const y=o0(a,c,p);return a.inclusive?y<=0:y<0}(t.startAt,Rd(t),i)||t.endAt&&!function(a,c,p){const y=o0(a,c,p);return a.inclusive?y>=0:y>0}(t.endAt,Rd(t),i)));var t,i}function Qp(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v0(n){return(e,t)=>{let i=!1;for(const a of Rd(n)){const c=I0(a,e,t);if(0!==c)return c;i=i||a.field.isKeyField()}return 0}}function I0(n,e,t){const i=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(a,c,p){const y=c.data.field(a),D=p.data.field(a);return null!==y&&null!==D?Vo(y,D):ot()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ot()}}function Jp(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function Dy(n){return{integerValue:""+n}}function Xp(n,e){return dy(e)?Dy(e):Jp(n,e)}class eg{constructor(){this._=void 0}}function Gu(n,e,t){return n instanceof kd?function(i,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Wu?D0(n,e):n instanceof sl?wf(n,e):function(i,a){const c=E0(i,a),p=tg(c)+tg(i.gt);return fy(c)&&fy(i.gt)?Dy(p):Jp(i.yt,p)}(n,e)}function w0(n,e,t){return n instanceof Wu?D0(n,e):n instanceof sl?wf(n,e):t}function E0(n,e){return n instanceof Js?fy(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class kd extends eg{}class Wu extends eg{constructor(e){super(),this.elements=e}}function D0(n,e){const t=ol(e);for(const i of n.elements)t.some(a=>Lo(a,i))||t.push(i);return{arrayValue:{values:t}}}class sl extends eg{constructor(e){super(),this.elements=e}}function wf(n,e){let t=ol(e);for(const i of n.elements)t=t.filter(a=>!Lo(a,i));return{arrayValue:{values:t}}}class Js extends eg{constructor(e,t){super(),this.yt=e,this.gt=t}}function tg(n){return tr(n.integerValue||n.doubleValue)}function ol(n){return Md(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class al{constructor(e,t){this.field=e,this.transform=t}}class b0{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Od{}function by(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Vr(n.key,An.none()):new ul(n.key,n.data,An.none());{const t=n.data,i=Sr.empty();let a=new yn(Pn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);null===p&&c.length>1&&(c=c.popLast(),p=t.field(c)),null===p?i.delete(c):i.set(c,p),a=a.add(c)}return new ka(n.key,i,new oi(a.toArray()),An.none())}}function Ty(n,e,t){n instanceof ul?function(i,a,c){const p=i.value.clone(),y=Sy(i.fieldTransforms,a,c.transformResults);p.setAll(y),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):n instanceof ka?function(i,a,c){if(!Pd(i.precondition,a))return void a.convertToUnknownDocument(c.version);const p=Sy(i.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(Cy(i)),y.setAll(p),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ef(n,e,t,i){return n instanceof ul?function(a,c,p,y){if(!Pd(a.precondition,c))return p;const D=a.value.clone(),C=C0(a.fieldTransforms,y,c);return D.setAll(C),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null}(n,e,t,i):n instanceof ka?function(a,c,p,y){if(!Pd(a.precondition,c))return p;const D=C0(a.fieldTransforms,y,c),C=c.data;return C.setAll(Cy(a)),C.setAll(D),c.convertToFoundDocument(c.version,C).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,i):(p=t,Pd(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p);var c,p}function wb(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),c=E0(i.transform,a||null);null!=c&&(null===t&&(t=Sr.empty()),t.set(i.field,c))}return t||null}function T0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Cd(t,i,(a,c)=>function ng(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Wu&&i instanceof Wu||t instanceof sl&&i instanceof sl?Cd(t.elements,i.elements,Lo):t instanceof Js&&i instanceof Js?Lo(t.gt,i.gt):t instanceof kd&&i instanceof kd);var t,i}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class ul extends Od{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ka extends Od{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Cy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Sy(n,e,t){const i=new Map;dt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],p=c.transform,y=e.data.field(c.field);i.set(c.field,w0(p,y,t[a]))}return i}function C0(n,e,t){const i=new Map;for(const a of n){const c=a.transform,p=t.data.field(a.field);i.set(a.field,Gu(c,p,e))}return i}class Vr extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rg extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class EE{constructor(e){this.count=e}}var Ar,tn;function ig(n){switch(n){default:return ot();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function Ay(n){if(void 0===n)return ur("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Ar.OK:return ne.OK;case Ar.CANCELLED:return ne.CANCELLED;case Ar.UNKNOWN:return ne.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return ne.INTERNAL;case Ar.UNAVAILABLE:return ne.UNAVAILABLE;case Ar.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ar.NOT_FOUND:return ne.NOT_FOUND;case Ar.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ar.ABORTED:return ne.ABORTED;case Ar.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ar.DATA_LOSS:return ne.DATA_LOSS;default:return ot()}}(tn=Ar||(Ar={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class qu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,c]of i)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(t,i)=>{for(const[a,c]of i)e(a,c)})}isEmpty(){return Jv(this.inner)}size(){return this.innerSize}}const DE=new On(Ue.comparator);function Ri(){return DE}const xy=new On(Ue.comparator);function Df(...n){let e=xy;for(const t of n)e=e.insert(t.key,t);return e}function My(n){let e=xy;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Uo(){return Fd()}function S0(){return Fd()}function Fd(){return new qu(n=>n.toString(),(n,e)=>n.isEqual(e))}const A0=new On(Ue.comparator),bE=new yn(Ue.comparator);function St(...n){let e=bE;for(const t of n)e=e.add(t);return e}const Ny=new yn(Ot);function sg(){return Ny}class bf{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,og.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bf(mt.min(),a,sg(),Ri(),St())}}class og{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new og(i,t,St(),St(),St())}}class Tf{constructor(e,t,i,a){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=a}}class x0{constructor(e,t){this.targetId=e,this.Et=t}}class M0{constructor(e,t,i=Cr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class N0{constructor(){this.At=0,this.Rt=k0(),this.bt=Cr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=St(),t=St(),i=St();return this.Rt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ot()}}),new og(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=k0()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Ry{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ri(),this.qt=R0(),this.Ut=new yn(Ot)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,a)=>{this.zt(a)&&t(a)})}Jt(e){const t=e.targetId,i=e.Et.count,a=this.Yt(t);if(a){const c=a.target;if(If(c))if(0===i){const p=new Ue(c.path);this.Qt(t,p,Fn.newNoDocument(p,mt.min()))}else dt(1===i);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((c,p)=>{const y=this.Yt(p);if(y){if(c.current&&If(y.target)){const D=new Ue(y.target.path);null!==this.Lt.get(D)||this.te(p,D)||this.Qt(p,D,Fn.newNoDocument(D,e))}c.St&&(t.set(p,c.Ct()),c.xt())}});let i=St();this.qt.forEach((c,p)=>{let y=!0;p.forEachWhile(D=>{const C=this.Yt(D);return!C||2===C.purpose||(y=!1,!1)}),y&&(i=i.add(c))}),this.Lt.forEach((c,p)=>p.setReadTime(e));const a=new bf(e,t,this.Ut,this.Lt,i);return this.Lt=Ri(),this.qt=R0(),this.Ut=new yn(Ot),a}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const a=this.Wt(e);this.te(e,t)?a.Nt(t,1):a.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new N0,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new yn(Ot),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new N0),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function R0(){return new On(Ue.comparator)}function k0(){return new On(Ue.comparator)}const ag={asc:"ASCENDING",desc:"DESCENDING"},ky={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ug={and:"AND",or:"OR"};class Eb{constructor(e,t){this.databaseId=e,this.wt=t}}function zu(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TE(n,e){return n.wt?e.toBase64():e.toUint8Array()}function P0(n,e){return zu(n,e.toTimestamp())}function nr(n){return dt(!!n),mt.fromTimestamp(function(e){const t=Aa(e);return new Sn(t.seconds,t.nanos)}(n))}function cg(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Py(n){const e=Zt.fromString(n);return dt(H0(e)),e}function cl(n,e){return cg(n.databaseId,e.path)}function Br(n,e){const t=Py(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(O0(t))}function Ld(n,e){return cg(n.databaseId,e)}function Cf(n){const e=Py(n);return 4===e.length?Zt.emptyPath():O0(e)}function Pa(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function O0(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lg(n,e,t){return{name:cl(n,e),fields:t.value.mapValue.fields}}function Oy(n,e,t){const i=Br(n,e.name),a=nr(e.updateTime),c=e.createTime?nr(e.createTime):mt.min(),p=new Sr({mapValue:{fields:e.fields}}),y=Fn.newFoundDocument(i,a,c,p);return t&&y.setHasCommittedMutations(),t?y.setHasCommittedMutations():y}function Oa(n,e){let t;if(e instanceof ul)t={update:lg(n,e.key,e.value)};else if(e instanceof Vr)t={delete:cl(n,e.key)};else if(e instanceof ka)t={update:lg(n,e.key,e.data),updateMask:ME(e.fieldMask)};else{if(!(e instanceof rg))return ot();t={verify:cl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const p=c.transform;if(p instanceof kd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Wu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof sl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Js)return{fieldPath:c.field.canonicalString(),increment:p.gt};throw ot()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:P0(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:ot()),t;var a}function Fy(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?An.updateTime(nr(a.updateTime)):void 0!==a.exists?An.exists(a.exists):An.none():An.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(c,p){let y=null;"setToServerValue"in p?(dt("REQUEST_TIME"===p.setToServerValue),y=new kd):"appendMissingElements"in p?y=new Wu(p.appendMissingElements.values||[]):"removeAllFromArray"in p?y=new sl(p.removeAllFromArray.values||[]):"increment"in p?y=new Js(c,p.increment):ot();const D=Pn.fromServerFormat(p.fieldPath);return new al(D,y)}(n,a)):[];var a;if(e.update){const a=Br(n,e.update.name),c=new Sr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new oi((e.updateMask.fieldPaths||[]).map(C=>Pn.fromServerFormat(C)));return new ka(a,c,p,t,i)}return new ul(a,c,t,i)}if(e.delete){const a=Br(n,e.delete);return new Vr(a,t)}if(e.verify){const a=Br(n,e.verify);return new rg(a,t)}return ot()}function F0(n,e){return{documents:[Ld(n,e.path)]}}function L0(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Ld(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ld(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(D){if(0!==D.length)return $0(fn.create(D,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(D){if(0!==D.length)return D.map(C=>{return{field:Ku((x=C).field),direction:U0(x.dir)};var x})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=(C=e.limit,n.wt||kt(C)?C:{value:C});var C,y,D;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(D=e.endAt).inclusive,values:D.position}),t}function V0(n){let e=Cf(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){dt(1===i);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let c=[];t.where&&(c=function(x){const k=B0(x);return k instanceof fn&&mf(k)?k.getFilters():[k]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(x=>{return new Hu(Vd((k=x).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let y=null;t.limit&&(y=function(x){let k;return k="object"==typeof x?x.value:x,kt(k)?null:k}(t.limit));let D=null;var x;t.startAt&&(D=new $u((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new $u(x.values||[],!x.before)}(t.endAt)),Iy(e,a,p,c,y,"F",D,C)}function B0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vd(e.unaryFilter.field);return zt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=Vd(e.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Vd(e.unaryFilter.field);return zt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vd(e.unaryFilter.field);return zt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(n):void 0!==n.fieldFilter?zt.create(Vd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(t=>B0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ot()}}(e.compositeFilter.op))}(n):ot();var e}function U0(n){return ag[n]}function j0(n){return ky[n]}function xE(n){return ug[n]}function Ku(n){return{fieldPath:n.canonicalString()}}function Vd(n){return Pn.fromServerFormat(n.fieldPath)}function $0(n){return n instanceof zt?function(e){if("=="===e.op){if(r0(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NAN"}};if(pE(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(r0(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NOT_NAN"}};if(pE(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ku(e.field),op:j0(e.op),value:e.value}}}(n):n instanceof fn?function(e){const t=e.getFilters().map(i=>$0(i));return 1===t.length?t[0]:{compositeFilter:{op:xE(e.op),filters:t}}}(n):ot()}function ME(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function H0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function wi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sf(e)),e=NE(n.get(t),e);return Sf(e)}function NE(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Sf(n){return n+"\x01\x01"}function ai(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,i=[];let a="";for(let c=0;c<e;){const p=n.indexOf("\x01",c);switch((p<0||p>t)&&ot(),n.charAt(p+1)){case"\x01":const y=n.substring(c,p);let D;0===a.length?D=y:(a+=y,D=a,a=""),i.push(D);break;case"\x10":a+=n.substring(c,p),a+="\0";break;case"\x11":a+=n.substring(c,p+1);break;default:ot()}c=p+2}return new Zt(i)}const RE=["userId","batchId"];function Zu(n,e){return[n,wi(e)]}function G0(n,e,t){return[n,wi(e),t]}const kE={},Ly=["prefixPath","collectionGroup","readTime","documentId"],PE=["prefixPath","collectionGroup","documentId"],jo=["collectionGroup","readTime","prefixPath","documentId"],Af=["canonicalId","targetId"],ui=["targetId","path"],ll=["path","targetId"],dg=["collectionId","parent"],As=["indexId","uid"],W0=["uid","sequenceNumber"],Bd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ud=["indexId","uid","orderedDocumentKey"],jd=["userId","collectionPath","documentId"],$d=["userId","collectionPath","largestBatchId"],Hd=["userId","collectionGroup","largestBatchId"],dl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gd=[...dl,"documentOverlays"],hl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fl=hl,q0=[...fl,"indexConfiguration","indexState","indexEntries"];class hg extends aE{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function xr(n,e){const t=ze(n);return Ts.M(t.se,e)}class fg{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Ty(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ef(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ef(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=S0();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let y=this.applyToLocalView(p,c.mutatedFields);y=t.has(a.key)?null:y;const D=by(p,y);null!==D&&i.set(a.key,D),p.isValidDocument()||p.convertToNoDocument(mt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),St())}isEqual(e){return this.batchId===e.batchId&&Cd(this.mutations,e.mutations,(t,i)=>T0(t,i))&&Cd(this.baseMutations,e.baseMutations,(t,i)=>T0(t,i))}}class pg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){dt(e.mutations.length===i.length);let a=A0;const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,i[p].version);return new pg(e,t,i,a)}}class gg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fa{constructor(e,t,i,a,c=mt.min(),p=mt.min(),y=Cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y}withSequenceNumber(e){return new Fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vy{constructor(e){this.ie=e}}function K0(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:cl(a=n.ie,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:zu(a,c.version.toTimestamp()),createTime:zu(a,c.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Yu(e.version)};else{if(!e.isUnknownDocument())return ot();i.unknownDocument={path:t.path.toArray(),version:Yu(e.version)}}var a,c;return i}function mg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pl(n){const e=new Sn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function Qu(n,e){const t=(e.baseMutations||[]).map(c=>Fy(n.ie,c));for(let c=0;c<e.mutations.length-1;++c){const p=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(p.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const i=e.mutations.map(c=>Fy(n.ie,c)),a=Sn.fromMillis(e.localWriteTimeMs);return new fg(e.batchId,a,t,i)}function gl(n){const e=pl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pl(n.lastLimboFreeSnapshotVersion):mt.min();let i;var a;return void 0!==n.query.documents?(dt(1===(a=n.query).documents.length),i=Ni(Nd(Cf(a.documents[0])))):i=Ni(V0(n.query)),new Fa(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Cr.fromBase64String(n.resumeToken))}function yg(n,e){const t=Yu(e.snapshotVersion),i=Yu(e.lastLimboFreeSnapshotVersion);let a;a=If(e.target)?F0(n.ie,e.target):L0(n.ie,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:il(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function By(n){const e=V0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ey(e,e.limit,"L"):e}function Wd(n,e){return new gg(e.largestBatchId,Fy(n.ie,e.overlayMutation))}function xf(n,e){const t=e.path.lastSegment();return[n,wi(e.path.popLast()),t]}function _g(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Yu(i.readTime),documentKey:wi(i.documentKey.path),largestBatchId:i.largestBatchId}}class OE{getBundleMetadata(e,t){return vg(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:pl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return vg(e).put({bundleId:(i=t).id,createTime:Yu(nr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Ig(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:By(a.bundledQuery),readTime:pl(a.readTime)};var a})}saveNamedQuery(e,t){return Ig(e).put({name:(i=t).name,readTime:Yu(nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function vg(n){return xr(n,"bundles")}function Ig(n){return xr(n,"namedQueries")}class Mf{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Mf(e,t.uid||"")}getOverlay(e,t){return qd(e).get(xf(this.userId,t)).next(i=>i?Wd(this.yt,i):null)}getOverlays(e,t){const i=Uo();return J.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((c,p)=>{const y=new gg(t,p);a.push(this.oe(e,y))}),J.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(p=>a.add(wi(p.getCollectionPath())));const c=[];return a.forEach(p=>{const y=IDBKeyRange.bound([this.userId,p,i],[this.userId,p,i+1],!1,!0);c.push(qd(e).Y("collectionPathOverlayIndex",y))}),J.waitFor(c)}getOverlaysForCollection(e,t,i){const a=Uo(),c=wi(t),p=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,Number.POSITIVE_INFINITY],!0);return qd(e).W("collectionPathOverlayIndex",p).next(y=>{for(const D of y){const C=Wd(this.yt,D);a.set(C.getKey(),C)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const c=Uo();let p;const y=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qd(e).Z({index:"collectionGroupOverlayIndex",range:y},(D,C,x)=>{const k=Wd(this.yt,C);c.size()<a||k.largestBatchId===p?(c.set(k.getKey(),k),p=k.largestBatchId):x.done()}).next(()=>c)}oe(e,t){return qd(e).put(function(i,a,c){const[p,y,D]=xf(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:D,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Oa(i.ie,c.mutation)}}(this.yt,this.userId,t))}}function qd(n){return xr(n,"documentOverlays")}class La{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(tr(e.integerValue));else if("doubleValue"in e){const i=tr(e.doubleValue);isNaN(i)?this.he(t,13):(this.he(t,15),Ad(i)?t.le(0):t.le(i))}else if("timestampValue"in e){const i=e.timestampValue;this.he(t,20),"string"==typeof i?t.fe(i):(t.fe(`${i.seconds||""}`),t.le(i.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(ju(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?py(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ot()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const i=e.fields||{};this.he(t,55);for(const a of Object.keys(i))this.de(a,t),this.ce(i[a],t)}ye(e,t){const i=e.values||[];this.he(t,50);for(const a of i)this.ce(a,t)}me(e,t){this.he(t,37),Ue.fromName(e).path.forEach(i=>{this.he(t,60),this.pe(i,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Z0(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Y0(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const c=Z0(255&t[a]);if(i+=c,8!==c)break}return i}(n);return Math.ceil(e/8)}La.Ie=new La;class Uy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ee(i.value),i=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.be(i.value),i=t.next();this.Pe()}ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const a=t.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}this.Ae()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const a=t.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}this.Pe()}Se(e){const t=this.De(e),i=Y0(t);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}xe(e){const t=this.De(e),i=Y0(t);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class Q0{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class FE{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class zd{constructor(){this.$e=new Uy,this.Be=new Q0(this.$e),this.Le=new FE(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Ju{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Ju(this.indexId,this.documentKey,this.arrayValue,i)}}function Va(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=jy(n.arrayValue,e.arrayValue),0!==t?t:(t=jy(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function jy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class LE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const i=t;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(e){dt(e.collectionGroup===this.collectionId);const t=uy(e);if(void 0!==t&&!this.We(t))return!1;const i=Jc(e);let a=0,c=0;for(;a<i.length&&this.We(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.Qe){const p=i[a];if(!this.ze(this.Qe,p)||!this.He(this.Ke[c++],p))return!1;++a}for(;a<i.length;++a){const p=i[a];if(c>=this.Ke.length||!this.He(this.Ke[c++],p))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function J0(n){var e,t;if(dt(n instanceof zt||n instanceof fn),n instanceof zt){if(n instanceof h0){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>zt.create(n.field,"==",c)))||[];return fn.create(a,"or")}return n}const i=n.filters.map(a=>J0(a));return fn.create(i,n.op)}function VE(n){if(0===n.getFilters().length)return[];const e=Eg(J0(n));return dt($y(e)),wg(e)||Nf(e)?[e]:e.getFilters()}function wg(n){return n instanceof zt}function Nf(n){return n instanceof fn&&mf(n)}function $y(n){return wg(n)||Nf(n)||function(e){if(e instanceof fn&&qp(e)){for(const t of e.getFilters())if(!wg(t)&&!Nf(t))return!1;return!0}return!1}(n)}function Eg(n){if(dt(n instanceof zt||n instanceof fn),n instanceof zt)return n;if(1===n.filters.length)return Eg(n.filters[0]);const e=n.filters.map(i=>Eg(i));let t=fn.create(e,n.op);return t=Rf(t),$y(t)?t:(dt(t instanceof fn),dt(nl(t)),dt(t.filters.length>1),t.filters.reduce((i,a)=>Dg(i,a)))}function Dg(n,e){let t;return dt(n instanceof zt||n instanceof fn),dt(e instanceof zt||e instanceof fn),t=n instanceof zt?e instanceof zt?fn.create([n,e],"and"):Hy(n,e):e instanceof zt?Hy(e,n):function(i,a){if(dt(i.filters.length>0&&a.filters.length>0),nl(i)&&nl(a))return yE(i,a.getFilters());const c=qp(i)?i:a,p=qp(i)?a:i,y=c.filters.map(D=>Dg(D,p));return fn.create(y,"or")}(n,e),Rf(t)}function Hy(n,e){if(nl(e))return yE(e,n.getFilters());{const t=e.filters.map(i=>Dg(n,i));return fn.create(t,"or")}}function Rf(n){if(dt(n instanceof zt||n instanceof fn),n instanceof zt)return n;const e=n.getFilters();if(1===e.length)return Rf(e[0]);if(mE(n))return n;const t=e.map(a=>Rf(a)),i=[];return t.forEach(a=>{a instanceof zt?i.push(a):a instanceof fn&&(a.op===n.op?i.push(...a.filters):i.push(a))}),1===i.length?i[0]:fn.create(i,n.op)}class X0{constructor(){this.Je=new bg}addToCollectionParentIndex(e,t){return this.Je.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Ji.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class bg{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new yn(Zt.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new yn(Zt.comparator)).toArray()}}const kf=new Uint8Array(0);class bb{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new bg,this.Xe=new qu(i=>il(i),(i,a)=>vf(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const c={collectionId:i,parent:wi(a)};return eI(e).put(c)}return J.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Kv(t),""],!1,!0);return eI(e).W(a).next(c=>{for(const p of c){if(p.collectionId!==t)break;i.push(ai(p.parent))}return i})}addFieldIndex(e,t){const i=Of(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var p;delete a.indexId;const c=i.add(a);if(t.indexState){const p=Ff(e);return c.next(y=>{p.put(_g(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const i=Of(e),a=Ff(e),c=Pf(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Pf(e);let a=!0;const c=new Map;return J.forEach(this.Ze(t),p=>this.tn(e,p).next(y=>{a&&(a=!!y),c.set(p,y)})).next(()=>{if(a){let p=St();const y=[];return J.forEach(c,(D,C)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=D,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Ut=>`${Ut.fieldPath}:${Ut.kind}`).join(",")}`} to execute ${il(t)}`);const k=function(Ut,Bt){const Ft=uy(Bt);if(void 0===Ft)return null;for(const Gt of vy(Ut,Ft.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(C,D),q=function(Ut,Bt){const Ft=new Map;for(const Gt of Jc(Bt))for(const Jr of vy(Ut,Gt.fieldPath))switch(Jr.op){case"==":case"in":Ft.set(Gt.fieldPath.canonicalString(),Jr.value);break;case"not-in":case"!=":return Ft.set(Gt.fieldPath.canonicalString(),Jr.value),Array.from(Ft.values())}return null}(C,D),te=function(Ut,Bt){const Ft=[];let Gt=!0;for(const Jr of Jc(Bt)){const Pv=0===Jr.kind?p0(Ut,Jr.fieldPath,Ut.startAt):IE(Ut,Jr.fieldPath,Ut.startAt);Ft.push(Pv.value),Gt&&(Gt=Pv.inclusive)}return new $u(Ft,Gt)}(C,D),me=function(Ut,Bt){const Ft=[];let Gt=!0;for(const Jr of Jc(Bt)){const Pv=0===Jr.kind?IE(Ut,Jr.fieldPath,Ut.endAt):p0(Ut,Jr.fieldPath,Ut.endAt);Ft.push(Pv.value),Gt&&(Gt=Pv.inclusive)}return new $u(Ft,Gt)}(C,D),Ve=this.en(D,C,te),Ze=this.en(D,C,me),Ht=this.nn(D,C,q),Jt=this.sn(D.indexId,k,Ve,te.inclusive,Ze,me.inclusive,Ht);return J.forEach(Jt,Ut=>i.J(Ut,t.limit).next(Bt=>{Bt.forEach(Ft=>{const Gt=Ue.fromSegments(Ft.documentKey);p.has(Gt)||(p=p.add(Gt),y.push(Gt))})}))}).next(()=>y)}return J.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:VE(fn.create(e.filters,"and")).map(i=>_y(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,i,a,c,p,y){const D=(null!=t?t.length:1)*Math.max(i.length,c.length),C=D/(null!=t?t.length:1),x=[];for(let k=0;k<D;++k){const q=t?this.rn(t[k/C]):kf,te=this.on(e,q,i[k%C],a),me=this.un(e,q,c[k%C],p),Ve=y.map(Ze=>this.on(e,q,Ze,!0));x.push(...this.createRange(te,me,Ve))}return x}on(e,t,i,a){const c=new Ju(e,Ue.empty(),t,i);return a?c:c.Ue()}un(e,t,i,a){const c=new Ju(e,Ue.empty(),t,i);return a?c.Ue():c}tn(e,t){const i=new LE(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let p=null;for(const y of c)i.je(y)&&(!p||y.fields.length>p.fields.length)&&(p=y);return p})}getIndexType(e,t){let i=2;const a=this.Ze(t);return J.forEach(a,c=>this.tn(e,c).next(p=>{p?0!==i&&p.fields.length<function(y){let D=new yn(Pn.comparator),C=!1;for(const x of y.filters)for(const k of x.getFlattenedFilters())k.field.isKeyField()||("array-contains"===k.op||"array-contains-any"===k.op?C=!0:D=D.add(k.field));for(const x of y.orderBy)x.field.isKeyField()||(D=D.add(x.field));return D.size+(C?1:0)}(c)&&(i=1):i=0})).next(()=>null!==t.limit&&a.length>1&&2===i?1:i)}cn(e,t){const i=new zd;for(const a of Jc(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const p=i.qe(a.kind);La.Ie.ue(c,p)}return i.Fe()}rn(e){const t=new zd;return La.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const i=new zd;return La.Ie.ue(xd(this.databaseId,t),i.qe(function(a){const c=Jc(a);return 0===c.length?0:c[c.length-1].kind}(e))),i.Fe()}nn(e,t,i){if(null===i)return[];let a=[];a.push(new zd);let c=0;for(const p of Jc(e)){const y=i[c++];for(const D of a)if(this.hn(t,p.fieldPath)&&Md(y))a=this.ln(a,p,y);else{const C=D.qe(p.kind);La.Ie.ue(y,C)}}return this.fn(a)}en(e,t,i){return this.nn(e,t,i.position)}fn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Fe();return t}ln(e,t,i){const a=[...e],c=[];for(const p of i.arrayValue.values||[])for(const y of a){const D=new zd;D.seed(y.Fe()),La.Ie.ue(p,D.qe(t.kind)),c.push(D)}return c}hn(e,t){return!!e.filters.find(i=>i instanceof zt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Of(e),a=Ff(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(c=>{const p=[];return J.forEach(c,y=>a.get([y.indexId,this.uid]).next(D=>{p.push(function(C,x){const k=x?new hf(x.sequenceNumber,new Ji(pl(x.readTime),new Ue(ai(x.documentKey)),x.largestBatchId)):hf.empty(),q=C.fields.map(([te,me])=>new $p(Pn.fromServerFormat(te),me));return new jp(C.indexId,C.collectionGroup,q,k)}(y,D))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const c=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Ot(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=Of(e),c=Ff(e);return this.dn(e).next(p=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>J.forEach(y,D=>c.put(_g(D.indexId,this.user,p,i)))))}updateIndexEntries(e,t){const i=new Map;return J.forEach(t,(a,c)=>{const p=i.get(a.collectionGroup);return(p?J.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(i.set(a.collectionGroup,y),J.forEach(y,D=>this._n(e,a,D).next(C=>{const x=this.wn(c,D);return C.isEqual(x)?J.resolve():this.mn(e,c,D,C,x)}))))})}gn(e,t,i,a){return Pf(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.an(i,t.key),documentKey:t.key.path.toArray()})}yn(e,t,i,a){return Pf(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.an(i,t.key),t.key.path.toArray()])}_n(e,t,i){const a=Pf(e);let c=new yn(Va);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,t)])},(p,y)=>{c=c.add(new Ju(i.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}wn(e,t){let i=new yn(Va);const a=this.cn(t,e);if(null==a)return i;const c=uy(t);if(null!=c){const p=e.data.field(c.fieldPath);if(Md(p))for(const y of p.arrayValue.values||[])i=i.add(new Ju(t.indexId,e.key,this.rn(y),a))}else i=i.add(new Ju(t.indexId,e.key,kf,a));return i}mn(e,t,i,a,c){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(y,D,C,x,k){const q=y.getIterator(),te=D.getIterator();let me=Ra(q),Ve=Ra(te);for(;me||Ve;){let Ze=!1,Ht=!1;if(me&&Ve){const Jt=C(me,Ve);Jt<0?Ht=!0:Jt>0&&(Ze=!0)}else null!=me?Ht=!0:Ze=!0;Ze?(x(Ve),Ve=Ra(te)):Ht?(k(me),me=Ra(q)):(me=Ra(q),Ve=Ra(te))}}(a,c,Va,y=>{p.push(this.gn(e,t,i,y))},y=>{p.push(this.yn(e,t,i,y))}),J.waitFor(p)}dn(e){let t=1;return Ff(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((p,y)=>Va(p,y)).filter((p,y,D)=>!y||0!==Va(p,D[y-1]));const a=[];a.push(e);for(const p of i){const y=Va(p,e),D=Va(p,t);if(0===y)a[0]=e.Ue();else if(y>0&&D<0)a.push(p),a.push(p.Ue());else if(D>0)break}a.push(t);const c=[];for(let p=0;p<a.length;p+=2){if(this.pn(a[p],a[p+1]))return[];c.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,kf,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,kf,[]]))}return c}pn(e,t){return Va(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wr)}getMinOffset(e,t){return J.mapArray(this.Ze(t),i=>this.tn(e,i).next(a=>a||ot())).next(wr)}}function eI(n){return xr(n,"collectionParents")}function Pf(n){return xr(n,"indexEntries")}function Of(n){return xr(n,"indexConfiguration")}function Ff(n){return xr(n,"indexState")}function wr(n){dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;cy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ji(e.readTime,e.documentKey,t)}const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ki{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tI(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),c=[],p=IDBKeyRange.only(t.batchId);let y=0;const D=i.Z({range:p},(x,k,q)=>(y++,q.delete()));c.push(D.next(()=>{dt(1===y)}));const C=[];for(const x of t.mutations){const k=G0(e,x.key.path,t.batchId);c.push(a.delete(k)),C.push(x.key)}return J.waitFor(c).next(()=>C)}function Lf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(41943040,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class Tg{constructor(e,t,i,a){this.userId=e,this.yt=t,this.indexManager=i,this.referenceDelegate=a,this.In={}}static re(e,t,i,a){dt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Tg(c,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ba(e).Z({index:"userMutationsIndex",range:i},(a,c,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const c=Xs(e),p=Ba(e);return p.add({}).next(y=>{dt("number"==typeof y);const D=new fg(y,t,i,a),C=function(q,te,me){const Ve=me.baseMutations.map(Ht=>Oa(q.ie,Ht)),Ze=me.mutations.map(Ht=>Oa(q.ie,Ht));return{userId:te,batchId:me.batchId,localWriteTimeMs:me.localWriteTime.toMillis(),baseMutations:Ve,mutations:Ze}}(this.yt,this.userId,D),x=[];let k=new yn((q,te)=>Ot(q.canonicalString(),te.canonicalString()));for(const q of a){const te=G0(this.userId,q.key.path,y);k=k.add(q.key.path.popLast()),x.push(p.put(C)),x.push(c.put(te,kE))}return k.forEach(q=>{x.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.In[y]=D.keys()}),J.waitFor(x).next(()=>D)})}lookupMutationBatch(e,t){return Ba(e).get(t).next(i=>i?(dt(i.userId===this.userId),Qu(this.yt,i)):null)}Tn(e,t){return this.In[t]?J.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let c=null;return Ba(e).Z({index:"userMutationsIndex",range:a},(p,y,D)=>{y.userId===this.userId&&(dt(y.batchId>=i),c=Qu(this.yt,y)),D.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ba(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,p)=>{i=c.batchId,p.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ba(e).W("userMutationsIndex",t).next(i=>i.map(a=>Qu(this.yt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Zu(this.userId,t.path),a=IDBKeyRange.lowerBound(i),c=[];return Xs(e).Z({range:a},(p,y,D)=>{const[C,x,k]=p,q=ai(x);if(C===this.userId&&t.path.isEqual(q))return Ba(e).get(k).next(te=>{if(!te)throw ot();dt(te.userId===this.userId),c.push(Qu(this.yt,te))});D.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new yn(Ot);const a=[];return t.forEach(c=>{const p=Zu(this.userId,c.path),y=IDBKeyRange.lowerBound(p),D=Xs(e).Z({range:y},(C,x,k)=>{const[q,te,me]=C,Ve=ai(te);q===this.userId&&c.path.isEqual(Ve)?i=i.add(me):k.done()});a.push(D)}),J.waitFor(a).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,c=Zu(this.userId,i),p=IDBKeyRange.lowerBound(c);let y=new yn(Ot);return Xs(e).Z({range:p},(D,C,x)=>{const[k,q,te]=D,me=ai(q);k===this.userId&&i.isPrefixOf(me)?me.length===a&&(y=y.add(te)):x.done()}).next(()=>this.En(e,y))}En(e,t){const i=[],a=[];return t.forEach(c=>{a.push(Ba(e).get(c).next(p=>{if(null===p)throw ot();dt(p.userId===this.userId),i.push(Qu(this.yt,p))}))}),J.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return tI(e.se,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),J.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return Xs(e).Z({range:i},(c,p,y)=>{if(c[0]===this.userId){const D=ai(c[1]);a.push(D)}else y.done()}).next(()=>{dt(0===a.length)})})}containsKey(e,t){return Wy(e,this.userId,t)}Rn(e){return nI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Wy(n,e,t){const i=Zu(e,t.path),a=i[1],c=IDBKeyRange.lowerBound(i);let p=!1;return Xs(n).Z({range:c,X:!0},(y,D,C)=>{const[x,k,q]=y;x===e&&k===a&&(p=!0),C.done()}).next(()=>p)}function Ba(n){return xr(n,"mutations")}function Xs(n){return xr(n,"documentMutations")}function nI(n){return xr(n,"mutationQueues")}class ml{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ml(0)}static vn(){return new ml(-1)}}class rI{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new ml(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mt.fromTimestamp(new Sn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kd(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(dt(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let a=0;const c=[];return Kd(e).Z((p,y)=>{const D=gl(y);D.sequenceNumber<=t&&null===i.get(D.targetId)&&(a++,c.push(this.removeTargetData(e,D)))}).next(()=>J.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Kd(e).Z((i,a)=>{const c=gl(a);t(c)})}Vn(e){return qy(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}Sn(e,t){return qy(e).put("targetGlobalKey",t)}Dn(e,t){return Kd(e).put(yg(this.yt,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=il(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let c=null;return Kd(e).Z({range:a,index:"queryTargetsIndex"},(p,y,D)=>{const C=gl(y);vf(t,C.target)&&(c=C,D.done())}).next(()=>c)}addMatchingKeys(e,t,i){const a=[],c=yl(e);return t.forEach(p=>{const y=wi(p.path);a.push(c.put({targetId:i,path:y})),a.push(this.referenceDelegate.addReference(e,i,p))}),J.waitFor(a)}removeMatchingKeys(e,t,i){const a=yl(e);return J.forEach(t,c=>{const p=wi(c.path);return J.waitFor([a.delete([i,p]),this.referenceDelegate.removeReference(e,i,c)])})}removeMatchingKeysForTargetId(e,t){const i=yl(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=yl(e);let c=St();return a.Z({range:i,X:!0},(p,y,D)=>{const C=ai(p[1]),x=new Ue(C);c=c.add(x)}).next(()=>c)}containsKey(e,t){const i=wi(t.path),a=IDBKeyRange.bound([i],[Kv(i)],!1,!0);let c=0;return yl(e).Z({index:"documentTargetsIndex",X:!0,range:a},([p,y],D,C)=>{0!==p&&(c++,C.done())}).next(()=>c>0)}ne(e,t){return Kd(e).get(t).next(i=>i?gl(i):null)}}function Kd(n){return xr(n,"targets")}function qy(n){return xr(n,"targetGlobal")}function yl(n){return xr(n,"targetDocuments")}function zy([n,e],[t,i]){const a=Ot(n,t);return 0===a?Ot(e,i):a}class iI{constructor(e){this.xn=e,this.buffer=new yn(zy),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();zy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $o{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,de.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Uu(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ca(i)}yield t.Fn(3e5)}))}}class BE{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return J.resolve(Xi.at);const i=new iI(t);return this.$n.forEachTarget(e,a=>i.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>i.On(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Gy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let i,a,c,p,y,D,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,p=Date.now(),this.nthSequenceNumber(e,a))).next(k=>(i=k,y=Date.now(),this.removeTargets(e,i,t))).next(k=>(c=k,D=Date.now(),this.removeOrphanedDocuments(e,i))).next(k=>(C=Date.now(),Bp()<=kr.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-x}ms\n\tDetermined least recently used ${a} in `+(y-p)+`ms\n\tRemoved ${c} targets in `+(D-y)+`ms\n\tRemoved ${k} documents in `+(C-D)+`ms\nTotal Duration: ${C-x}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k})))}}class UE{constructor(e,t){this.db=e,this.garbageCollector=new BE(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Un(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,a)=>t(a))}addReference(e,t,i){return ts(e,i)}removeReference(e,t,i){return ts(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return ts(e,t)}Gn(e,t){return function(i,a){let c=!1;return nI(i).tt(p=>Wy(i,p,a).next(y=>(y&&(c=!0),J.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(p,y)=>{if(y<=t){const D=this.Gn(e,p).next(C=>{if(!C)return c++,i.getEntry(e,p).next(()=>(i.removeEntry(p,mt.min()),yl(e).delete([0,wi(p.path)])))});a.push(D)}}).next(()=>J.waitFor(a)).next(()=>i.apply(e)).next(()=>c)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return ts(e,t)}Kn(e,t){const i=yl(e);let a,c=Xi.at;return i.Z({index:"documentTargetsIndex"},([p,y],{path:D,sequenceNumber:C})=>{0===p?(c!==Xi.at&&t(new Ue(ai(a)),c),c=C,a=D):c=Xi.at}).next(()=>{c!==Xi.at&&t(new Ue(ai(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ts(n,e){return yl(n).put((i=n.currentSequenceNumber,{targetId:0,path:wi(e.path),sequenceNumber:i}));var i}class xs{constructor(){this.changes=new qu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eo{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return _l(e).put(i)}removeEntry(e,t,i){return _l(e).delete(function(a,c){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],mg(c),p[p.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=Fn.newInvalidDocument(t);return _l(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vf(t))},(a,c)=>{i=this.jn(t,c)}).next(()=>i)}Wn(e,t){let i={size:0,document:Fn.newInvalidDocument(t)};return _l(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vf(t))},(a,c)=>{i={document:this.jn(t,c),size:Lf(c)}}).next(()=>i)}getEntries(e,t){let i=Ri();return this.zn(e,t,(a,c)=>{const p=this.jn(a,c);i=i.insert(a,p)}).next(()=>i)}Hn(e,t){let i=Ri(),a=new On(Ue.comparator);return this.zn(e,t,(c,p)=>{const y=this.jn(c,p);i=i.insert(c,y),a=a.insert(c,Lf(p))}).next(()=>({documents:i,Jn:a}))}zn(e,t,i){if(t.isEmpty())return J.resolve();let a=new yn(Cg);t.forEach(D=>a=a.add(D));const c=IDBKeyRange.bound(Vf(a.first()),Vf(a.last())),p=a.getIterator();let y=p.getNext();return _l(e).Z({index:"documentKeyIndex",range:c},(D,C,x)=>{const k=Ue.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;y&&Cg(y,k)<0;)i(y,null),y=p.getNext();y&&y.isEqual(k)&&(i(y,C),y=p.hasNext()?p.getNext():null),y?x.j(Vf(y)):x.done()}).next(()=>{for(;y;)i(y,null),y=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,i,a){const c=t.path,p=[c.popLast().toArray(),c.lastSegment(),mg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],y=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _l(e).W(IDBKeyRange.bound(p,y,!0)).next(D=>{let C=Ri();for(const x of D){const k=this.jn(Ue.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);k.isFoundDocument()&&(Ss(t,k)||a.has(k.key))&&(C=C.insert(k.key,k))}return C})}getAllFromCollectionGroup(e,t,i,a){let c=Ri();const p=aI(t,i),y=aI(t,Ji.max());return _l(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,y,!0)},(D,C,x)=>{const k=this.jn(Ue.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);c=c.insert(k.key,k),c.size===a&&x.done()}).next(()=>c)}newChangeBuffer(e){return new sI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oI(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}Qn(e,t){return oI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function z0(n,e){let t;if(e.document)t=Oy(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ue.fromSegments(e.noDocument.path),a=pl(e.noDocument.readTime);t=Fn.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const i=Ue.fromSegments(e.unknownDocument.path),a=pl(e.unknownDocument.version);t=Fn.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new Sn(i[0],i[1]);return mt.fromTimestamp(a)}(e.readTime)),t}(this.yt,t);if(!i.isNoDocument()||!i.version.isEqual(mt.min()))return i}return Fn.newInvalidDocument(e)}}function Ky(n){return new eo(n)}class sI extends xs{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new qu(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new yn((c,p)=>Ot(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const y=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,y.readTime)),p.isValidDocument()){const D=K0(this.Yn.yt,p);a=a.add(c.path.popLast()),i+=Lf(D)-y.size,t.push(this.Yn.addEntry(e,c,D))}else if(i-=y.size,this.trackRemovals){const D=K0(this.Yn.yt,p.convertToNoDocument(mt.min()));t.push(this.Yn.addEntry(e,c,D))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,i)),J.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:a})=>(a.forEach((c,p)=>{this.Xn.set(c,{size:p,readTime:i.get(c).readTime})}),i))}}function oI(n){return xr(n,"remoteDocumentGlobal")}function _l(n){return xr(n,"remoteDocumentsV14")}function Vf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aI(n,e){const t=e.documentKey.path.toArray();return[n,mg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cg(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<i.length-2;++c)if(a=Ot(t[c],i[c]),a)return a;return a=Ot(t.length,i.length),a||(a=Ot(t[t.length-2],i[i.length-2]),a||Ot(t[t.length-1],i[i.length-1]))}class Bf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uI{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==i&&Ef(i.mutation,a,oi.empty(),Sn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,St()).next(()=>i))}getLocalViewOfDocuments(e,t,i=St()){const a=Uo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(c=>{let p=Df();return c.forEach((y,D)=>{p=p.insert(y,D.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const i=Uo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,St()))}populateOverlays(e,t,i){const a=[];return i.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,y)=>{t.set(p,y)})})}computeViews(e,t,i,a){let c=Ri();const p=Fd(),y=Fd();return t.forEach((D,C)=>{const x=i.get(C.key);a.has(C.key)&&(void 0===x||x.mutation instanceof ka)?c=c.insert(C.key,C):void 0!==x?(p.set(C.key,x.mutation.getFieldMask()),Ef(x.mutation,C,x.mutation.getFieldMask(),Sn.now())):p.set(C.key,oi.empty())}),this.recalculateAndSaveOverlays(e,c).next(D=>(D.forEach((C,x)=>p.set(C,x)),t.forEach((C,x)=>{var k;return y.set(C,new Bf(x,null!==(k=p.get(C))&&void 0!==k?k:null))}),y))}recalculateAndSaveOverlays(e,t){const i=Fd();let a=new On((p,y)=>p-y),c=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const y of p)y.keys().forEach(D=>{const C=t.get(D);if(null===C)return;let x=i.get(D)||oi.empty();x=y.applyToLocalView(C,x),i.set(D,x);const k=(a.get(y.batchId)||St()).add(D);a=a.insert(y.batchId,k)})}).next(()=>{const p=[],y=a.getReverseIterator();for(;y.hasNext();){const D=y.getNext(),C=D.key,x=D.value,k=S0();x.forEach(q=>{if(!c.has(q)){const te=by(t.get(q),i.get(q));null!==te&&k.set(q,te),c=c.add(q)}}),p.push(this.documentOverlayCache.saveOverlays(e,C,k))}return J.waitFor(p)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Ue.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):m0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):J.resolve(Uo());let y=-1,D=c;return p.next(C=>J.forEach(C,(x,k)=>(y<k.largestBatchId&&(y=k.largestBatchId),c.get(x)?J.resolve():this.remoteDocumentCache.getEntry(e,x).next(q=>{D=D.insert(x,q)}))).next(()=>this.populateOverlays(e,C,c)).next(()=>this.computeViews(e,D,C,St())).next(x=>({batchId:y,changes:My(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next(i=>{let a=Df();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let c=Df();return this.indexManager.getCollectionParents(e,a).next(p=>J.forEach(p,y=>{const D=(C=t,x=y.child(a),new Bo(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.getDocumentsMatchingCollectionQuery(e,D,i).next(C=>{C.forEach((x,k)=>{c=c.insert(x,k)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a))).next(c=>{a.forEach((y,D)=>{const C=D.getKey();null===c.get(C)&&(c=c.insert(C,Fn.newInvalidDocument(C)))});let p=Df();return c.forEach((y,D)=>{const C=a.get(y);void 0!==C&&Ef(C.mutation,D,oi.empty(),Sn.now()),Ss(t,D)&&(p=p.insert(y,D))}),p})}}class cI{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return J.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:nr(i.createTime)}),J.resolve()}getNamedQuery(e,t){return J.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:By(i.bundledQuery),readTime:nr(i.readTime)}),J.resolve();var i}}class jE{constructor(){this.overlays=new On(Ue.comparator),this.es=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Uo();return J.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,c)=>{this.oe(e,t,c)}),J.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.es.get(i);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const a=Uo(),c=t.length+1,p=new Ue(t.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const D=y.getNext().value,C=D.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===c&&D.largestBatchId>i&&a.set(D.getKey(),D)}return J.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new On((C,x)=>C-x);const p=this.overlays.getIterator();for(;p.hasNext();){const C=p.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>i){let x=c.get(C.largestBatchId);null===x&&(x=Uo(),c=c.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const y=Uo(),D=c.getIterator();for(;D.hasNext()&&(D.getNext().value.forEach((C,x)=>y.set(C,x)),!(y.size()>=a)););return J.resolve(y)}oe(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const p=this.es.get(a.largestBatchId).delete(i.key);this.es.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(i.key,new gg(t,i));let c=this.es.get(t);void 0===c&&(c=St(),this.es.set(t,c)),this.es.set(t,c.add(i.key))}}class Sg{constructor(){this.ns=new yn(Mr.ss),this.rs=new yn(Mr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Mr(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Mr(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Ue(new Zt([])),i=new Mr(t,e),a=new Mr(t,e+1),c=[];return this.rs.forEachInRange([i,a],p=>{this.cs(p),c.push(p.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ue(new Zt([])),i=new Mr(t,e),a=new Mr(t,e+1);let c=St();return this.rs.forEachInRange([i,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new Mr(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Mr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ue.comparator(e.key,t.key)||Ot(e._s,t._s)}static os(e,t){return Ot(e._s,t._s)||Ue.comparator(e.key,t.key)}}class Ag{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new yn(Mr.ss)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const c=this.ws;this.ws++;const p=new fg(c,t,i,a);this.mutationQueue.push(p);for(const y of a)this.gs=this.gs.add(new Mr(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return J.resolve(p)}lookupMutationBatch(e,t){return J.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Mr(t,0),a=new Mr(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([i,a],p=>{const y=this.ys(p._s);c.push(y)}),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new yn(Ot);return t.forEach(a=>{const c=new Mr(a,0),p=new Mr(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,p],y=>{i=i.add(y._s)})}),J.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;Ue.isDocumentKey(c)||(c=c.child(""));const p=new Mr(new Ue(c),0);let y=new yn(Ot);return this.gs.forEachWhile(D=>{const C=D.key.path;return!!i.isPrefixOf(C)&&(C.length===a&&(y=y.add(D._s)),!0)},p),J.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(i=>{const a=this.ys(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){dt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return J.forEach(t.mutations,a=>{const c=new Mr(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Mr(t,0),a=this.gs.firstAfterOrEqual(i);return J.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return J.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $E{constructor(e){this.Es=e,this.docs=new On(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,p=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let i=Ri();return t.forEach(a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():Fn.newInvalidDocument(a))}),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let c=Ri();const p=t.path,y=new Ue(p.child("")),D=this.docs.getIteratorFrom(y);for(;D.hasNext();){const{key:C,value:{document:x}}=D.getNext();if(!p.isPrefixOf(C.path))break;C.path.length>p.length+1||cy(Fo(x),i)<=0||(a.has(x.key)||Ss(t,x))&&(c=c.insert(x.key,x.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,t,i,a){ot()}As(e,t){return J.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new lI(this)}getSize(e){return J.resolve(this.size)}}class lI extends xs{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(i)}),J.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class dI{constructor(e){this.persistence=e,this.Rs=new qu(t=>il(t),vf),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Sg,this.targetCount=0,this.vs=ml.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,a)=>t(a)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),J.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ml(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Dn(t),J.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.Rs.forEach((p,y)=>{y.sequenceNumber<=t&&null===i.get(y.targetId)&&(this.Rs.delete(p),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),J.waitFor(c).next(()=>a)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),J.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.Ps.containsKey(t))}}class Zy{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Xi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new dI(this),this.indexManager=new X0,this.remoteDocumentCache=new $E(i=>this.referenceDelegate.xs(i)),this.yt=new Vy(t),this.Ns=new cI(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new Ag(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){ke("MemoryPersistence","Starting transaction:",e);const a=new xg(this.Ss.next());return this.referenceDelegate.ks(),i(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return J.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class xg extends aE{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Fs=new Sg,this.$s=null}static Bs(e){return new Uf(e)}get Ls(){if(this.$s)return this.$s;throw ot()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),J.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Ls,i=>{const a=Ue.fromPath(i);return this.qs(e,a).next(c=>{c||t.removeEntry(a,mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return J.or([()=>J.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class hI{constructor(e){this.yt=e}$(e,t,i,a){const c=new ly("createOrUpgrade",t);var y;i<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RE,{unique:!0}),y.createObjectStore("documentMutations"),Yy(e),function(y){y.createObjectStore("remoteDocuments")}(e));let p=J.resolve();return i<3&&a>=3&&(0!==i&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),Yy(e)),p=p.next(()=>function(y){const D=y.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return D.put("targetGlobalKey",C)}(c))),i<4&&a>=4&&(0!==i&&(p=p.next(()=>function(y,D){return D.store("mutations").W().next(C=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RE,{unique:!0});const x=D.store("mutations"),k=C.map(q=>x.put(q));return J.waitFor(k)})}(e,c))),p=p.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(p=p.next(()=>this.Us(c))),i<6&&a>=6&&(p=p.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),i<7&&a>=7&&(p=p.next(()=>this.Gs(c))),i<8&&a>=8&&(p=p.next(()=>this.Qs(e,c))),i<9&&a>=9&&(p=p.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(p=p.next(()=>this.js(c))),i<11&&a>=11&&(p=p.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(p=p.next(()=>{!function(y){const D=y.createObjectStore("documentOverlays",{keyPath:jd});D.createIndex("collectionPathOverlayIndex",$d,{unique:!1}),D.createIndex("collectionGroupOverlayIndex",Hd,{unique:!1})}(e)})),i<13&&a>=13&&(p=p.next(()=>function(y){const D=y.createObjectStore("remoteDocumentsV14",{keyPath:Ly});D.createIndex("documentKeyIndex",PE),D.createIndex("collectionGroupIndex",jo)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(p=p.next(()=>this.zs(e,c))),i<15&&a>=15&&(p=p.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:As}).createIndex("sequenceNumberIndex",W0,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:Bd}).createIndex("documentKeyIndex",Ud,{unique:!1})}(e))),p}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,a)=>{t+=Lf(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(a=>J.forEach(a,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",p).next(y=>J.forEach(y,D=>{dt(D.userId===c.userId);const C=Qu(this.yt,D);return tI(e,c.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return i.Z((p,y)=>{const D=new Zt(p),C=[0,wi(D)];c.push(t.get(C).next(x=>x?J.resolve():t.put({targetId:0,path:wi(D),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>J.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:dg});const i=t.store("collectionParents"),a=new bg,c=p=>{if(a.add(p)){const y=p.lastSegment(),D=p.popLast();return i.put({collectionId:y,parent:wi(D)})}};return t.store("remoteDocuments").Z({X:!0},(p,y)=>{const D=new Zt(p);return c(D.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([p,y,D],C)=>{const x=ai(y);return c(x.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,a)=>{const c=gl(a),p=yg(this.yt,c);return t.put(p)})}Ws(e,t){const i=t.store("remoteDocuments"),a=[];return i.Z((c,p)=>{const y=t.store("remoteDocumentsV14"),D=(C=p,C.document?new Ue(Zt.fromString(C.document.name).popFirst(5)):C.noDocument?Ue.fromSegments(C.noDocument.path):C.unknownDocument?Ue.fromSegments(C.unknownDocument.path):ot()).path.toArray();var C;const x={prefixPath:D.slice(0,D.length-2),collectionGroup:D[D.length-2],documentId:D[D.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(y.put(x))}).next(()=>J.waitFor(a))}zs(e,t){const i=t.store("mutations"),a=Ky(this.yt),c=new Zy(Uf.Bs,this.yt.ie);return i.W().next(p=>{const y=new Map;return p.forEach(D=>{var C;let x=null!==(C=y.get(D.userId))&&void 0!==C?C:St();Qu(this.yt,D).keys().forEach(k=>x=x.add(k)),y.set(D.userId,x)}),J.forEach(y,(D,C)=>{const x=new vr(C),k=Mf.re(this.yt,x),q=c.getIndexManager(x),te=Tg.re(x,this.yt,q,c.referenceDelegate);return new uI(a,te,k,q).recalculateAndSaveOverlaysForDocumentKeys(new hg(t,Xi.at),D).next()})})}}function Yy(n){n.createObjectStore("targetDocuments",{keyPath:ui}).createIndex("documentTargetsIndex",ll,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Af,{unique:!0}),n.createObjectStore("targetGlobal")}const Mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ng{constructor(e,t,i,a,c,p,y,D,C,x,k=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=c,this.window=p,this.document=y,this.Js=C,this.Ys=x,this.Xs=k,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=q=>Promise.resolve(),!Ng.C())throw new Se(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UE(this,a),this.ii=t+"main",this.yt=new Vy(D),this.ri=new Ts(this.ii,this.Xs,new hI(this.yt)),this.Cs=new rI(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ky(this.yt),this.Ns=new OE,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===x&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ne.FAILED_PRECONDITION,Mg);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Xi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,de.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,de.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,de.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Uu(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zd(e).get("owner").next(t=>J.resolve(this.mi(t)))}gi(e){return jf(e).delete(this.clientId)}yi(){var e=this;return(0,de.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=xr(i,"clientMetadata");return a.W().next(c=>{const p=e.Ii(c,18e5),y=c.filter(D=>-1===p.indexOf(D));return J.forEach(y,D=>a.delete(D.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?J.resolve(!0):Zd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Se(ne.FAILED_PRECONDITION,Mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||jf(e).W().next(i=>void 0===this.Ii(i,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,de.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new hg(t,Xi.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jf(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Tg.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bb(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Mf.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){ke("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(p=this.Xs)?q0:14===p?fl:13===p?hl:12===p?Gd:11===p?dl:void ot();var p;let y;return this.ri.runTransaction(e,a,c,D=>(y=new hg(D,this.Ss?this.Ss.next():Xi.at),"readwrite-primary"===t?this.fi(y).next(C=>!!C||this.di(y)).next(C=>{if(!C)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Se(ne.FAILED_PRECONDITION,oE);return i(y)}).next(C=>this.wi(y).next(()=>C)):this.Vi(y).next(()=>i(y)))).then(D=>(y.raiseOnCommittedEvent(),D))}Vi(e){return Zd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ne.FAILED_PRECONDITION,Mg)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zd(e).put("owner",t)}static C(){return Ts.C()}_i(e){const t=Zd(e);return t.get("owner").next(i=>this.mi(i)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(ur(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,$t.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ur("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zd(n){return xr(n,"owner")}function jf(n){return xr(n,"clientMetadata")}function Rg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Qy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=a}static Ci(e,t){let i=St(),a=St();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Qy(e,t.fromCache,i,a)}}class fI{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,i)).next(c=>c||this.Mi(e,t))}ki(e,t){if(Zp(t))return J.resolve(null);let i=Ni(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Ey(t,null,"F"),i=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const p=St(...c);return this.Ni.getDocuments(e,p).next(y=>this.indexManager.getMinOffset(e,i).next(D=>{const C=this.Fi(t,y);return this.$i(t,C,p,D.readTime)?this.ki(e,Ey(t,null,"F")):this.Bi(e,C,t,D)}))})))}Oi(e,t,i,a){return Zp(t)||a.isEqual(mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(c=>{const p=this.Fi(t,c);return this.$i(t,p,i,a)?this.Mi(e,t):(Bp()<=kr.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_0(t)),this.Bi(e,p,t,Xc(a,-1)))})}Fi(e,t){let i=new yn(v0(e));return t.forEach((a,c)=>{Ss(e,c)&&(i=i.add(c))}),i}$i(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return Bp()<=kr.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",_0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ji.min())}Bi(e,t,i,a){return this.Ni.getDocumentsMatchingQuery(e,i,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}class HE{constructor(e,t,i,a){this.persistence=e,this.Li=t,this.yt=a,this.qi=new On(Ot),this.Ui=new qu(c=>il(c),vf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uI(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function pI(n,e,t,i){return new HE(n,e,t,i)}function gI(n,e){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,de.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(c=>{const p=[],y=[];let D=St();for(const C of a){p.push(C.batchId);for(const x of C.mutations)D=D.add(x.key)}for(const C of c){y.push(C.batchId);for(const x of C.mutations)D=D.add(x.key)}return t.localDocuments.getDocuments(i,D).next(C=>({ji:C,removedBatchIds:p,addedBatchIds:y}))})})}),Jy.apply(this,arguments)}function GE(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(p,y,D,C){const x=D.batch,k=x.keys();let q=J.resolve();return k.forEach(te=>{q=q.next(()=>C.getEntry(y,te)).next(me=>{const Ve=D.docVersions.get(te);dt(null!==Ve),me.version.compareTo(Ve)<0&&(x.applyToRemoteDocument(me,D),me.isValidDocument()&&(me.setReadTime(D.commitVersion),C.addEntry(me)))})}),q.next(()=>p.mutationQueue.removeMutationBatch(y,x))}(t,i,e,c).next(()=>c.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(p){let y=St();for(let D=0;D<p.mutationResults.length;++D)p.mutationResults[D].transformResults.length>0&&(y=y.add(p.batch.mutations[D].key));return y}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function mI(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function WE(n,e){const t=ze(n),i=e.snapshotVersion;let a=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.qi;const y=[];e.targetChanges.forEach((x,k)=>{const q=a.get(k);if(!q)return;y.push(t.Cs.removeMatchingKeys(c,x.removedDocuments,k).next(()=>t.Cs.addMatchingKeys(c,x.addedDocuments,k)));let te=q.withSequenceNumber(c.currentSequenceNumber);var me,Ve,Ze;e.targetMismatches.has(k)?te=te.withResumeToken(Cr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):x.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(x.resumeToken,i)),a=a.insert(k,te),Ve=te,Ze=x,(0===(me=q).resumeToken.approximateByteSize()||Ve.snapshotVersion.toMicroseconds()-me.snapshotVersion.toMicroseconds()>=3e8||Ze.addedDocuments.size+Ze.modifiedDocuments.size+Ze.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(c,te))});let D=Ri(),C=St();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))}),y.push(yI(c,p,e.documentUpdates).next(x=>{D=x.Wi,C=x.zi})),!i.isEqual(mt.min())){const x=t.Cs.getLastRemoteSnapshotVersion(c).next(k=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,i));y.push(x)}return J.waitFor(y).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,D,C)).next(()=>D)}).then(c=>(t.qi=a,c))}function yI(n,e,t){let i=St(),a=St();return t.forEach(c=>i=i.add(c)),e.getEntries(n,i).next(c=>{let p=Ri();return t.forEach((y,D)=>{const C=c.get(y);D.isFoundDocument()!==C.isFoundDocument()&&(a=a.add(y)),D.isNoDocument()&&D.version.isEqual(mt.min())?(e.removeEntry(y,D.readTime),p=p.insert(y,D)):!C.isValidDocument()||D.version.compareTo(C.version)>0||0===D.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(D),p=p.insert(y,D)):ke("LocalStore","Ignoring outdated watch update for ",y,". Current version:",C.version," Watch version:",D.version)}),{Wi:p,zi:a}})}function qE(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Yd(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Cs.getTargetData(i,e).next(c=>c?(a=c,J.resolve(a)):t.Cs.allocateTargetId(i).next(p=>(a=new Fa(e,p,0,i.currentSequenceNumber),t.Cs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.qi.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}function Qd(n,e,t){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,de.Z)(function*(n,e,t){const i=ze(n),a=i.qi.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",c,p=>i.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Uu(p))throw p;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}i.qi=i.qi.remove(e),i.Ui.delete(a.target)}),Xy.apply(this,arguments)}function kg(n,e,t){const i=ze(n);let a=mt.min(),c=St();return i.persistence.runTransaction("Execute query","readonly",p=>function(y,D,C){const x=ze(y),k=x.Ui.get(C);return void 0!==k?J.resolve(x.qi.get(k)):x.Cs.getTargetData(D,C)}(i,p,Ni(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(p,y.targetId).next(D=>{c=D})}).next(()=>i.Li.getDocumentsMatchingQuery(p,e,t?a:mt.min(),t?c:St())).next(y=>(II(i,Qp(e),y),{documents:y,Hi:c})))}function _I(n,e){const t=ze(n),i=ze(t.Cs),a=t.qi.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>i.ne(c,e).next(p=>p?p.target:null))}function vI(n,e){const t=ze(n),i=t.Ki.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,Xc(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(II(t,e,a),a))}function II(n,e,t){let i=n.Ki.get(e)||mt.min();t.forEach((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),n.Ki.set(e,i)}function Pg(){return Pg=(0,de.Z)(function*(n,e,t,i){const a=ze(n);let c=St(),p=Ri();for(const C of t){const x=e.Ji(C.metadata.name);C.document&&(c=c.add(x));const k=e.Yi(C);k.setReadTime(e.Xi(C.metadata.readTime)),p=p.insert(x,k)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),D=yield Yd(a,(C=i,Ni(Nd(Zt.fromString(`__bundle__/docs/${C}`)))));var C;return a.persistence.runTransaction("Apply bundle documents","readwrite",C=>yI(C,y,p).next(x=>(y.apply(C),x)).next(x=>a.Cs.removeMatchingKeysForTargetId(C,D.targetId).next(()=>a.Cs.addMatchingKeys(C,c,D.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(C,x.Wi,x.zi)).next(()=>x.Wi)))}),Pg.apply(this,arguments)}function EI(n,e){return Og.apply(this,arguments)}function Og(){return Og=(0,de.Z)(function*(n,e,t=St()){const i=yield Yd(n,Ni(By(e.bundledQuery))),a=ze(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const p=nr(e.readTime);if(i.snapshotVersion.compareTo(p)>=0)return a.Ns.saveNamedQuery(c,e);const y=i.withResumeToken(Cr.EMPTY_BYTE_STRING,p);return a.qi=a.qi.insert(y.targetId,y),a.Cs.updateTargetData(c,y).next(()=>a.Cs.removeMatchingKeysForTargetId(c,i.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,i.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),Og.apply(this,arguments)}function e_(n,e){return`firestore_clients_${n}_${e}`}function t_(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Fg(n,e){return`firestore_targets_${n}_${e}`}class $f{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Zi(e,t,i){const a=JSON.parse(i);let c,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new Se(a.error.code,a.error.message))),p?new $f(e,t,a.state,c):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jd{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let a,c="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Se(i.error.code,i.error.message))),c?new Jd(e,i.state,a):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,c=sg();for(let p=0;a&&p<i.activeTargetIds.length;++p)a=dy(i.activeTargetIds[p]),c=c.add(i.activeTargetIds[p]);return a?new Hf(e,c):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lg{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lg(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ua{constructor(){this.activeTargetIds=sg()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n_{constructor(e,t,i,a,c){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new On(Ot),this.started=!1,this.cr=[];const p=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=e_(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Ua),this.lr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(e_(e.persistenceKey,a));if(c){const p=Hf.Zi(a,c);p&&(e.ur=e.ur.insert(p.clientId,p))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const a=e.yr(i);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Fg(this.persistenceKey,e));if(i){const a=Jd.Zi(e,i);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fg(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Er(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(ke("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,de.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const a=t.vr(i.key);return t.Vr(a,null)}{const a=t.Sr(i.key,i.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const a=t.Dr(i.key,i.newValue);if(a)return t.Cr(a)}}else if(t._r.test(i.key)){if(null!==i.newValue){const a=t.Nr(i.key,i.newValue);if(a)return t.kr(a)}}else if(i.key===t.wr){if(null!==i.newValue){const a=t.yr(i.newValue);if(a)return t.pr(a)}}else if(i.key===t.hr){const a=function(c){let p=Xi.at;if(null!=c)try{const y=JSON.parse(c);dt("number"==typeof y),p=y}catch(y){ur("SharedClientState","Failed to read sequence number from WebStorage",y)}return p}(i.newValue);a!==Xi.at&&t.sequenceNumberHandler(a)}else if(i.key===t.mr){const a=t.Or(i.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const a=new $f(this.currentUser,e,t,i),c=t_(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=t_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const a=Fg(this.persistenceKey,e),c=new Jd(e,t,i);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return Hf.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),a=Number(i[1]);return $f.Zi(new vr(void 0!==i[2]?i[2]:null),a,t)}Nr(e,t){const i=this._r.exec(e),a=Number(i[1]);return Jd.Zi(a,t)}yr(e){return Lg.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,de.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(i),p=[],y=[];return c.forEach(D=>{a.has(D)||p.push(D)}),a.forEach(D=>{c.has(D)||y.push(D)}),this.syncEngine.Br(p,y).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=sg();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class DI{constructor(){this.Lr=new Ua,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ua,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xd{Ur(e){}shutdown(){}}class zE{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const r_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tb{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class bI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,a,c){const p=this.ho(e,t);ke("RestConnection","Sending: ",p,i);const y={};return this.lo(y,a,c),this.fo(e,p,y,i).then(D=>(ke("RestConnection","Received: ",D),D),D=>{throw Vu("RestConnection",`${e} failed with error: `,D,"url: ",p,"request:",i),D})}_o(e,t,i,a,c,p){return this.ao(e,t,i,a,c)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ta,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),i&&i.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${r_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,a){return new Promise((c,p)=>{const y=new Vp;y.setWithCredentials(!0),y.listenOnce(Hv.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case lf.NO_ERROR:const C=y.getResponseJson();ke("Connection","XHR received:",JSON.stringify(C)),c(C);break;case lf.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),p(new Se(ne.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const x=y.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",y.getResponseText()),x>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const q=k?.error;if(q&&q.status&&q.message){const te=function(me){const Ve=me.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Ve)>=0?Ve:ne.UNKNOWN}(q.status);p(new Se(te,q.message))}else p(new Se(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new Se(ne.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const D=JSON.stringify(a);y.send(t,"POST",D,i,15)})}wo(e,t,i){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=yb(),p=Jw(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new Xw({})),this.lo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const D=a.join("");ke("Connection","Creating WebChannel: "+D,y);const C=c.createWebChannel(D,y);let x=!1,k=!1;const q=new Tb({Hr:me=>{k?ke("Connection","Not sending because WebChannel is closed:",me):(x||(ke("Connection","Opening WebChannel transport."),C.open(),x=!0),ke("Connection","WebChannel sending:",me),C.send(me))},Jr:()=>C.close()}),te=(me,Ve,Ze)=>{me.listen(Ve,Ht=>{try{Ze(Ht)}catch(Jt){setTimeout(()=>{throw Jt},0)}})};return te(C,Td.EventType.OPEN,()=>{k||ke("Connection","WebChannel transport opened.")}),te(C,Td.EventType.CLOSE,()=>{k||(k=!0,ke("Connection","WebChannel transport closed"),q.io())}),te(C,Td.EventType.ERROR,me=>{k||(k=!0,Vu("Connection","WebChannel transport errored:",me),q.io(new Se(ne.UNAVAILABLE,"The operation could not be completed")))}),te(C,Td.EventType.MESSAGE,me=>{var Ve;if(!k){const Ze=me.data[0];dt(!!Ze);const Ht=Ze,Jt=Ht.error||(null===(Ve=Ht[0])||void 0===Ve?void 0:Ve.error);if(Jt){ke("Connection","WebChannel received error:",Jt);const Ut=Jt.status;let Bt=function(Gt){const Jr=Ar[Gt];if(void 0!==Jr)return Ay(Jr)}(Ut),Ft=Jt.message;void 0===Bt&&(Bt=ne.INTERNAL,Ft="Unknown error status: "+Ut+" with message "+Jt.message),k=!0,q.io(new Se(Bt,Ft)),C.close()}else ke("Connection","WebChannel received:",Ze),q.ro(Ze)}}),te(p,Gv.STAT_EVENT,me=>{me.stat===Lu.PROXY?ke("Connection","Detected buffering proxy"):me.stat===Lu.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.so()},0),q}}function i_(){return typeof window<"u"?window:null}function s_(){return typeof document<"u"?document:null}function It(n){return new Eb(n,!0)}class o_{constructor(e,t,i=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-i);a>0&&ke("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class TI{constructor(e,t,i,a,c,p,y,D){this.Hs=e,this.vo=i,this.Vo=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=D,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new o_(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,de.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,de.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,de.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===ne.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.So===t&&this.Go(i,a)},i=>{e(()=>{const a=new Se(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(a)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{i(()=>this.Qo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,de.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KE extends TI{constructor(e,t,i,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,p),this.yt=c}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function SE(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:ot(),a=e.targetChange.targetIds||[],c=function(D,C){return D.wt?(dt(void 0===C||"string"==typeof C),Cr.fromBase64String(C||"")):(dt(void 0===C||C instanceof Uint8Array),Cr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,y=p&&function(D){const C=void 0===D.code?ne.UNKNOWN:Ay(D.code);return new Se(C,D.message||"")}(p);t=new M0(i,a,c,y||null)}else if("documentChange"in e){const i=e.documentChange,a=Br(n,i.document.name),c=nr(i.document.updateTime),p=i.document.createTime?nr(i.document.createTime):mt.min(),y=new Sr({mapValue:{fields:i.document.fields}}),D=Fn.newFoundDocument(a,c,p,y);t=new Tf(i.targetIds||[],i.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const i=e.documentDelete,a=Br(n,i.document),c=i.readTime?nr(i.readTime):mt.min(),p=Fn.newNoDocument(a,c);t=new Tf([],i.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const i=e.documentRemove,a=Br(n,i.document);t=new Tf([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return ot();{const i=e.filter,c=new EE(i.count||0);t=new x0(i.targetId,c)}}var D;return t}(this.yt,e),i=function(a){if(!("targetChange"in a))return mt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?mt.min():c.readTime?nr(c.readTime):mt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=Pa(this.yt),t.addTarget=function(a,c){let p;const y=c.target;return p=If(y)?{documents:F0(a,y)}:{query:L0(a,y)},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?p.resumeToken=TE(a,c.resumeToken):c.snapshotVersion.compareTo(mt.min())>0&&(p.readTime=zu(a,c.snapshotVersion.toTimestamp())),p}(this.yt,e);const i=function AE(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=Pa(this.yt),t.removeTarget=e,this.Bo(t)}}class eh extends TI{constructor(e,t,i,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,p),this.yt=c,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Db(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(i,a){let c=nr(i.updateTime?i.updateTime:a);return c.isEqual(mt.min())&&(c=nr(a)),new b0(c,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=nr(e.commitTime);return this.listener.Zo(i,t)}return dt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Pa(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Oa(this.yt,i))};this.Bo(t)}}class ZE extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=a,this.nu=!1}su(){if(this.nu)throw new Se(ne.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.ao(e,t,i,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(ne.UNKNOWN,a.toString())})}_o(e,t,i,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection._o(e,t,i,c,p,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ne.UNKNOWN,c.toString())})}terminate(){this.nu=!0}}class rr{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ur(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Cb{constructor(e,t,i,a,c){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=c,this.mu.Ur(y=>{i.enqueueAndForget((0,de.Z)(function*(){var D;ns(p)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,de.Z)(function*(C){const x=ze(C);x._u.add(4),yield rh(x),x.gu.set("Unknown"),x._u.delete(4),yield nh(x)}),function(C){return D.apply(this,arguments)})(p))}))}),this.gu=new rr(i,a)}}function nh(n){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,de.Z)(function*(n){if(ns(n))for(const e of n.wu)yield e(!0)}),Bg.apply(this,arguments)}function rh(n){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,de.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Ug.apply(this,arguments)}function Gf(n,e){const t=ze(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),u_(t)?a_(t):Il(t).ko()&&jg(t,e))}function ih(n,e){const t=ze(n),i=Il(t);t.du.delete(e),i.ko()&&CI(t,e),0===t.du.size&&(i.ko()?i.Fo():ns(t)&&t.gu.set("Unknown"))}function jg(n,e){n.yu.Ot(e.targetId),Il(n).zo(e)}function CI(n,e){n.yu.Ot(e),Il(n).Ho(e)}function a_(n){n.yu=new Ry({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Il(n).start(),n.gu.uu()}function u_(n){return ns(n)&&!Il(n).No()&&n.du.size>0}function ns(n){return 0===ze(n)._u.size}function SI(n){n.yu=void 0}function YE(n){return c_.apply(this,arguments)}function c_(){return c_=(0,de.Z)(function*(n){n.du.forEach((e,t)=>{jg(n,e)})}),c_.apply(this,arguments)}function $g(n,e){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,de.Z)(function*(n,e){SI(n),u_(n)?(n.gu.hu(e),a_(n)):n.gu.set("Unknown")}),Hg.apply(this,arguments)}function AI(n,e,t){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,de.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof M0&&2===e.state&&e.cause)try{yield(i=(0,de.Z)(function*(a,c){const p=c.cause;for(const y of c.targetIds)a.du.has(y)&&(yield a.remoteSyncer.rejectListen(y,p),a.du.delete(y),a.yu.removeTarget(y))}),function(a,c){return i.apply(this,arguments)})(n,e)}catch(i){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Wg(n,i)}else if(e instanceof Tf?n.yu.Kt(e):e instanceof x0?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(mt.min()))try{const i=yield mI(n.localStore);t.compareTo(i)>=0&&(yield function(a,c){const p=a.yu.Zt(c);return p.targetChanges.forEach((y,D)=>{if(y.resumeToken.approximateByteSize()>0){const C=a.du.get(D);C&&a.du.set(D,C.withResumeToken(y.resumeToken,c))}}),p.targetMismatches.forEach(y=>{const D=a.du.get(y);if(!D)return;a.du.set(y,D.withResumeToken(Cr.EMPTY_BYTE_STRING,D.snapshotVersion)),CI(a,y);const C=new Fa(D.target,y,1,D.sequenceNumber);jg(a,C)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(i){ke("RemoteStore","Failed to raise snapshot:",i),yield Wg(n,i)}var i}),Gg.apply(this,arguments)}function Wg(n,e,t){return vl.apply(this,arguments)}function vl(){return vl=(0,de.Z)(function*(n,e,t){if(!Uu(e))throw e;n._u.add(1),yield rh(n),n.gu.set("Offline"),t||(t=()=>mI(n.localStore)),n.asyncQueue.enqueueRetryable((0,de.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield nh(n)}))}),vl.apply(this,arguments)}function sh(n,e){return e().catch(t=>Wg(n,t,e))}function oh(n){return l_.apply(this,arguments)}function l_(){return l_=(0,de.Z)(function*(n){const e=ze(n),t=Ms(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;QE(e);)try{const a=yield qE(e.localStore,i);if(null===a){0===e.fu.length&&t.Fo();break}i=a.batchId,xI(e,a)}catch(a){yield Wg(e,a)}d_(e)&&h_(e)}),l_.apply(this,arguments)}function QE(n){return ns(n)&&n.fu.length<10}function xI(n,e){n.fu.push(e);const t=Ms(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function d_(n){return ns(n)&&!Ms(n).No()&&n.fu.length>0}function h_(n){Ms(n).start()}function JE(n){return qg.apply(this,arguments)}function qg(){return qg=(0,de.Z)(function*(n){Ms(n).eu()}),qg.apply(this,arguments)}function XE(n){return f_.apply(this,arguments)}function f_(){return f_=(0,de.Z)(function*(n){const e=Ms(n);for(const t of n.fu)e.Xo(t.mutations)}),f_.apply(this,arguments)}function Sb(n,e,t){return MI.apply(this,arguments)}function MI(){return MI=(0,de.Z)(function*(n,e,t){const i=n.fu.shift(),a=pg.from(i,e,t);yield sh(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield oh(n)}),MI.apply(this,arguments)}function Ab(n,e){return NI.apply(this,arguments)}function NI(){return NI=(0,de.Z)(function*(n,e){var t;e&&Ms(n).Yo&&(yield(t=(0,de.Z)(function*(i,a){if(ig(c=a.code)&&c!==ne.ABORTED){const p=i.fu.shift();Ms(i).Mo(),yield sh(i,()=>i.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield oh(i)}var c}),function(i,a){return t.apply(this,arguments)})(n,e)),d_(n)&&h_(n)}),NI.apply(this,arguments)}function p_(n,e){return ah.apply(this,arguments)}function ah(){return ah=(0,de.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const i=ns(t);t._u.add(3),yield rh(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield nh(t)}),ah.apply(this,arguments)}function g_(n,e){return m_.apply(this,arguments)}function m_(){return m_=(0,de.Z)(function*(n,e){const t=ze(n);e?(t._u.delete(2),yield nh(t)):e||(t._u.add(2),yield rh(t),t.gu.set("Unknown"))}),m_.apply(this,arguments)}function Il(n){return n.pu||(n.pu=function(e,t,i){const a=ze(e);return a.su(),new KE(t,a.connection,a.authCredentials,a.appCheckCredentials,a.yt,i)}(n.datastore,n.asyncQueue,{Yr:YE.bind(null,n),Zr:$g.bind(null,n),Wo:AI.bind(null,n)}),n.wu.push(function(){var e=(0,de.Z)(function*(t){t?(n.pu.Mo(),u_(n)?a_(n):n.gu.set("Unknown")):(yield n.pu.stop(),SI(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ms(n){return n.Iu||(n.Iu=function(e,t,i){const a=ze(e);return a.su(),new eh(t,a.connection,a.authCredentials,a.appCheckCredentials,a.yt,i)}(n.datastore,n.asyncQueue,{Yr:JE.bind(null,n),Zr:Ab.bind(null,n),tu:XE.bind(null,n),Zo:Sb.bind(null,n)}),n.wu.push(function(){var e=(0,de.Z)(function*(t){t?(n.Iu.Mo(),yield oh(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class y_{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,i,a,c){const p=Date.now()+i,y=new y_(e,t,p,a,c);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Uu(n))return new Se(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class ch{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ue.comparator(t.key,i.key):(t,i)=>Ue.comparator(t.key,i.key),this.keyedMap=Df(),this.sortedSet=new On(this.comparator)}static emptySet(e){return new ch(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ch)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new ch;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class RI{constructor(){this.Tu=new On(Ue.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ot():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class lh{constructor(e,t,i,a,c,p,y,D,C){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=D,this.hasCachedResults=C}static fromInitialDocuments(e,t,i,a,c){const p=[];return t.forEach(y=>{p.push({type:0,doc:y})}),new lh(e,t,ch.emptySet(t),p,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class kI{constructor(){this.Au=void 0,this.listeners=[]}}class eD{constructor(){this.queries=new qu(e=>wE(e),Yp),this.onlineState="Unknown",this.Ru=new Set}}function __(n,e){return wl.apply(this,arguments)}function wl(){return wl=(0,de.Z)(function*(n,e){const t=ze(n),i=e.query;let a=!1,c=t.queries.get(i);if(c||(a=!0,c=new kI),a)try{c.Au=yield t.onListen(i)}catch(p){const y=uh(p,`Initialization of query '${_0(e.query)}' failed`);return void e.onError(y)}t.queries.set(i,c),c.listeners.push(e),e.bu(t.onlineState),c.Au&&e.Pu(c.Au)&&I_(t)}),wl.apply(this,arguments)}function v_(n,e){return zg.apply(this,arguments)}function zg(){return zg=(0,de.Z)(function*(n,e){const t=ze(n),i=e.query;let a=!1;const c=t.queries.get(i);if(c){const p=c.listeners.indexOf(e);p>=0&&(c.listeners.splice(p,1),a=0===c.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),zg.apply(this,arguments)}function tD(n,e){const t=ze(n);let i=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const y of p.listeners)y.Pu(a)&&(i=!0);p.Au=a}}i&&I_(t)}function PI(n,e,t){const i=ze(n),a=i.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);i.queries.delete(e)}function I_(n){n.Ru.forEach(e=>{e.next()})}class Kg{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new lh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=lh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class nD{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Zg{constructor(e){this.yt=e}Ji(e){return Br(this.yt,e)}Yi(e){return e.metadata.exists?Oy(this.yt,e.document,!1):Fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return nr(e)}}class rD{constructor(e,t,i){this.Mu=e,this.localStore=t,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=w_(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=Zt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new Zg(this.yt);for(const a of e)if(a.metadata.queries){const c=i.Ji(a.metadata.name);for(const p of a.metadata.queries){const y=(t.get(p)||St()).add(c);t.set(p,y)}}return t}complete(){var e=this;return(0,de.Z)(function*(){const t=yield function wI(n,e,t,i){return Pg.apply(this,arguments)}(e.localStore,new Zg(e.yt),e.documents,e.Mu.id),i=e.$u(e.documents);for(const a of e.queries)yield EI(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function w_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class E_{constructor(e){this.key=e}}class OI{constructor(e){this.key=e}}class FI{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=St(),this.mutatedKeys=St(),this.Gu=v0(e),this.Qu=new ch(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new RI,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,y=!1;const D="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,C="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,k)=>{const q=a.get(x),te=Ss(this.query,k)?k:null,me=!!q&&this.mutatedKeys.has(q.key),Ve=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let Ze=!1;q&&te?q.data.isEqual(te.data)?me!==Ve&&(i.track({type:3,doc:te}),Ze=!0):this.Hu(q,te)||(i.track({type:2,doc:te}),Ze=!0,(D&&this.Gu(te,D)>0||C&&this.Gu(te,C)<0)&&(y=!0)):!q&&te?(i.track({type:0,doc:te}),Ze=!0):q&&!te&&(i.track({type:1,doc:q}),Ze=!0,(D||C)&&(y=!0)),Ze&&(te?(p=p.add(te),c=Ve?c.add(x):c.delete(x)):(p=p.delete(x),c=c.delete(x)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const x="F"===this.query.limitType?p.last():p.first();p=p.delete(x.key),c=c.delete(x.key),i.track({type:1,doc:x})}return{Qu:p,zu:i,$i:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Eu();c.sort((C,x)=>function(k,q){const te=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return te(k)-te(q)}(C.type,x.type)||this.Gu(C.doc,x.doc)),this.Ju(i);const p=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,D=y!==this.Uu;return this.Uu=y,0!==c.length||D?{snapshot:new lh(this.query,e.Qu,a,c,e.mutatedKeys,0===y,D,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:p}:{Xu:p}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new RI,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=St(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new OI(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new E_(i))}),t}tc(e){this.qu=e.Hi,this.Ku=St();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return lh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class iD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class D_{constructor(e){this.key=e,this.nc=!1}}class sD{constructor(e,t,i,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.sc={},this.ic=new qu(y=>wE(y),Yp),this.rc=new Map,this.oc=new Set,this.uc=new On(Ue.comparator),this.cc=new Map,this.ac=new Sg,this.hc={},this.lc=new Map,this.fc=ml.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function LI(n,e){return b_.apply(this,arguments)}function b_(){return b_=(0,de.Z)(function*(n,e){const t=em(n);let i,a;const c=t.ic.get(e);if(c)i=c.targetId,t.sharedClientState.addLocalQueryTarget(i),a=c.view.ec();else{const p=yield Yd(t.localStore,Ni(e));t.isPrimaryClient&&Gf(t.remoteStore,p);const y=t.sharedClientState.addLocalQueryTarget(p.targetId);i=p.targetId,a=yield T_(t,e,i,"current"===y,p.resumeToken)}return a}),b_.apply(this,arguments)}function T_(n,e,t,i,a){return C_.apply(this,arguments)}function C_(){return C_=(0,de.Z)(function*(n,e,t,i,a){n._c=(k,q,te)=>{return(me=(0,de.Z)(function*(Ve,Ze,Ht,Jt){let Ut=Ze.view.Wu(Ht);Ut.$i&&(Ut=yield kg(Ve.localStore,Ze.query,!1).then(({documents:Gt})=>Ze.view.Wu(Gt,Ut)));const Bt=Jt&&Jt.targetChanges.get(Ze.targetId),Ft=Ze.view.applyChanges(Ut,Ve.isPrimaryClient,Bt);return zf(Ve,Ze.targetId,Ft.Xu),Ft.snapshot}),function(Ve,Ze,Ht,Jt){return me.apply(this,arguments)})(n,k,q,te);var me};const c=yield kg(n.localStore,e,!0),p=new FI(e,c.Hi),y=p.Wu(c.documents),D=og.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),C=p.applyChanges(y,n.isPrimaryClient,D);zf(n,t,C.Xu);const x=new iD(e,t,p);return n.ic.set(e,x),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),C_.apply(this,arguments)}function oD(n,e){return S_.apply(this,arguments)}function S_(){return S_=(0,de.Z)(function*(n,e){const t=ze(n),i=t.ic.get(e),a=t.rc.get(i.targetId);if(a.length>1)return t.rc.set(i.targetId,a.filter(c=>!Yp(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qd(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),ih(t.remoteStore,i.targetId),dh(t,i.targetId)}).catch(Ca))):(dh(t,i.targetId),yield Qd(t.localStore,i.targetId,!0))}),S_.apply(this,arguments)}function A_(){return A_=(0,de.Z)(function*(n,e,t){const i=j_(n);try{const a=yield function(c,p){const y=ze(c),D=Sn.now(),C=p.reduce((q,te)=>q.add(te.key),St());let x,k;return y.persistence.runTransaction("Locally write mutations","readwrite",q=>{let te=Ri(),me=St();return y.Gi.getEntries(q,C).next(Ve=>{te=Ve,te.forEach((Ze,Ht)=>{Ht.isValidDocument()||(me=me.add(Ze))})}).next(()=>y.localDocuments.getOverlayedDocuments(q,te)).next(Ve=>{x=Ve;const Ze=[];for(const Ht of p){const Jt=wb(Ht,x.get(Ht.key).overlayedDocument);null!=Jt&&Ze.push(new ka(Ht.key,Jt,Kp(Jt.value.mapValue),An.exists(!0)))}return y.mutationQueue.addMutationBatch(q,D,Ze,p)}).next(Ve=>{k=Ve;const Ze=Ve.applyToLocalDocumentSet(x,me);return y.documentOverlayCache.saveOverlays(q,Ve.batchId,Ze)})}).then(()=>({batchId:k.batchId,changes:My(x)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,p,y){let D=c.hc[c.currentUser.toKey()];D||(D=new On(Ot)),D=D.insert(p,y),c.hc[c.currentUser.toKey()]=D}(i,a.batchId,t),yield Pi(i,a.changes),yield oh(i.remoteStore)}catch(a){const c=uh(a,"Failed to persist write");t.reject(c)}}),A_.apply(this,arguments)}function VI(n,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,de.Z)(function*(n,e){const t=ze(n);try{const i=yield WE(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.cc.get(c);p&&(dt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.nc=!0:a.modifiedDocuments.size>0?dt(p.nc):a.removedDocuments.size>0&&(dt(p.nc),p.nc=!1))}),yield Pi(t,i,e)}catch(i){yield Ca(i)}}),Yg.apply(this,arguments)}function x_(n,e,t){const i=ze(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ic.forEach((c,p)=>{const y=p.view.bu(e);y.snapshot&&a.push(y.snapshot)}),function(c,p){const y=ze(c);y.onlineState=p;let D=!1;y.queries.forEach((C,x)=>{for(const k of x.listeners)k.bu(p)&&(D=!0)}),D&&I_(y)}(i.eventManager,e),a.length&&i.sc.Wo(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function uD(n,e,t){return M_.apply(this,arguments)}function M_(){return M_=(0,de.Z)(function*(n,e,t){const i=ze(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.cc.get(e),c=a&&a.key;if(c){let p=new On(Ue.comparator);p=p.insert(c,Fn.newNoDocument(c,mt.min()));const y=St().add(c),D=new bf(mt.min(),new Map,new yn(Ot),p,y);yield VI(i,D),i.uc=i.uc.remove(c),i.cc.delete(e),P_(i)}else yield Qd(i.localStore,e,!1).then(()=>dh(i,e,t)).catch(Ca)}),M_.apply(this,arguments)}function BI(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,de.Z)(function*(n,e){const t=ze(n),i=e.batch.batchId;try{const a=yield GE(t.localStore,e);qf(t,i,null),Qg(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Pi(t,a)}catch(a){yield Ca(a)}}),N_.apply(this,arguments)}function cD(n,e,t){return R_.apply(this,arguments)}function R_(){return R_=(0,de.Z)(function*(n,e,t){const i=ze(n);try{const a=yield function(c,p){const y=ze(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let C;return y.mutationQueue.lookupMutationBatch(D,p).next(x=>(dt(null!==x),C=x.keys(),y.mutationQueue.removeMutationBatch(D,x))).next(()=>y.mutationQueue.performConsistencyCheck(D)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(D,C,p)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,C)).next(()=>y.localDocuments.getDocuments(D,C))})}(i.localStore,e);qf(i,e,t),Qg(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Pi(i,a)}catch(a){yield Ca(a)}}),R_.apply(this,arguments)}function Wf(){return Wf=(0,de.Z)(function*(n,e){const t=ze(n);ns(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(c){const p=ze(c);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>p.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===i)return void e.resolve();const a=t.lc.get(i)||[];a.push(e),t.lc.set(i,a)}catch(i){const a=uh(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Wf.apply(this,arguments)}function Qg(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function qf(n,e,t){const i=ze(n);let a=i.hc[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.hc[i.currentUser.toKey()]=a}}function dh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||UI(n,i)})}function UI(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ih(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),P_(n))}function zf(n,e,t){for(const i of t)i instanceof E_?(n.ac.addReference(i.key,e),lD(n,i)):i instanceof OI?(ke("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||UI(n,i.key)):ot()}function lD(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(i),P_(n))}function P_(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ue(Zt.fromString(e)),i=n.fc.next();n.cc.set(i,new D_(t)),n.uc=n.uc.insert(t,i),Gf(n.remoteStore,new Fa(Ni(Nd(t.path)),i,2,Xi.at))}}function Pi(n,e,t){return O_.apply(this,arguments)}function O_(){return O_=(0,de.Z)(function*(n,e,t){const i=ze(n),a=[],c=[],p=[];var y;i.ic.isEmpty()||(i.ic.forEach((y,D)=>{p.push(i._c(D,e,t).then(C=>{if((C||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(D.targetId,C?.fromCache?"not-current":"current"),C){a.push(C);const x=Qy.Ci(D.targetId,C);c.push(x)}}))}),yield Promise.all(p),i.sc.Wo(a),yield(y=(0,de.Z)(function*(D,C){const x=ze(D);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>J.forEach(C,q=>J.forEach(q.Si,te=>x.persistence.referenceDelegate.addReference(k,q.targetId,te)).next(()=>J.forEach(q.Di,te=>x.persistence.referenceDelegate.removeReference(k,q.targetId,te)))))}catch(k){if(!Uu(k))throw k;ke("LocalStore","Failed to update sequence numbers: "+k)}for(const k of C){const q=k.targetId;if(!k.fromCache){const te=x.qi.get(q),Ve=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);x.qi=x.qi.insert(q,Ve)}}}),function(D,C){return y.apply(this,arguments)})(i.localStore,c))}),O_.apply(this,arguments)}function dD(n,e){return jI.apply(this,arguments)}function jI(){return jI=(0,de.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const i=yield gI(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(p=>{p.forEach(y=>{y.reject(new Se(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Pi(t,i.ji)}var a}),jI.apply(this,arguments)}function $I(n,e){const t=ze(n),i=t.cc.get(e);if(i&&i.nc)return St().add(i.key);{let a=St();const c=t.rc.get(e);if(!c)return a;for(const p of c){const y=t.ic.get(p);a=a.unionWith(y.view.ju)}return a}}function F_(n,e){return L_.apply(this,arguments)}function L_(){return L_=(0,de.Z)(function*(n,e){const t=ze(n),i=yield kg(t.localStore,e.query,!0),a=e.view.tc(i);return t.isPrimaryClient&&zf(t,e.targetId,a.Xu),a}),L_.apply(this,arguments)}function HI(n,e){return V_.apply(this,arguments)}function V_(){return V_=(0,de.Z)(function*(n,e){const t=ze(n);return vI(t.localStore,e).then(i=>Pi(t,i))}),V_.apply(this,arguments)}function hD(n,e,t,i){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,de.Z)(function*(n,e,t,i){const a=ze(n),c=yield function(p,y){const D=ze(p),C=ze(D.mutationQueue);return D.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.Tn(x,y).next(k=>k?D.localDocuments.getDocuments(x,k):J.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield oh(a.remoteStore):"acknowledged"===t||"rejected"===t?(qf(a,e,i||null),Qg(a,e),y=e,ze(ze(a.localStore).mutationQueue).An(y)):ot(),yield Pi(a,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Kf.apply(this,arguments)}function Jg(){return Jg=(0,de.Z)(function*(n,e){const t=ze(n);if(em(t),j_(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield B_(t,i.toArray());t.dc=!0,yield g_(t.remoteStore,!0);for(const c of a)Gf(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const i=[];let a=Promise.resolve();t.rc.forEach((c,p)=>{t.sharedClientState.isLocalQueryTarget(p)?i.push(p):a=a.then(()=>(dh(t,p),Qd(t.localStore,p,!0))),ih(t.remoteStore,p)}),yield a,yield B_(t,i),function(c){const p=ze(c);p.cc.forEach((y,D)=>{ih(p.remoteStore,D)}),p.ac.fs(),p.cc=new Map,p.uc=new On(Ue.comparator)}(t),t.dc=!1,yield g_(t.remoteStore,!1)}}),Jg.apply(this,arguments)}function B_(n,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,de.Z)(function*(n,e,t){const i=ze(n),a=[],c=[];for(const p of e){let y;const D=i.rc.get(p);if(D&&0!==D.length){y=yield Yd(i.localStore,Ni(D[0]));for(const C of D){const x=i.ic.get(C),k=yield F_(i,x);k.snapshot&&c.push(k.snapshot)}}else{const C=yield _I(i.localStore,p);y=yield Yd(i.localStore,C),yield T_(i,WI(C),p,!1,y.resumeToken)}a.push(y)}return i.sc.Wo(c),a}),Xg.apply(this,arguments)}function WI(n){return Iy(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fD(n){const e=ze(n);return ze(ze(e.localStore).persistence).vi()}function pD(n,e,t,i){return U_.apply(this,arguments)}function U_(){return U_=(0,de.Z)(function*(n,e,t,i){const a=ze(n);if(a.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const p=yield vI(a.localStore,Qp(c[0])),y=bf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Cr.EMPTY_BYTE_STRING);yield Pi(a,p,y);break}case"rejected":yield Qd(a.localStore,e,!0),dh(a,e,i);break;default:ot()}}),U_.apply(this,arguments)}function qI(n,e,t){return zI.apply(this,arguments)}function zI(){return zI=(0,de.Z)(function*(n,e,t){const i=em(n);if(i.dc){for(const a of e){if(i.rc.has(a)){ke("SyncEngine","Adding an already active target "+a);continue}const c=yield _I(i.localStore,a),p=yield Yd(i.localStore,c);yield T_(i,WI(c),p.targetId,!1,p.resumeToken),Gf(i.remoteStore,p)}for(const a of t)i.rc.has(a)&&(yield Qd(i.localStore,a,!1).then(()=>{ih(i.remoteStore,a),dh(i,a)}).catch(Ca))}}),zI.apply(this,arguments)}function em(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$I.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uD.bind(null,e),e.sc.Wo=tD.bind(null,e.eventManager),e.sc.wc=PI.bind(null,e.eventManager),e}function j_(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cD.bind(null,e),e}class mD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,de.Z)(function*(){t.yt=It(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return pI(this.persistence,new fI,e.initialUser,this.yt)}yc(e){return new Zy(Uf.Bs,this.yt)}gc(e){return new DI}terminate(){var e=this;return(0,de.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yD extends mD{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,de.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield j_(i.Ac.syncEngine),yield oh(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return pI(this.persistence,new fI,e.initialUser,this.yt)}Tc(e,t){return new $o(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new dE(t,this.persistence);return new lE(e.asyncQueue,i)}yc(e){const t=Rg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new Ng(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,i_(),s_(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new DI}}class _D extends yD{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,de.Z)(function*(){yield t().call(i,e);const a=i.Ac.syncEngine;i.sharedClientState instanceof n_&&(i.sharedClientState.syncEngine={Fr:hD.bind(null,a),$r:pD.bind(null,a),Br:qI.bind(null,a),vi:fD.bind(null,a),Mr:HI.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var c=(0,de.Z)(function*(p){yield function GI(n,e){return Jg.apply(this,arguments)}(i.Ac.syncEngine,p),i.gcScheduler&&(p&&!i.gcScheduler.started?i.gcScheduler.start():p||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(p&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():p||i.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}gc(e){const t=i_();if(!n_.C(t))throw new Se(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Rg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new n_(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class $_{initialize(e,t){var i=this;return(0,de.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>x_(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=dD.bind(null,i.syncEngine),yield g_(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eD}createDatastore(e){const t=It(e.databaseInfo.databaseId),i=new bI(e.databaseInfo);return new ZE(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,c=y=>x_(this.syncEngine,y,0),p=zE.C()?new zE:new Xd,new Cb(t,i,a,c,p);var t,i,a,c,p}createSyncEngine(e,t){return function(i,a,c,p,y,D,C){const x=new sD(i,a,c,p,y,D);return C&&(x.dc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,de.Z)(function*(t){const i=ze(t);ke("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield rh(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function H_(n,e,t){if(!t)throw new Se(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KI(n,e,t,i){if(!0===e&&!0===i)throw new Se(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZI(n){if(!Ue.isDocumentKey(n))throw new Se(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YI(n){if(Ue.isDocumentKey(n))throw new Se(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tm(n);throw new Se(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QI(n,e){if(e<=0)throw new Se(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const JI=new Map;class XI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,KI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zv;switch(t.type){case"gapi":return new nE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JI.get(e);t&&(ke("ComponentProvider","Removing Datastore"),JI.delete(e),t.terminate())}(this),Promise.resolve()}}class In{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class Ur{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class to extends Ur{constructor(e,t,i){super(e,t,Nd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Ue(e))}withConverter(e){return new to(this.firestore,e,this._path)}}function G_(n,e,...t){if(n=(0,$t.m9)(n),H_("collection","path",e),n instanceof Zf){const i=Zt.fromString(e,...t);return YI(i),new to(n,null,i)}{if(!(n instanceof In||n instanceof to))throw new Se(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zt.fromString(e,...t));return YI(i),new to(n.firestore,null,i)}}function nm(n,e,...t){if(n=(0,$t.m9)(n),1===arguments.length&&(e=ay.R()),H_("doc","path",e),n instanceof Zf){const i=Zt.fromString(e,...t);return ZI(i),new In(n,null,new Ue(i))}{if(!(n instanceof In||n instanceof to))throw new Se(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zt.fromString(e,...t));return ZI(i),new In(n.firestore,n instanceof to?n.converter:null,new Ue(i))}}function tw(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),(n instanceof In||n instanceof to)&&(e instanceof In||e instanceof to)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nw(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),n instanceof Ur&&e instanceof Ur&&n.firestore===e.firestore&&Yp(n._query,e._query)&&n.converter===e.converter}function rw(n,e=10240){let t=0;return{read:()=>(0,de.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,de.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class rm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vD{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Ir,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,de.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,de.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),a=Number(i);isNaN(a)&&e.Dc(`length string (${i}) is not valid number`);const c=yield e.Cc(a);return new nD(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,de.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,de.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class wD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,de.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,de.Z)(function*(c,p){const y=ze(c),D=Pa(y.yt)+"/documents",C={documents:p.map(te=>cl(y.yt,te))},x=yield y._o("BatchGetDocuments",D,C,p.length),k=new Map;x.forEach(te=>{const me=function CE(n,e){return"found"in e?function(t,i){dt(!!i.found);const a=Br(t,i.found.name),c=nr(i.found.updateTime),p=i.found.createTime?nr(i.found.createTime):mt.min(),y=new Sr({mapValue:{fields:i.found.fields}});return Fn.newFoundDocument(a,c,p,y)}(n,e):"missing"in e?function(t,i){dt(!!i.missing),dt(!!i.readTime);const a=Br(t,i.missing),c=nr(i.readTime);return Fn.newNoDocument(a,c)}(n,e):ot()}(y.yt,te);k.set(me.key.toString(),me)});const q=[];return p.forEach(te=>{const me=k.get(te.toString());dt(!!me),q.push(me)}),q}),function(c,p){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const c=Ue.fromPath(a);e.mutations.push(new rg(c,e.precondition(c)))}),yield(i=(0,de.Z)(function*(a,c){const p=ze(a),y=Pa(p.yt)+"/documents",D={writes:c.map(C=>Oa(p.yt,C))};yield p.ao("Commit",y,D)}),function(a,c){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=mt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Se(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?An.exists(!1):An.updateTime(t):An.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Se(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return An.updateTime(t)}return An.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class W_{constructor(e,t,i,a,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=c,this.kc=i.maxAttempts,this.xo=new o_(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,de.Z)(function*(){const t=new wD(e.datastore),i=e.Mc(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!kt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ig(t)}return!1}}class ja{constructor(e,t,i,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=vr.UNAUTHENTICATED,this.clientId=ay.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var p=(0,de.Z)(function*(y){ke("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(i,p=>(ke("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,de.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=uh(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function iw(n,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,de.Z)(function*(c){i.isEqual(c)||(yield gI(e.localStore,c),i=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Qf.apply(this,arguments)}function fh(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield z_(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>p_(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>p_(e.remoteStore,c)),n.onlineComponents=e}),q_.apply(this,arguments)}function z_(n){return K_.apply(this,arguments)}function K_(){return K_=(0,de.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield iw(n,new mD)),n.offlineComponents}),K_.apply(this,arguments)}function El(n){return ph.apply(this,arguments)}function ph(){return ph=(0,de.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield fh(n,new $_)),n.onlineComponents}),ph.apply(this,arguments)}function sw(n){return z_(n).then(e=>e.persistence)}function im(n){return z_(n).then(e=>e.localStore)}function sm(n){return El(n).then(e=>e.remoteStore)}function om(n){return El(n).then(e=>e.syncEngine)}function Dl(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,de.Z)(function*(n){const e=yield El(n),t=e.eventManager;return t.onListen=LI.bind(null,e.syncEngine),t.onUnlisten=oD.bind(null,e.syncEngine),t}),Z_.apply(this,arguments)}function um(n,e,t={}){const i=new Ir;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(a,c,p,y,D){const C=new rm({next:k=>{c.enqueueAndForget(()=>v_(a,x));const q=k.docs.has(p);!q&&k.fromCache?D.reject(new Se(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&k.fromCache&&y&&"server"===y.source?D.reject(new Se(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(k)},error:k=>D.reject(k)}),x=new Kg(Nd(p.path),C,{includeMetadataChanges:!0,Nu:!0});return __(a,x)}(yield Dl(n),n.asyncQueue,e,t,i)})),i.promise}function cm(n,e,t={}){const i=new Ir;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(a,c,p,y,D){const C=new rm({next:k=>{c.enqueueAndForget(()=>v_(a,x)),k.fromCache&&"server"===y.source?D.reject(new Se(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(k)},error:k=>D.reject(k)}),x=new Kg(p,C,{includeMetadataChanges:!0,Nu:!0});return __(a,x)}(yield Dl(n),n.asyncQueue,e,t,i)})),i.promise}class TD{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new o_(this,"async_queue_retry"),this.Wc=()=>{const t=s_();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=s_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=s_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Ir;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,de.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Uu(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,ur("INTERNAL UNHANDLED ERROR: ",function(c){let p=c.message||"";return c.stack&&(p=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),p}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=y_.createAndSchedule(this,e,t,i,c=>this.Yc(c));return this.Uc.push(a),a}zc(){this.Kc&&ot()}verifyOperationInProgress(){}Xc(){var e=this;return(0,de.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function J_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class aw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xn extends Zf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new TD,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||uw(this),this._firestoreClient.terminate()}}function cr(n){return n._firestoreClient||uw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function uw(n){var e;const t=n._freezeSettings(),i=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hE(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new ja(n._authCredentials,n._appCheckCredentials,n._queue,i)}function dw(n,e,t){const i=new Ir;return n.asyncQueue.enqueue((0,de.Z)(function*(){try{yield iw(n,t),yield fh(n,e),i.resolve()}catch(a){const c=a;if(!("FirebaseError"===(p=c).name?p.code===ne.FAILED_PRECONDITION||p.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw c;Vu("Error enabling offline persistence. Falling back to persistence disabled: "+c),i.reject(c)}var p})).then(()=>i.promise)}function AD(n){if(n._initialized||n._terminated)throw new Se(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class no{constructor(e){this._byteString=e}static fromBase64String(e){try{return new no(Cr.fromBase64String(e))}catch(t){throw new Se(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new no(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ho{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bl{constructor(e){this._methodName=e}}class mh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const xD=/^__.*__$/;class fw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new ul(e,this.data,t,this.fieldTransforms)}}class pw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class dm{constructor(e,t,i,a,c,p){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new dm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.ua(e),a}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Xf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(gw(this.sa)&&xD.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class ev{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||It(e)}da(e,t,i,a=!1){return new dm({sa:e,methodName:t,fa:i,path:Pn.emptyPath(),oa:!1,la:a},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Xu(n){const e=n._freezeSettings(),t=It(n._databaseId);return new ev(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jf(n,e,t,i,a,c={}){const p=n.da(c.merge||c.mergeFields?2:0,e,t,a);Iw("Data must be an object, but it was:",p,i);const y=ND(i,p);let D,C;if(c.merge)D=new oi(p.fieldMask),C=p.fieldTransforms;else if(c.mergeFields){const x=[];for(const k of c.mergeFields){const q=rv(e,k,t);if(!p.contains(q))throw new Se(ne.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);iv(x,q)||x.push(q)}D=new oi(x),C=p.fieldTransforms.filter(k=>D.covers(k.field))}else D=null,C=p.fieldTransforms;return new fw(new Sr(y),D,C)}class ec extends bl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ec}}function hm(n,e,t){return new dm({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class mw extends bl{_toFieldTransform(e){return new al(e.path,new kd)}isEqual(e){return e instanceof mw}}class yw extends bl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=hm(this,e,!0),i=this._a.map(c=>$a(c,t)),a=new Wu(i);return new al(e.path,a)}isEqual(e){return this===e}}class MD extends bl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=hm(this,e,!0),i=this._a.map(c=>$a(c,t)),a=new sl(i);return new al(e.path,a)}isEqual(e){return this===e}}class _w extends bl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Js(e.yt,Xp(e.yt,this.wa));return new al(e.path,t)}isEqual(e){return this===e}}function tc(n,e,t,i){const a=n.da(1,e,t);Iw("Data must be an object, but it was:",a,i);const c=[],p=Sr.empty();el(i,(D,C)=>{const x=fm(e,D,t);C=(0,$t.m9)(C);const k=a.ca(x);if(C instanceof ec)c.push(x);else{const q=$a(C,k);null!=q&&(c.push(x),p.set(x,q))}});const y=new oi(c);return new pw(p,y,a.fieldTransforms)}function tv(n,e,t,i,a,c){const p=n.da(1,e,t),y=[rv(e,i,t)],D=[a];if(c.length%2!=0)throw new Se(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<c.length;q+=2)y.push(rv(e,c[q])),D.push(c[q+1]);const C=[],x=Sr.empty();for(let q=y.length-1;q>=0;--q)if(!iv(C,y[q])){const te=y[q];let me=D[q];me=(0,$t.m9)(me);const Ve=p.ca(te);if(me instanceof ec)C.push(te);else{const Ze=$a(me,Ve);null!=Ze&&(C.push(te),x.set(te,Ze))}}const k=new oi(C);return new pw(x,k,p.fieldTransforms)}function nv(n,e,t,i=!1){return $a(t,n.da(i?4:3,e))}function $a(n,e){if(vw(n=(0,$t.m9)(n)))return Iw("Unsupported field value:",e,n),ND(n,e);if(n instanceof bl)return function(t,i){if(!gw(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const a=[];let c=0;for(const p of t){let y=$a(p,i.aa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,$t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xp(i.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Sn.fromDate(t);return{timestampValue:zu(i.yt,a)}}if(t instanceof Sn){const a=new Sn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zu(i.yt,a)}}if(t instanceof mh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof no)return{bytesValue:TE(i.yt,t._byteString)};if(t instanceof In){const a=i.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw i.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:cg(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${tm(t)}`)}(n,e)}function ND(n,e){const t={};return Jv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(n,(i,a)=>{const c=$a(a,e.ra(i));null!=c&&(t[i]=c)}),{mapValue:{fields:t}}}function vw(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sn||n instanceof mh||n instanceof no||n instanceof In||n instanceof bl)}function Iw(n,e,t){if(!vw(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=tm(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function rv(n,e,t){if((e=(0,$t.m9)(e))instanceof Ho)return e._internalPath;if("string"==typeof e)return fm(n,e);throw Xf("Field path arguments must be of type string or ",n,!1,void 0,t)}const RD=new RegExp("[~\\*/\\[\\]]");function fm(n,e,t){if(e.search(RD)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ho(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xf(n,e,t,i,a){const c=i&&!i.isEmpty(),p=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let D="";return(c||p)&&(D+=" (found",c&&(D+=` in field ${i}`),p&&(D+=` in document ${a}`),D+=")"),new Se(ne.INVALID_ARGUMENT,y+n+D)}function iv(n,e){return n.some(t=>t.isEqual(e))}class ep{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ww(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ww extends ep{data(){return super.data()}}function tp(n,e){return"string"==typeof e?fm(n,e):e instanceof Ho?e._internalPath:e._delegate._internalPath}function Ew(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sv{}class yh extends sv{}function nc(n,e,...t){let i=[];e instanceof sv&&i.push(e),i=i.concat(t),function(a){const c=a.filter(y=>y instanceof Tl).length,p=a.filter(y=>y instanceof _h).length;if(c>1||c>0&&p>0)throw new Se(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class _h extends yh{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new _h(e,t,i)}_apply(e){const t=this._parse(e);return ip(e._query,t),new Ur(e.firestore,e.converter,y0(e._query,t))}_parse(e){const t=Xu(e.firestore);return function(a,c,p,y,D,C,x){let k;if(D.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Se(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){cv(x,C);const q=[];for(const te of x)q.push(PD(y,a,te));k={arrayValue:{values:q}}}else k=PD(y,a,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||cv(x,C),k=nv(p,"where",x,"in"===C||"not-in"===C);return zt.create(D,C,k)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tl extends sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tl(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,a){let c=i;const p=a.getFlattenedFilters();for(const y of p)ip(c,y),c=y0(c,y)}(e._query,t),new Ur(e.firestore,e.converter,y0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ov extends yh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ov(e,t)}_apply(e){const t=function(i,a,c){if(null!==i.startAt)throw new Se(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Se(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Hu(a,c);return function(y,D){if(null===g0(y)){const C=wy(y);null!==C&&lv(0,C,D.field)}}(i,p),p}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new Bo(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class np extends yh{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new np(e,t,i)}_apply(e){return new Ur(e.firestore,e.converter,Ey(e._query,this._limit,this._limitType))}}class av extends yh{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new av(e,t,i)}_apply(e){const t=rp(e,this.type,this._docOrFields,this._inclusive);return new Ur(e.firestore,e.converter,(a=t,new Bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class uv extends yh{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new uv(e,t,i)}_apply(e){const t=rp(e,this.type,this._docOrFields,this._inclusive);return new Ur(e.firestore,e.converter,(a=t,new Bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function rp(n,e,t,i){if(t[0]=(0,$t.m9)(t[0]),t[0]instanceof ep)return function(a,c,p,y,D){if(!y)throw new Se(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const C=[];for(const x of Rd(a))if(x.field.isKeyField())C.push(xd(c,y.key));else{const k=y.data.field(x.field);if(hy(k))throw new Se(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const q=x.field.canonicalString();throw new Se(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}C.push(k)}return new $u(C,D)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=Xu(n.firestore);return function(c,p,y,D,C,x){const k=c.explicitOrderBy;if(C.length>k.length)throw new Se(ne.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let te=0;te<C.length;te++){const me=C[te];if(k[te].field.isKeyField()){if("string"!=typeof me)throw new Se(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof me}`);if(!m0(c)&&-1!==me.indexOf("/"))throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${D}() must be a plain document ID, but '${me}' contains a slash.`);const Ve=c.path.child(Zt.fromString(me));if(!Ue.isDocumentKey(Ve))throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${D}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const Ze=new Ue(Ve);q.push(xd(p,Ze))}else{const Ve=nv(y,D,me);q.push(Ve)}}return new $u(q,x)}(n._query,n.firestore._databaseId,a,e,t,i)}}function PD(n,e,t){if("string"==typeof(t=(0,$t.m9)(t))){if(""===t)throw new Se(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m0(e)&&-1!==t.indexOf("/"))throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Zt.fromString(t));if(!Ue.isDocumentKey(i))throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return xd(n,new Ue(i))}if(t instanceof In)return xd(n,t._key);throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(t)}.`)}function cv(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Se(ne.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ip(n,e){if(e.isInequality()){const i=wy(n),a=e.field;if(null!==i&&!i.isEqual(a))throw new Se(ne.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${a.toString()}'`);const c=g0(n);null!==c&&lv(0,a,c)}const t=function(i,a){for(const c of i)for(const p of c.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function lv(n,e,t){if(!t.isEqual(e))throw new Se(ne.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class bw{convertValue(e,t="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const i={};return el(e.fields,(a,c)=>{i[a]=this.convertValue(c,t)}),i}convertGeoPoint(e){return new mh(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=e0(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Gp(e));default:return null}}convertTimestamp(e){const t=Aa(e);return new Sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Zt.fromString(e);dt(H0(i));const a=new Sa(i.get(1),i.get(3)),c=new Ue(i.popFirst(5));return a.isEqual(t)||ur(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function vh(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Tw extends bw{constructor(e){super(),this.firestore=e}convertBytes(e){return new no(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}class Cl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ha extends ep{constructor(e,t,i,a,c,p){super(e,t,i,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(tp("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class pm extends Ha{data(e={}){return super.data(e)}}class Sl{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Cl(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new pm(this._firestore,this._userDataWriter,i.key,i,new Cl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(p=>({type:"added",doc:new pm(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Cl(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:c++}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const y=new pm(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Cl(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let D=-1,C=-1;return 0!==p.type&&(D=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),1!==p.type&&(c=c.add(p.doc),C=c.indexOf(p.doc.key)),{type:Hb(p.type),doc:y,oldIndex:D,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Hb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function Cw(n,e){return n instanceof Ha&&e instanceof Ha?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sl&&e instanceof Sl&&n._firestore===e._firestore&&nw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class rc extends bw{constructor(e){super(),this.firestore=e}convertBytes(e){return new no(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function Sw(n,e,t){n=Yt(n,In);const i=Yt(n.firestore,xn),a=vh(n.converter,e,t);return ci(i,[Jf(Xu(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,An.none())])}function FD(n,e,t,...i){n=Yt(n,In);const a=Yt(n.firestore,xn),c=Xu(a);let p;return p="string"==typeof(e=(0,$t.m9)(e))||e instanceof Ho?tv(c,"updateDoc",n._key,e,t,i):tc(c,"updateDoc",n._key,e),ci(a,[p.toMutation(n._key,An.exists(!0))])}function hv(n,...e){var t,i,a;n=(0,$t.m9)(n);let c={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||J_(e[p])||(c=e[p],p++);const y={includeMetadataChanges:c.includeMetadataChanges};if(J_(e[p])){const k=e[p];e[p]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[p+1]=null===(i=k.error)||void 0===i?void 0:i.bind(k),e[p+2]=null===(a=k.complete)||void 0===a?void 0:a.bind(k)}let D,C,x;if(n instanceof In)C=Yt(n.firestore,xn),x=Nd(n._key.path),D={next:k=>{e[p]&&e[p](fv(C,n,k))},error:e[p+1],complete:e[p+2]};else{const k=Yt(n,Ur);C=Yt(k.firestore,xn),x=k._query;const q=new rc(C);D={next:te=>{e[p]&&e[p](new Sl(C,q,k,te))},error:e[p+1],complete:e[p+2]},Ew(n._query)}return function(k,q,te,me){const Ve=new rm(me),Ze=new Kg(q,Ve,te);return k.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return __(yield Dl(k),Ze)})),()=>{Ve.bc(),k.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return v_(yield Dl(k),Ze)}))}}(cr(C),x,y,D)}function ci(n,e){return function(t,i){const a=new Ir;return t.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function aD(n,e,t){return A_.apply(this,arguments)}(yield om(t),i,a)})),a.promise}(cr(n),e)}function fv(n,e,t){const i=t.docs.get(e._key),a=new rc(n);return new Ha(n,a,e._key,i,new Cl(t.hasPendingWrites,t.fromCache),e.converter)}const Ns={maxAttempts:5};class Mw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xu(e)}set(e,t,i){this._verifyNotCommitted();const a=Go(e,this._firestore),c=vh(a.converter,t,i),p=Jf(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,i);return this._mutations.push(p.toMutation(a._key,An.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const c=Go(e,this._firestore);let p;return p="string"==typeof(t=(0,$t.m9)(t))||t instanceof Ho?tv(this._dataReader,"WriteBatch.update",c._key,t,i,a):tc(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Go(e,this._firestore);return this._mutations=this._mutations.concat(new Vr(t._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Go(n,e){if((n=(0,$t.m9)(n)).firestore!==e)throw new Se(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class VD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xu(e)}get(e){const t=Go(e,this._firestore),i=new Tw(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return ot();const c=a[0];if(c.isFoundDocument())return new ep(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new ep(this._firestore,i,t._key,null,t.converter);throw ot()})}set(e,t,i){const a=Go(e,this._firestore),c=vh(a.converter,t,i),p=Jf(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,i);return this._transaction.set(a._key,p),this}update(e,t,i,...a){const c=Go(e,this._firestore);let p;return p="string"==typeof(t=(0,$t.m9)(t))||t instanceof Ho?tv(this._dataReader,"Transaction.update",c._key,t,i,a):tc(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,p),this}delete(e){const t=Go(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Go(e,this._firestore),i=new rc(this._firestore);return super.get(e).then(a=>new Ha(this._firestore,i,t._key,a._document,new Cl(!1,!1),t.converter))}}function Wo(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yv(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function mm(){if(!function Xv(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ta=_i.SDK_VERSION,(0,_i._registerComponent)(new Eo.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const c=t.getProvider("app").getImmediate(),p=new xn(new tE(t.getProvider("auth-internal")),new df(t.getProvider("app-check-internal")),function(y,D){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Se(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sa(y.options.projectId,D)}(c,i),c);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,_i.registerVersion)(Wv,"3.8.3",n),(0,_i.registerVersion)(Wv,"3.8.3","esm2017")}();class rs{constructor(e){this._delegate=e}static fromBase64String(e){return mm(),new rs(no.fromBase64String(e))}static fromUint8Array(e){return yv(),new rs(no.fromUint8Array(e))}toBase64(){return mm(),this._delegate.toBase64()}toUint8Array(){return yv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _v(n){return function Qb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class HD{enableIndexedDbPersistence(e,t){return function cw(n,e){AD(n=Yt(n,xn));const t=cr(n),i=n._freezeSettings(),a=new $_;return dw(t,a,new yD(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lw(n){AD(n=Yt(n,xn));const e=cr(n),t=n._freezeSettings(),i=new $_;return dw(e,i,new _D(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hw(n){if(n._initialized&&!n._terminated)throw new Se(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{yield(t=(0,de.Z)(function*(i){if(!Ts.C())return Promise.resolve();const a=i+"main";yield Ts.delete(a)}),function(i){return t.apply(this,arguments)})(Rg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class GD{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function hh(n,e,t,i={}){var a;const c=(n=Yt(n,Zf))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Vu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let p,y;if("string"==typeof i.mockUserToken)p=i.mockUserToken,y=vr.MOCK_USER;else{p=(0,$t.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const D=i.mockUserToken.sub||i.mockUserToken.user_id;if(!D)throw new Se(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new vr(D)}n._authCredentials=new _b(new qv(p,y))}}(this._delegate,e,t,i)}enableNetwork(){return function Ei(n){return function ED(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield sw(n),t=yield sm(n);return e.setNetworkEnabled(!0),function(i){const a=ze(i);return a._u.delete(0),nh(a)}(t)}))}(cr(n=Yt(n,xn)))}(this._delegate)}disableNetwork(){return function gh(n){return function Mb(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield sw(n),t=yield sm(n);return e.setNetworkEnabled(!1),(i=(0,de.Z)(function*(a){const c=ze(a);c._u.add(0),yield rh(c),c.gu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(cr(n=Yt(n,xn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,KI("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function CD(n){return function(e){const t=new Ir;return e.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function k_(n,e){return Wf.apply(this,arguments)}(yield om(e),t)})),t.promise}(cr(n=Yt(n,xn)))}(this._delegate)}onSnapshotsInSync(e){return function Kb(n,e){return function Q_(n,e){const t=new rm(e);return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return i=yield Dl(n),a=t,ze(i).Ru.add(a),void a.next();var i,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return i=yield Dl(n),a=t,void ze(i).Ru.delete(a);var i,a}))}}(cr(n=Yt(n,xn)),J_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sc(this,G_(this._delegate,e))}catch(t){throw li(t,"collection()","Firestore.collection()")}}doc(e){try{return new Rs(this,nm(this._delegate,e))}catch(t){throw li(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new di(this,function ew(n,e){if(n=Yt(n,Zf),H_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ur(n,null,(t=e,new Bo(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw li(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BD(n,e,t){n=Yt(n,xn);const i=Object.assign(Object.assign({},Ns),t);return function(a){if(a.maxAttempts<1)throw new Se(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,c,p){const y=new Ir;return a.asyncQueue.enqueueAndForget((0,de.Z)(function*(){const D=yield function am(n){return El(n).then(e=>e.datastore)}(a);new W_(a.asyncQueue,D,p,c,y).run()})),y.promise}(cr(n),a=>e(new VD(n,a)),i)}(this._delegate,t=>e(new vv(this,t)))}batch(){return cr(this._delegate),new qD(new Mw(this._delegate,e=>ci(this._delegate,e)))}loadBundle(e){return function SD(n,e){const t=cr(n=Yt(n,xn)),i=new aw;return function DD(n,e,t,i){const a=function(c,p){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,D=function(D,C){if(D instanceof Uint8Array)return rw(D,C);if(D instanceof ArrayBuffer)return rw(new Uint8Array(D),C);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new vD(D,p);var D}(t,It(e));n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){!function gD(n,e,t){const i=ze(n);var a;(a=(0,de.Z)(function*(c,p,y){try{const D=yield p.getMetadata();if(yield function(q,te){const me=ze(q),Ve=nr(te.createTime);return me.persistence.runTransaction("hasNewerBundle","readonly",Ze=>me.Ns.getBundleMetadata(Ze,te.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo(Ve)>=0)}(c.localStore,D))return yield p.close(),y._completeWith({taskState:"Success",documentsLoaded:(q=D).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);y._updateProgress(w_(D));const C=new rD(D,c.localStore,p.yt);let x=yield p.mc();for(;x;){const q=yield C.Fu(x);q&&y._updateProgress(q),x=yield p.mc()}const k=yield C.complete();return yield Pi(c,k.Lu,void 0),yield function(q,te){const me=ze(q);return me.persistence.runTransaction("Save bundle","readwrite",Ve=>me.Ns.saveBundleMetadata(Ve,te))}(c.localStore,D),y._completeWith(k.progress),Promise.resolve(k.Bu)}catch(D){return Vu("SyncEngine",`Loading bundle failed with ${D}`),y._failWith(D),Promise.resolve(new Set)}var q}),function(c,p,y){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield om(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function Pb(n,e){return function bD(n,e){return n.asyncQueue.enqueue((0,de.Z)(function*(){return function(t,i){const a=ze(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,i))}(yield im(n),e)}))}(cr(n=Yt(n,xn)),e).then(t=>t?new Ur(n,null,t.query):null)}(this._delegate,e).then(t=>t?new di(this,t):null)}}class ym extends bw{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(new no(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Rs.forKey(t,this.firestore,null)}}class vv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ym(e)}get(e){const t=qo(e);return this._delegate.get(t).then(i=>new Ih(this._firestore,new Ha(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=qo(e);return i?(Wo("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=qo(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=qo(e);return this._delegate.delete(t),this}}class qD{constructor(e){this._delegate=e}set(e,t,i){const a=qo(e);return i?(Wo("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=qo(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=qo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ic{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new pm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wh(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=ic.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let c=a.get(t);return c||(c=new ic(e,new ym(e),t),a.set(t,c)),c}}ic.INSTANCES=new WeakMap;class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ym(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rs(t,new In(t._delegate,i,new Ue(e)))}static forKey(e,t,i){return new Rs(t,new In(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new sc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sc(this.firestore,G_(this._delegate,e))}catch(t){throw li(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$t.m9)(e))instanceof In&&tw(this._delegate,e)}set(e,t){t=Wo("DocumentReference.set",t);try{return t?Sw(this._delegate,e,t):Sw(this._delegate,e)}catch(i){throw li(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?FD(this._delegate,e):FD(this._delegate,e,t,...i)}catch(a){throw li(a,"updateDoc()","DocumentReference.update()")}}delete(){return function LD(n){return ci(Yt(n.firestore,xn),[new Vr(n._key,An.none())])}(this._delegate)}onSnapshot(...e){const t=zD(e),i=_m(e,a=>new Ih(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return hv(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Gb(n){n=Yt(n,In);const e=Yt(n.firestore,xn),t=cr(e),i=new rc(e);return function Y_(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(i=(0,de.Z)(function*(a,c,p){try{const y=yield function(D,C){const x=ze(D);return x.persistence.runTransaction("read document","readonly",k=>x.localDocuments.getDocument(k,C))}(a,c);y.isFoundDocument()?p.resolve(y):y.isNoDocument()?p.resolve(null):p.reject(new Se(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const D=uh(y,`Failed to get document '${c} from cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield im(n),e,t);var i})),t.promise}(t,n._key).then(a=>new Ha(e,i,n._key,a,new Cl(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Wb(n){n=Yt(n,In);const e=Yt(n.firestore,xn);return um(cr(e),n._key,{source:"server"}).then(t=>fv(e,n,t))}(this._delegate):function gm(n){n=Yt(n,In);const e=Yt(n.firestore,xn);return um(cr(e),n._key).then(t=>fv(e,n,t))}(this._delegate),t.then(i=>new Ih(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?ic.getInstance(this.firestore,e):null))}}function li(n,e,t){return n.message=n.message.replace(e,t),n}function zD(n){for(const e of n)if("object"==typeof e&&!_v(e))return e;return{}}function _m(n,e){var t,i;let a;return a=_v(n[0])?n[0]:_v(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class Ih{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Cw(this._delegate,e._delegate)}}class wh extends Ih{data(e){const t=this._delegate.data(e);return function eE(n,e){n||ot()}(void 0!==t),t}}class di{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ym(e)}where(e,t,i){try{return new di(this.firestore,nc(this._delegate,function Dw(n,e,t){const i=e,a=tp("where",n);return _h._create(a,i,t)}(e,t,i)))}catch(a){throw li(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new di(this.firestore,nc(this._delegate,function Fb(n,e="asc"){const t=e,i=tp("orderBy",n);return ov._create(i,t)}(e,t)))}catch(i){throw li(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new di(this.firestore,nc(this._delegate,function Lb(n){return QI("limit",n),np._create("limit",n,"F")}(e)))}catch(t){throw li(t,"limit()","Query.limit()")}}limitToLast(e){try{return new di(this.firestore,nc(this._delegate,function Vb(n){return QI("limitToLast",n),np._create("limitToLast",n,"L")}(e)))}catch(t){throw li(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new di(this.firestore,nc(this._delegate,function Bb(...n){return av._create("startAt",n,!0)}(...e)))}catch(t){throw li(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new di(this.firestore,nc(this._delegate,function Ub(...n){return av._create("startAfter",n,!1)}(...e)))}catch(t){throw li(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new di(this.firestore,nc(this._delegate,function jb(...n){return uv._create("endBefore",n,!1)}(...e)))}catch(t){throw li(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new di(this.firestore,nc(this._delegate,function $b(...n){return uv._create("endAt",n,!0)}(...e)))}catch(t){throw li(t,"endAt()","Query.endAt()")}}isEqual(e){return nw(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function OD(n){n=Yt(n,Ur);const e=Yt(n.firestore,xn),t=cr(e),i=new rc(e);return function ow(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(i=(0,de.Z)(function*(a,c,p){try{const y=yield kg(a,c,!0),D=new FI(c,y.Hi),C=D.Wu(y.documents),x=D.applyChanges(C,!1);p.resolve(x.snapshot)}catch(y){const D=uh(y,`Failed to execute query '${c} against cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield im(n),e,t);var i})),t.promise}(t,n._query).then(a=>new Sl(e,i,n,a))}(this._delegate):"server"===e?.source?function zb(n){n=Yt(n,Ur);const e=Yt(n.firestore,xn),t=cr(e),i=new rc(e);return cm(t,n._query,{source:"server"}).then(a=>new Sl(e,i,n,a))}(this._delegate):function qb(n){n=Yt(n,Ur);const e=Yt(n.firestore,xn),t=cr(e),i=new rc(e);return Ew(n._query),cm(t,n._query).then(a=>new Sl(e,i,n,a))}(this._delegate),t.then(i=>new vm(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=zD(e),i=_m(e,a=>new vm(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return hv(this._delegate,t,i)}withConverter(e){return new di(this.firestore,this._delegate.withConverter(e?ic.getInstance(this.firestore,e):null))}}class Pw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new di(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Pw(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new wh(this._firestore,i))})}isEqual(e){return Cw(this._delegate,e._delegate)}}class sc extends di{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rs(this.firestore,e):null}doc(e){try{return new Rs(this.firestore,void 0===e?nm(this._delegate):nm(this._delegate,e))}catch(t){throw li(t,"doc()","CollectionReference.doc()")}}add(e){return function Aw(n,e){const t=Yt(n.firestore,xn),i=nm(n),a=vh(n.converter,e);return ci(t,[Jf(Xu(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,An.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Rs(this.firestore,t))}isEqual(e){return tw(this._delegate,e._delegate)}withConverter(e){return new sc(this.firestore,this._delegate.withConverter(e?ic.getInstance(this.firestore,e):null))}}function qo(n){return Yt(n,In)}class Im{constructor(...e){this._delegate=new Ho(...e)}static documentId(){return new Im(Pn.keyField().canonicalString())}isEqual(e){return(e=(0,$t.m9)(e))instanceof Ho&&this._delegate._internalPath.isEqual(e._internalPath)}}class Al{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Nw(){return new mw("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Al(e)}static delete(){const e=function pv(){return new ec("deleteField")}();return e._methodName="FieldValue.delete",new Al(e)}static arrayUnion(...e){const t=function Rw(...n){return new yw("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Al(t)}static arrayRemove(...e){const t=function UD(...n){return new MD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Al(t)}static increment(e){const t=function kw(n){return new _w("increment",n)}(e);return t._methodName="FieldValue.increment",new Al(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ow={Firestore:GD,GeoPoint:mh,Timestamp:Sn,Blob:rs,Transaction:vv,WriteBatch:qD,DocumentReference:Rs,DocumentSnapshot:Ih,Query:di,QueryDocumentSnapshot:wh,QuerySnapshot:vm,CollectionReference:sc,FieldPath:Im,FieldValue:Al,setLogLevel:function WD(n){!function oy(n){Qi.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function KD(n){(function Fw(n,e){n.INTERNAL.registerComponent(new Eo.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},Ow)))})(n,(e,t)=>new GD(e,t,new HD)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(ga.Z);var Lw=F(7579),Jb=F(6451),Iv=F(5363),Vw=F(8421);function oc(n,e){return(0,si.e)((t,i)=>{let a=null,c=0,p=!1;const y=()=>p&&!a&&i.complete();t.subscribe((0,yi.x)(i,D=>{a?.unsubscribe();let C=0;const x=c++;(0,Vw.Xf)(n(D,x)).subscribe(a=(0,yi.x)(i,k=>i.next(e?e(D,k,x,C++):k),()=>{a=null,y()}))},()=>{p=!0,y()}))})}var ZD=F(6063);class YD extends Lw.x{constructor(e=1/0,t=1/0,i=ZD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:p}=this;t||(i.push(e),!a&&i.push(c.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,c=a.slice();for(let p=0;p<c.length&&!e.closed;p+=i?1:2)e.next(c[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<i.length&&i.splice(0,i.length-c),!a){const p=t.now();let y=0;for(let D=1;D<i.length&&i[D]<=p;D+=2)y=D;y&&i.splice(0,y+1)}}}var Xb=F(3099);function QD(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,(0,Xb.B)({connector:()=>new YD(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const JD=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var tT=F(515);function XD(n){return n<=0?()=>tT.E:(0,si.e)((e,t)=>{let i=0;e.subscribe((0,yi.x)(t,a=>{++i<=n&&(t.next(a),n<=i&&t.complete())}))})}function wm(n){return(0,si.e)((e,t)=>{let i=!1;e.subscribe((0,yi.x)(t,a=>{i=!0,t.next(a)},()=>{i||t.next(n),t.complete()}))})}function eb(n=tb){return(0,si.e)((e,t)=>{let i=!1;e.subscribe((0,yi.x)(t,a=>{i=!0,t.next(a)},()=>i?t.complete():t.error(n())))})}function tb(){return new JD}var xl=F(576);function wv(n,e){return(0,xl.m)(e)?oc(()=>n,e):oc(()=>n)}var sp=F(9468);F(259);const Dv=new Map,bv={activated:!1,tokenObservers:[]},Tv={initialized:!1,enabled:!1};function hi(n){return Dv.get(n)||Object.assign({},bv)}function Eh(){return Tv}class lT{constructor(e,t,i,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,de.Z)(function*(){t.stop();try{t.pending=new $t.BH,yield function dT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new $t.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Oi=new $t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ab(n){if(!hi(n).activated)throw Oi.create("use-before-activation",{appName:n.name})}function Ww(n,e){return qw.apply(this,arguments)}function qw(){return qw=(0,de.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const k=yield a.getHeartbeatsHeader();k&&(i["X-Firebase-Client"]=k)}const c={method:"POST",body:JSON.stringify(e),headers:i};let p,y;try{p=yield fetch(n,c)}catch(k){throw Oi.create("fetch-network-error",{originalErrorMessage:k?.message})}if(200!==p.status)throw Oi.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(k){throw Oi.create("fetch-parse-error",{originalErrorMessage:k?.message})}const D=y.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw Oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const C=1e3*Number(D[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}}),qw.apply(this,arguments)}function gT(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const o="firebase-app-check-store";let l=null;function h(){return l||(l=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var a;e(Oi.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(o,{keyPath:"compositeKey"})}}catch(t){e(Oi.create("storage-open",{originalErrorMessage:t?.message}))}}),l)}function R(){return R=(0,de.Z)(function*(n,e){const i=(yield h()).transaction(o,"readwrite"),c=i.objectStore(o).put({compositeKey:n,value:e});return new Promise((p,y)=>{c.onsuccess=D=>{p()},i.onerror=D=>{var C;y(Oi.create("storage-set",{originalErrorMessage:null===(C=D.target.error)||void 0===C?void 0:C.message}))}})}),R.apply(this,arguments)}const Pe=new kr.Yd("@firebase/app-check");function wt(n,e){return(0,$t.hl)()?function v(n,e){return function M(n,e){return R.apply(this,arguments)}(function ge(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Pe.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function an(){return Eh().enabled}function Mn(){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,de.Z)(function*(){const n=Eh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Ga.apply(this,arguments)}const Nv={error:"UNKNOWN_ERROR"};function Rv(n){return $t.US.encodeString(JSON.stringify(n),!1)}function Dh(n){return op.apply(this,arguments)}function op(){return op=(0,de.Z)(function*(n,e=!1){const t=n.app;ab(t);const i=hi(t);let c,a=i.token;if(a&&!Cm(a)&&(i.token=void 0,a=void 0),!a){const D=yield i.cachedTokenPromise;D&&(Cm(D)?a=D:yield wt(t,void 0))}if(!e&&a&&Cm(a))return{token:a.token};let y,p=!1;if(an()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Ww(gT(t,yield Mn()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),p=!0);const D=yield i.exchangeTokenPromise;return yield wt(t,D),i.token=D,{token:D.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),p=!0),a=yield hi(t).exchangeTokenPromise}catch(D){"appCheck/throttled"===D.code?Pe.warn(D.message):Pe.error(D),c=D}return a?c?y=Cm(a)?{token:a.token,internalError:c}:yT(c):(y={token:a.token},i.token=a,yield wt(t,a)):y=yT(c),p&&mT(t,y),y}),op.apply(this,arguments)}function up(n,e){const t=hi(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Tm(n){const{app:e}=n,t=hi(e);let i=t.tokenRefresher;i||(i=function kv(n){const{app:e}=n;return new lT((0,de.Z)(function*(){let i;if(i=hi(e).token?yield Dh(n,!0):yield Dh(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=hi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function mT(n,e){const t=hi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function Cm(n){return n.expireTimeMillis-Date.now()>0}function yT(n){return{token:Rv(Nv),error:n}}class zT{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=hi(this.app);for(const t of e)up(this.app,t.next);return Promise.resolve()}}const TT="app-check-internal";!function aC(){(0,_i._registerComponent)(new Eo.wA("app-check",n=>function KT(n,e){return new zT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(TT).initialize()})),(0,_i._registerComponent)(new Eo.wA(TT,n=>function ZT(n){return{getToken:e=>Dh(n,e),addTokenListener:e=>function ap(n,e,t,i){const{app:a}=n,c=hi(a);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:i,type:e}],c.token&&Cm(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),Tm(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Tm(n))}(n,"INTERNAL",e),removeTokenListener:e=>up(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_i.registerVersion)("@firebase/app-check","0.6.3")}();class db{constructor(){return(0,un.vb)("app-check")}}typeof window<"u"&&window;var hC=F(9260);const ST=new I.OlP("angularfire2.auth.use-emulator"),AT=new I.OlP("angularfire2.auth.settings"),xT=new I.OlP("angularfire2.auth.tenant-id"),MT=new I.OlP("angularfire2.auth.langugage-code"),NT=new I.OlP("angularfire2.auth.use-device-language"),RT=new I.OlP("angularfire.auth.persistence"),kT=(n,e,t,i,a,c,p,y)=>(0,zr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const D=e.runOutsideAngular(()=>n.auth());if(t&&D.useEmulator(...t),i&&(D.tenantId=i),D.languageCode=a,c&&D.useDeviceLanguage(),p)for(const[C,x]of Object.entries(p))D.settings[C]=x;return y&&D.setPersistence(y),D},[t,i,a,c,p,y]);let PT=(()=>{class n{constructor(t,i,a,c,p,y,D,C,x,k,q,te){const me=new Lw.x,Ve=Yn(void 0).pipe((0,Iv.Q)(p.outsideAngular),oc(()=>c.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,407)))),(0,Qn.U)(()=>(0,zr.on)(t,c,i)),(0,Qn.U)(Ze=>kT(Ze,c,y,C,x,k,D,q)),QD({bufferSize:1,refCount:!1}));if(fr(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Yn(null);else{Ve.pipe(function Bw(n,e){const t=arguments.length>=2;return i=>i.pipe(n?wo((a,c)=>n(a,c,i)):bu.y,XD(1),t?wm(e):eb(()=>new JD))}()).subscribe();const Ht=Ve.pipe(oc(Bt=>Bt.getRedirectResult().then(Ft=>Ft,()=>null)),un.iC,QD({bufferSize:1,refCount:!1})),Jt=Ve.pipe(oc(Bt=>new vs.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>Bt.onAuthStateChanged(Gt=>Ft.next(Gt),Gt=>Ft.error(Gt),()=>Ft.complete()))})))),Ut=Ve.pipe(oc(Bt=>new vs.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>Bt.onIdTokenChanged(Gt=>Ft.next(Gt),Gt=>Ft.error(Gt),()=>Ft.complete()))}))));this.authState=Ht.pipe(wv(Jt),(0,sp.R)(p.outsideAngular),(0,Iv.Q)(p.insideAngular)),this.user=Ht.pipe(wv(Ut),(0,sp.R)(p.outsideAngular),(0,Iv.Q)(p.insideAngular)),this.idToken=this.user.pipe(oc(Bt=>Bt?(0,Is.D)(Bt.getIdToken()):Yn(null))),this.idTokenResult=this.user.pipe(oc(Bt=>Bt?(0,Is.D)(Bt.getIdTokenResult()):Yn(null))),this.credential=(0,Jb.T)(Ht,me,this.authState.pipe(wo(Bt=>!Bt))).pipe((0,Qn.U)(Bt=>Bt?.user?Bt:null),(0,sp.R)(p.outsideAngular),(0,Iv.Q)(p.insideAngular))}return(0,zr.pX)(this,Ve,c,{spy:{apply:(Ze,Ht,Jt)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&Jt.then(Ut=>me.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(zr.Dh),I.LFG(zr.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(un.HU),I.LFG(ST,8),I.LFG(AT,8),I.LFG(xT,8),I.LFG(MT,8),I.LFG(NT,8),I.LFG(RT,8),I.LFG(db,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function OT(n,e){return function pC(n,e=Pc.z){return new vs.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function fb(n,e){return OT(n,e).pipe((0,Qn.U)(t=>({payload:t,type:"query"})))}function Kw(n,e){return fb(n,e).pipe(Ql(void 0),vo(),(0,Qn.U)(([t,i])=>{const a=i.payload.docChanges(),c=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((p,y)=>{const D=a.find(x=>x.doc.ref.isEqual(p.ref)),C=t?.payload.docs.find(x=>x.ref.isEqual(p.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(p.metadata)||!D&&C&&JSON.stringify(C.metadata)===JSON.stringify(p.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:p}})}),c}))}function FT(n,e,t){return Kw(n,t).pipe(Tr((i,a)=>function mC(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function yC(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return pb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pb(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(c=>c.payload),e),[]),function Io(n,e=bu.y){return n=n??Jl,(0,si.e)((t,i)=>{let a,c=!0;t.subscribe((0,yi.x)(i,p=>{const y=e(p);(c||!n(a,y))&&(c=!1,a=y,i.next(p))}))})}(),(0,Qn.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function pb(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function LT(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class VT{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Kw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Qn.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(Ql(void 0),vo(),wo(([i,a])=>a.length>0||!i),(0,Qn.U)(([i,a])=>a),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=LT(e);return FT(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return fb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qn.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),un.iC)}get(e){return(0,Is.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new BT(this.ref.doc(e),this.afs)}}class BT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:c}=$T(i,t);return new VT(a,c,this.afs)}snapshotChanges(){return function gC(n,e){return OT(n,e).pipe(Ql(void 0),vo(),(0,Qn.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Is.D)(this.ref.get(e)).pipe(un.iC)}}class _C{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Kw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qn.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),wo(t=>t.length>0),un.iC):Kw(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=LT(e);return FT(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return fb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qn.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),un.iC)}get(e){return(0,Is.D)(this.query.get(e)).pipe(un.iC)}}const UT=new I.OlP("angularfire2.enableFirestorePersistence"),jT=new I.OlP("angularfire2.firestore.persistenceSettings"),vC=new I.OlP("angularfire2.firestore.settings"),IC=new I.OlP("angularfire2.firestore.use-emulator");function $T(n,e=(t=>t)){return{query:e(n),ref:n}}let HT=(()=>{class n{constructor(t,i,a,c,p,y,D,C,x,k,q,te,me,Ve,Ze,Ht,Jt){this.schedulers=D;const Ut=(0,zr.on)(t,y,i),Bt=x;k&&kT(Ut,y,q,me,Ve,Ze,te,Ht),[this.firestore,this.persistenceEnabled$]=(0,zr.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const Ft=y.runOutsideAngular(()=>Ut.firestore());if(c&&Ft.settings(c),Bt&&Ft.useEmulator(...Bt),a&&!fr(p)){const Gt=()=>{try{return(0,Is.D)(Ft.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Jr){return typeof console<"u"&&console.warn(Jr),Yn(!1)}};return[Ft,y.runOutsideAngular(Gt)]}return[Ft,Yn(!1)]},[c,Bt,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:p}=$T(a,i),y=this.schedulers.ngZone.run(()=>c);return new VT(y,p,this)}collectionGroup(t,i){const a=i||(p=>p),c=this.firestore.collectionGroup(t);return new _C(a(c),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new BT(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(zr.Dh),I.LFG(zr.xv,8),I.LFG(UT,8),I.LFG(vC,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(un.HU),I.LFG(jT,8),I.LFG(IC,8),I.LFG(PT,8),I.LFG(ST,8),I.LFG(AT,8),I.LFG(xT,8),I.LFG(MT,8),I.LFG(NT,8),I.LFG(RT,8),I.LFG(db,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wC=(()=>{class n{constructor(){hC.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:UT,useValue:!0},{provide:jT,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[HT]}),n})(),EC=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("todos")}addTodo(t){this.firestoreCollection.add({title:t,isDone:!1})}updateTodoStatus(t,i){this.firestoreCollection.doc(t).update({isDone:i})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(HT))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DC(n,e){if(1&n){const t=I.EpF();I.TgZ(0,"li",12)(1,"span")(2,"i",13),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onStatusChange(c.id,!c.isDone))}),I.qZA(),I._uU(3),I.TgZ(4,"span",14),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onDelete(c.id))}),I._UZ(5,"i",15),I.qZA()()()}if(2&n){const t=e.$implicit;I.xp6(2),I.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),I.xp6(1),I.hij(" ",t.title," ")}}let bC=(()=>{class n{constructor(t){this.todoService=t,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((i,a)=>i.isDone-a.isDone)})}onClick(t){t.value&&(this.todoService.addTodo(t.value),t.value="")}onStatusChange(t,i){this.todoService.updateTodoStatus(t,i)}onDelete(t){this.todoService.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(EC))},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Title goes here",1,"form-control","border-0","py-3","shadow-none"],["titleInput",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-danger",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,i){if(1&t){const a=I.EpF();I.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),I._uU(3,"To Do List"),I.qZA()(),I.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),I._UZ(8,"input",7,8),I.TgZ(10,"button",9),I.NdJ("click",function(){I.CHM(a);const p=I.MAs(9);return I.KtG(i.onClick(p))}),I._UZ(11,"i",10),I.qZA()()(),I.YNc(12,DC,6,2,"li",11),I.qZA()()()}2&t&&(I.xp6(12),I.Q6J("ngForOf",i.todos))},dependencies:[sn,Fs],encapsulation:2}),n})(),TC=(()=>{class n{constructor(){this.title="todoApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(t,i){1&t&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2),I._UZ(3,"app-todo"),I.qZA()()())},dependencies:[bC]}),n})();const GT_firebaseConfig={apiKey:"AIzaSyCBZ84J2FjJZtdoZxRAFW9OstdI7NCOS3E",authDomain:"todoapp-964a6.firebaseapp.com",projectId:"todoapp-964a6",storageBucket:"todoapp-964a6.appspot.com",messagingSenderId:"981047624296",appId:"1:981047624296:web:f827fc99a3e61d9b33b1dd",measurementId:"G-37RLHL31S6"};let CC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n,bootstrap:[TC]}),n.\u0275inj=I.cJS({imports:[Mc,zr.hO.initializeApp(GT_firebaseConfig),wC]}),n})();(0,I.G48)(),_u().bootstrapModule(CC).catch(n=>console.error(n))},2011:(yt,xe,F)=>{F.d(xe,{Dh:()=>ce,GT:()=>ae,cc:()=>Me,hO:()=>Ye,on:()=>$,pX:()=>X,xv:()=>_e});var I=F(4650),Q=F(9260),P=F(7184);yt=F.hmd(yt);const re=["ngOnDestroy"],X=(he,qe,et,Ie={})=>new Proxy(he,{get:(fe,we)=>et.runOutsideAngular(()=>{var Le;if(he[we])return!(null===(Le=Ie?.spy)||void 0===Le)&&Le.get&&Ie.spy.get(we,he[we]),he[we];if(re.indexOf(we)>-1)return()=>{};const Be=qe.toPromise().then(V=>{const se=V&&V[we];return"function"==typeof se?se.bind(V):se&&se.then?se.then(Re=>et.run(()=>Re)):et.run(()=>se)});return new Proxy(()=>{},{get:(V,se)=>Be[se],apply:(V,se,Re)=>Be.then(tt=>{var ht;const Qe=tt&&tt(...Re);return!(null===(ht=Ie?.spy)||void 0===ht)&&ht.apply&&Ie.spy.apply(we,Re,Qe),Qe})})})}),ae=(he,qe)=>{qe.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Ie=>{Object.defineProperty(he.prototype,Ie,Object.getOwnPropertyDescriptor(et.prototype||et,Ie))})})};class ue{constructor(qe){return qe}}const ce=new I.OlP("angularfire2.app.options"),_e=new I.OlP("angularfire2.app.name");function $(he,qe,et){const fe="object"==typeof et&&et||{};fe.name=fe.name||"string"==typeof et&&et||"[DEFAULT]";const Le=Q.Z.apps.filter(Be=>Be&&Be.name===fe.name)[0]||qe.runOutsideAngular(()=>Q.Z.initializeApp(he,fe));try{JSON.stringify(he)!==JSON.stringify(Le.options)&&U("error",`${Le.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Le)}const U=(he,...qe)=>{(0,I.X6Q)()&&typeof console<"u"&&console[he](...qe)},K={provide:ue,useFactory:$,deps:[ce,I.R0b,[new I.FiY,_e]]};let Ye=(()=>{class he{constructor(et){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",I.q4F.full,et.toString())}static initializeApp(et,Ie){return{ngModule:he,providers:[{provide:ce,useValue:et},{provide:_e,useValue:Ie}]}}}return he.\u0275fac=function(et){return new(et||he)(I.LFG(I.Lbi))},he.\u0275mod=I.oAB({type:he}),he.\u0275inj=I.cJS({providers:[K]}),he})();function Me(he,qe,et,Ie,fe){const[,we,Le]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===he)||[];if(we)return function Ne(he,qe){try{return he.toString()===qe.toString()}catch{return he===qe}}(fe,Le)||(le("error",`${qe} was already initialized on the ${et} Firebase App with different settings.${We?" You may need to reload as Firebase is not HMR aware.":""}`),le("warn",{is:fe,was:Le})),we;{const Be=Ie();return globalThis.\u0275AngularfireInstanceCache.push([he,Be,fe]),Be}}const We=!!yt.hot,le=(he,...qe)=>{(0,I.X6Q)()&&typeof console<"u"&&console[he](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7184:(yt,xe,F)=>{F.d(xe,{q4:()=>wo,iC:()=>Hn,HU:()=>To,vb:()=>Do,JM:()=>at});var I=F(4650),Q=F(259),P=F(5861),re=F(9681),X=F(2090),ae=F(4859),ue=F(1877),ce=F(8766);const _e="@firebase/installations",$="0.6.3",K=`w:${$}`,Ye="FIS_v2",qe=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(E){return E instanceof X.ZR&&E.code.includes("request-failed")}function Ie({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function fe(E){return{token:E.token,requestStatus:2,expiresIn:tt(E.expiresIn),creationTime:Date.now()}}function we(E,b){return Le.apply(this,arguments)}function Le(){return(Le=(0,P.Z)(function*(E,b){const O=(yield b.json()).error;return qe.create("request-failed",{requestName:E,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function Be({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function V(E,{refreshToken:b}){const A=Be(E);return A.append("Authorization",function ht(E){return`${Ye} ${E}`}(b)),A}function se(E){return Re.apply(this,arguments)}function Re(){return(Re=(0,P.Z)(function*(E){const b=yield E();return b.status>=500&&b.status<600?E():b})).apply(this,arguments)}function tt(E){return Number(E.replace("s","000"))}function Qe(E,b){return ee.apply(this,arguments)}function ee(){return(ee=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:b},{fid:A}){const O=Ie(E),H=Be(E),Y=b.getImmediate({optional:!0});if(Y){const Je=yield Y.getHeartbeatsHeader();Je&&H.append("x-firebase-client",Je)}const Ke={method:"POST",headers:H,body:JSON.stringify({fid:A,authVersion:Ye,appId:E.appId,sdkVersion:K})},$e=yield se(()=>fetch(O,Ke));if($e.ok){const Je=yield $e.json();return{fid:Je.fid||A,registrationStatus:2,refreshToken:Je.refreshToken,authToken:fe(Je.authToken)}}throw yield we("Create Installation",$e)})).apply(this,arguments)}function oe(E){return new Promise(b=>{setTimeout(b,E)})}const Ce=/^[cdef][\w-]{21}$/;function ve(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function ct(E){return function pe(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Ce.test(A)?A:""}catch{return""}}function At(E){return`${E.appName}!${E.appId}`}const rn=new Map;function nt(E,b){const A=At(E);Tt(A,b),function Ln(E,b){const A=function gn(){return!Nn&&"BroadcastChannel"in self&&(Nn=new BroadcastChannel("[Firebase] FID Change"),Nn.onmessage=E=>{Tt(E.data.key,E.data.fid)}),Nn}();A&&A.postMessage({key:E,fid:b}),function wn(){0===rn.size&&Nn&&(Nn.close(),Nn=null)}()}(A,b)}function Tt(E,b){const A=rn.get(E);if(A)for(const O of A)O(b)}let Nn=null;const Xr="firebase-installations-store";let ei=null;function zo(){return ei||(ei=(0,ce.X3)("firebase-installations-database",1,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Xr)}})),ei}function Xe(E,b){return Er.apply(this,arguments)}function Er(){return(Er=(0,P.Z)(function*(E,b){const A=At(E),H=(yield zo()).transaction(Xr,"readwrite"),Y=H.objectStore(Xr),De=yield Y.get(A);return yield Y.put(b,A),yield H.done,(!De||De.fid!==b.fid)&&nt(E,b.fid),b})).apply(this,arguments)}function is(E){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,P.Z)(function*(E){const b=At(E),O=(yield zo()).transaction(Xr,"readwrite");yield O.objectStore(Xr).delete(b),yield O.done})).apply(this,arguments)}function ti(E,b){return Di.apply(this,arguments)}function Di(){return(Di=(0,P.Z)(function*(E,b){const A=At(E),H=(yield zo()).transaction(Xr,"readwrite"),Y=H.objectStore(Xr),De=yield Y.get(A),Ke=b(De);return void 0===Ke?yield Y.delete(A):yield Y.put(Ke,A),yield H.done,Ke&&(!De||De.fid!==Ke.fid)&&nt(E,Ke.fid),Ke})).apply(this,arguments)}function Rn(E){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,P.Z)(function*(E){let b;const A=yield ti(E.appConfig,O=>{const H=ln(O),Y=_t(E,H);return b=Y.registrationPromise,Y.installationEntry});return""===A.fid?{installationEntry:yield b}:{installationEntry:A,registrationPromise:b}})).apply(this,arguments)}function ln(E){return Nt(E||{fid:ve(),registrationStatus:0})}function _t(E,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(qe.create("app-offline"))};const A={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},O=function lt(E,b){return nn.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:O}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:lr(E)}:{installationEntry:b}}function nn(){return(nn=(0,P.Z)(function*(E,b){try{const A=yield Qe(E,b);return Xe(E.appConfig,A)}catch(A){throw et(A)&&409===A.customData.serverCode?yield is(E.appConfig):yield Xe(E.appConfig,{fid:b.fid,registrationStatus:0}),A}})).apply(this,arguments)}function lr(E){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,P.Z)(function*(E){let b=yield $r(E.appConfig);for(;1===b.registrationStatus;)yield oe(100),b=yield $r(E.appConfig);if(0===b.registrationStatus){const{installationEntry:A,registrationPromise:O}=yield Rn(E);return O||A}return b})).apply(this,arguments)}function $r(E){return ti(E,b=>{if(!b)throw qe.create("installation-not-found");return Nt(b)})}function Nt(E){return function ss(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Xt(E,b){return bi.apply(this,arguments)}function bi(){return(bi=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:b},A){const O=en(E,A),H=V(E,A),Y=b.getImmediate({optional:!0});if(Y){const Je=yield Y.getHeartbeatsHeader();Je&&H.append("x-firebase-client",Je)}const Ke={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:K,appId:E.appId}})},$e=yield se(()=>fetch(O,Ke));if($e.ok)return fe(yield $e.json());throw yield we("Generate Auth Token",$e)})).apply(this,arguments)}function en(E,{fid:b}){return`${Ie(E)}/${b}/authTokens:generate`}function qn(E){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,P.Z)(function*(E,b=!1){let A;const O=yield ti(E.appConfig,Y=>{if(!Lt(Y))throw qe.create("not-registered");const De=Y.authToken;if(!b&&B(De))return Y;if(1===De.requestStatus)return A=st(E,b),Y;{if(!navigator.onLine)throw qe.create("app-offline");const Ke=W(Y);return A=xt(E,Ke),Ke}});return A?yield A:O.authToken})).apply(this,arguments)}function st(E,b){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,P.Z)(function*(E,b){let A=yield it(E.appConfig);for(;1===A.authToken.requestStatus;)yield oe(100),A=yield it(E.appConfig);const O=A.authToken;return 0===O.requestStatus?qn(E,b):O})).apply(this,arguments)}function it(E){return ti(E,b=>{if(!Lt(b))throw qe.create("not-registered");return function ye(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function xt(E,b){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,P.Z)(function*(E,b){try{const A=yield Xt(E,b),O=Object.assign(Object.assign({},b),{authToken:A});return yield Xe(E.appConfig,O),A}catch(A){if(!et(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const O=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Xe(E.appConfig,O)}else yield is(E.appConfig);throw A}})).apply(this,arguments)}function Lt(E){return void 0!==E&&2===E.registrationStatus}function B(E){return 2===E.requestStatus&&!function L(E){const b=Date.now();return b<E.creationTime||E.creationTime+E.expiresIn<b+36e5}(E)}function W(E){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:b})}function He(){return(He=(0,P.Z)(function*(E){const b=E,{installationEntry:A,registrationPromise:O}=yield Rn(b);return O?O.catch(console.error):qn(b).catch(console.error),A.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,P.Z)(function*(E,b=!1){const A=E;return yield cn(A),(yield qn(A,b)).token})).apply(this,arguments)}function cn(E){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,P.Z)(function*(E){const{registrationPromise:b}=yield Rn(E);b&&(yield b)})).apply(this,arguments)}function os(E){return qe.create("missing-app-config-values",{valueName:E})}const ro="installations",mn=E=>{const b=E.getProvider("app").getImmediate(),A=function pn(E){if(!E||!E.options)throw os("App Configuration");if(!E.name)throw os("App Name");const b=["projectId","apiKey","appId"];for(const A of b)if(!E.options[A])throw os(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(b);return{app:b,appConfig:A,heartbeatServiceProvider:(0,re._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ps=E=>{const b=E.getProvider("app").getImmediate(),A=(0,re._getProvider)(b,ro).getImmediate();return{getId:()=>function z(E){return He.apply(this,arguments)}(A),getToken:H=>function pt(E){return Qt.apply(this,arguments)}(A,H)}};(function Wa(){(0,re._registerComponent)(new ae.wA(ro,mn,"PUBLIC")),(0,re._registerComponent)(new ae.wA("installations-internal",Ps,"PRIVATE"))})(),(0,re.registerVersion)(_e,$),(0,re.registerVersion)(_e,$,"esm2017");const Ti="@firebase/remote-config",jn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Th{constructor(b,A,O,H){this.client=b,this.storage=A,this.storageCache=O,this.logger=H}isCachedDataFresh(b,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-A,H=O<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${H}.`),H}fetch(b){var A=this;return(0,P.Z)(function*(){const[O,H]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(H&&A.isCachedDataFresh(b.cacheMaxAgeMillis,O))return H;b.eTag=H&&H.eTag;const Y=yield A.client.fetch(b),De=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&De.push(A.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(De),Y})()}}function dc(E=navigator){return E.languages&&E.languages[0]||E.language}class hc{constructor(b,A,O,H,Y,De){this.firebaseInstallations=b,this.sdkVersion=A,this.namespace=O,this.projectId=H,this.apiKey=Y,this.appId=De}fetch(b){var A=this;return(0,P.Z)(function*(){const[O,H]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),De=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},$e={sdk_version:A.sdkVersion,app_instance_id:O,app_instance_id_token:H,app_id:A.appId,language_code:dc()},Je={method:"POST",headers:Ke,body:JSON.stringify($e)},Ct=fetch(De,Je),Dt=new Promise((Yr,Es)=>{b.signal.addEventListener(()=>{const Tu=new Error("The operation was aborted.");Tu.name="AbortError",Es(Tu)})});let Zr;try{yield Promise.race([Ct,Dt]),Zr=yield Ct}catch(Yr){let Es="fetch-client-network";throw"AbortError"===Yr?.name&&(Es="fetch-timeout"),jn.create(Es,{originalErrorMessage:Yr?.message})}let vn=Zr.status;const Pr=Zr.headers.get("ETag")||void 0;let So,Ao;if(200===Zr.status){let Yr;try{Yr=yield Zr.json()}catch(Es){throw jn.create("fetch-client-parse",{originalErrorMessage:Es?.message})}So=Yr.entries,Ao=Yr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ao?vn=500:"NO_CHANGE"===Ao?vn=304:("NO_TEMPLATE"===Ao||"EMPTY_CONFIG"===Ao)&&(So={}),304!==vn&&200!==vn)throw jn.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:Pr,config:So}})()}}class cp{constructor(b,A){this.client=b,this.storage=A}fetch(b){var A=this;return(0,P.Z)(function*(){const O=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(b,O)})()}attemptFetch(b,{throttleEndTimeMillis:A,backoffCount:O}){var H=this;return(0,P.Z)(function*(){yield function Kn(E,b){return new Promise((A,O)=>{const H=Math.max(b-Date.now(),0),Y=setTimeout(A,H);E.addEventListener(()=>{clearTimeout(Y),O(jn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,A);try{const Y=yield H.client.fetch(b);return yield H.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function Nl(E){if(!(E instanceof X.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Y))throw Y;const De={throttleEndTimeMillis:Date.now()+(0,X.$s)(O),backoffCount:O+1};return yield H.storage.setThrottleMetadata(De),H.attemptFetch(b,De)}})()}}class Rl{constructor(b,A,O,H,Y){this.app=b,this._client=A,this._storageCache=O,this._storage=H,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fc(E,b){const A=E.target.error||void 0;return jn.create(b,{originalErrorMessage:A&&A?.message})}const ls="app_namespace_store";class fp{constructor(b,A,O,H=function hp(){return new Promise((E,b)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=O=>{b(fc(O,"storage-open"))},A.onsuccess=O=>{E(O.target.result)},A.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(ls,{keyPath:"compositeKey"})}}catch(A){b(jn.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=b,this.appName=A,this.namespace=O,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var A=this;return(0,P.Z)(function*(){const O=yield A.openDbPromise;return new Promise((H,Y)=>{const Ke=O.transaction([ls],"readonly").objectStore(ls),$e=A.createCompositeKey(b);try{const Je=Ke.get($e);Je.onerror=Ct=>{Y(fc(Ct,"storage-get"))},Je.onsuccess=Ct=>{const Dt=Ct.target.result;H(Dt?Dt.value:void 0)}}catch(Je){Y(jn.create("storage-get",{originalErrorMessage:Je?.message}))}})})()}set(b,A){var O=this;return(0,P.Z)(function*(){const H=yield O.openDbPromise;return new Promise((Y,De)=>{const $e=H.transaction([ls],"readwrite").objectStore(ls),Je=O.createCompositeKey(b);try{const Ct=$e.put({compositeKey:Je,value:A});Ct.onerror=Dt=>{De(fc(Dt,"storage-set"))},Ct.onsuccess=()=>{Y()}}catch(Ct){De(jn.create("storage-set",{originalErrorMessage:Ct?.message}))}})})()}delete(b){var A=this;return(0,P.Z)(function*(){const O=yield A.openDbPromise;return new Promise((H,Y)=>{const Ke=O.transaction([ls],"readwrite").objectStore(ls),$e=A.createCompositeKey(b);try{const Je=Ke.delete($e);Je.onerror=Ct=>{Y(fc(Ct,"storage-delete"))},Je.onsuccess=()=>{H()}}catch(Je){Y(jn.create("storage-delete",{originalErrorMessage:Je?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Pl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.Z)(function*(){const A=b.storage.getLastFetchStatus(),O=b.storage.getLastSuccessfulFetchTimestampMillis(),H=b.storage.getActiveConfig(),Y=yield A;Y&&(b.lastFetchStatus=Y);const De=yield O;De&&(b.lastSuccessfulFetchTimestampMillis=De);const Ke=yield H;Ke&&(b.activeConfig=Ke)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Ka(){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,P.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch{return!1}})).apply(this,arguments)}!function ds(){(0,re._registerComponent)(new ae.wA("remote-config",function E(b,{instanceIdentifier:A}){const O=b.getProvider("app").getImmediate(),H=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jn.create("registration-window");if(!(0,X.hl)())throw jn.create("indexed-db-unavailable");const{projectId:Y,apiKey:De,appId:Ke}=O.options;if(!Y)throw jn.create("registration-project-id");if(!De)throw jn.create("registration-api-key");if(!Ke)throw jn.create("registration-app-id");const $e=new fp(Ke,O.name,A=A||"firebase"),Je=new Pl($e),Ct=new ue.Yd(Ti);Ct.logLevel=ue.in.ERROR;const Dt=new hc(H,re.SDK_VERSION,A,Y,De,Ke),Zr=new cp(Dt,$e),vn=new Th(Zr,$e,Je,Ct),Pr=new Rl(O,vn,Je,$e,Ct);return function hr(E){const b=(0,X.m9)(E);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Pr),Pr},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Ti,"0.4.3"),(0,re.registerVersion)(Ti,"0.4.3","esm2017")}();const Ci="/firebase-messaging-sw.js",Li="/firebase-cloud-messaging-push-scope",Vi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yo="google.c.a.c_id",Za="google.c.a.c_l",pc="google.c.a.ts",Sh="google.c.a.e";var Bi=(()=>{return(E=Bi||(Bi={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",Bi;var E})();function ni(E){const b=new Uint8Array(E);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gr(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(A),H=new Uint8Array(O.length);for(let Y=0;Y<O.length;++Y)H[Y]=O.charCodeAt(Y);return H}const io="fcm_token_details_db",fr="fcm_token_object_Store";function Ah(E){return xh.apply(this,arguments)}function xh(){return xh=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(io))return null;let b=null;return(yield(0,ce.X3)(io,5,{upgrade:(O=(0,P.Z)(function*(H,Y,De,Ke){var $e;if(Y<2||!H.objectStoreNames.contains(fr))return;const Je=Ke.objectStore(fr),Ct=yield Je.index("fcmSenderId").get(E);if(yield Je.clear(),Ct)if(2===Y){const Dt=Ct;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;b={token:Dt.fcmToken,createTime:null!==($e=Dt.createTime)&&void 0!==$e?$e:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:ni(Dt.vapidKey)}}}else if(3===Y){const Dt=Ct;b={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:ni(Dt.auth),p256dh:ni(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:ni(Dt.vapidKey)}}}else if(4===Y){const Dt=Ct;b={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:ni(Dt.auth),p256dh:ni(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:ni(Dt.vapidKey)}}}}),function(Y,De,Ke,$e){return O.apply(this,arguments)})})).close(),yield(0,ce.Lj)(io),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),En(b)?b:null;var O}),xh.apply(this,arguments)}function En(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:b}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const ri="firebase-messaging-store";let br=null;function Ya(){return br||(br=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(E,b)=>{0===b&&E.createObjectStore(ri)}})),br}function so(E){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,P.Z)(function*(E){const b=gi(E),O=yield(yield Ya()).transaction(ri).objectStore(ri).get(b);if(O)return O;{const H=yield Ah(E.appConfig.senderId);if(H)return yield qt(E,H),H}})).apply(this,arguments)}function qt(E,b){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,P.Z)(function*(E,b){const A=gi(E),H=(yield Ya()).transaction(ri,"readwrite");return yield H.objectStore(ri).put(b,A),yield H.done,b})).apply(this,arguments)}function Vs(E){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,P.Z)(function*(E){const b=gi(E),O=(yield Ya()).transaction(ri,"readwrite");yield O.objectStore(ri).delete(b),yield O.done})).apply(this,arguments)}function gi({appConfig:E}){return E.appId}const _n=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mt(E,b){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(E,b){const A=yield yc(E),O=be(b),H={method:"POST",headers:A,body:JSON.stringify(O)};let Y;try{Y=yield(yield fetch(ji(E.appConfig),H)).json()}catch(De){throw _n.create("token-subscribe-failed",{errorInfo:De?.toString()})}if(Y.error)throw _n.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw _n.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Mh(E,b){return tu.apply(this,arguments)}function tu(){return(tu=(0,P.Z)(function*(E,b){const A=yield yc(E),O=be(b.subscriptionOptions),H={method:"PATCH",headers:A,body:JSON.stringify(O)};let Y;try{Y=yield(yield fetch(`${ji(E.appConfig)}/${b.token}`,H)).json()}catch(De){throw _n.create("token-update-failed",{errorInfo:De?.toString()})}if(Y.error)throw _n.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw _n.create("token-update-no-token");return Y.token})).apply(this,arguments)}function nu(E,b){return mc.apply(this,arguments)}function mc(){return(mc=(0,P.Z)(function*(E,b){const O={method:"DELETE",headers:yield yc(E)};try{const Y=yield(yield fetch(`${ji(E.appConfig)}/${b}`,O)).json();if(Y.error)throw _n.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(H){throw _n.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function ji({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function yc(E){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,P.Z)(function*({appConfig:E,installations:b}){const A=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function be({p256dh:E,auth:b,endpoint:A,vapidKey:O}){const H={web:{endpoint:A,auth:b,p256dh:E}};return O!==Vi&&(H.web.applicationPubKey=O),H}const jt=6048e5;function ru(E){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(E){const b=yield _c(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:b.endpoint,auth:ni(b.getKey("auth")),p256dh:ni(b.getKey("p256dh"))},O=yield so(E.firebaseDependencies);if(O){if(Vl(O.subscriptionOptions,A))return Date.now()>=O.createTime+jt?oo(E,{token:O.token,createTime:Date.now(),subscriptionOptions:A}):O.token;try{yield nu(E.firebaseDependencies,O.token)}catch(H){console.warn(H)}return Xo(E.firebaseDependencies,A)}return Xo(E.firebaseDependencies,A)})).apply(this,arguments)}function Dn(E){return su.apply(this,arguments)}function su(){return(su=(0,P.Z)(function*(E){const b=yield so(E.firebaseDependencies);b&&(yield nu(E.firebaseDependencies,b.token),yield Vs(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function oo(E,b){return ii.apply(this,arguments)}function ii(){return(ii=(0,P.Z)(function*(E,b){try{const A=yield Mh(E.firebaseDependencies,b),O=Object.assign(Object.assign({},b),{token:A,createTime:Date.now()});return yield qt(E.firebaseDependencies,O),A}catch(A){throw yield Dn(E),A}})).apply(this,arguments)}function Xo(E,b){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(E,b){const O={token:yield Mt(E,b),createTime:Date.now(),subscriptionOptions:b};return yield qt(E,O),O.token})).apply(this,arguments)}function _c(E,b){return vc.apply(this,arguments)}function vc(){return(vc=(0,P.Z)(function*(E,b){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gr(b)})})).apply(this,arguments)}function Vl(E,b){return b.vapidKey===E.vapidKey&&b.endpoint===E.endpoint&&b.auth===E.auth&&b.p256dh===E.p256dh}function ta(E){const b={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function bn(E,b){if(!b.notification)return;E.notification={};const A=b.notification.title;A&&(E.notification.title=A);const O=b.notification.body;O&&(E.notification.body=O);const H=b.notification.image;H&&(E.notification.image=H);const Y=b.notification.icon;Y&&(E.notification.icon=Y)}(b,E),function Si(E,b){!b.data||(E.data=b.data)}(b,E),function Ic(E,b){var A,O,H,Y,De;if(!(b.fcmOptions||null!==(A=b.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const Ke=null!==(H=null===(O=b.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==H?H:null===(Y=b.notification)||void 0===Y?void 0:Y.click_action;Ke&&(E.fcmOptions.link=Ke);const $e=null===(De=b.fcmOptions)||void 0===De?void 0:De.analytics_label;$e&&(E.fcmOptions.analyticsLabel=$e)}(b,E),b}function Bs(E){return"object"==typeof E&&!!E&&Yo in E}function $i(E,b){const A=[];for(let O=0;O<E.length;O++)A.push(E.charAt(O)),O<b.length&&A.push(b.charAt(O));return A.join("")}function na(E){return _n.create("missing-app-config-values",{valueName:E})}$i("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$i("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mp{constructor(b,A,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function gp(E){if(!E||!E.options)throw na("App Configuration Object");if(!E.name)throw na("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const O of b)if(!A[O])throw na(O);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:H,installations:A,analyticsProvider:O}}_delete(){return Promise.resolve()}}function wc(E){return ou.apply(this,arguments)}function ou(){return(ou=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Ci,{scope:Li}),E.swRegistration.update().catch(()=>{})}catch(b){throw _n.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function ra(E,b){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,P.Z)(function*(E,b){if(!b&&!E.swRegistration&&(yield wc(E)),b||!E.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw _n.create("invalid-sw-registration");E.swRegistration=b}})).apply(this,arguments)}function ia(E,b){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,P.Z)(function*(E,b){b?E.vapidKey=b:E.vapidKey||(E.vapidKey=Vi)})).apply(this,arguments)}function uu(){return(uu=(0,P.Z)(function*(E,b){if(!navigator)throw _n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _n.create("permission-blocked");return yield ia(E,b?.vapidKey),yield ra(E,b?.serviceWorkerRegistration),ru(E)})).apply(this,arguments)}function bc(E,b,A){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,P.Z)(function*(E,b,A){const O=Cc(b);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:A[Yo],message_name:A[Za],message_time:A[pc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cc(E){switch(E){case Bi.NOTIFICATION_CLICKED:return"notification_open";case Bi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Us(){return(Us=(0,P.Z)(function*(E,b){const A=b.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===Bi.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(ta(A)):E.onMessageHandler.next(ta(A)));const O=A.data;Bs(O)&&"1"===O[Sh]&&(yield bc(E,A.messageType,O))})).apply(this,arguments)}const js="@firebase/messaging",Zn=E=>{const b=new mp(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Bl(E,b){return Us.apply(this,arguments)}(b,A)),b},Wr=E=>{const b=E.getProvider("messaging").getImmediate();return{getToken:O=>function au(E,b){return uu.apply(this,arguments)}(b,O)}};function Ul(){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,P.Z)(function*(){try{yield(0,X.eu)()}catch{return!1}return typeof window<"u"&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dn(){(0,re._registerComponent)(new ae.wA("messaging",Zn,"PUBLIC")),(0,re._registerComponent)(new ae.wA("messaging-internal",Wr,"PRIVATE")),(0,re.registerVersion)(js,"0.12.3"),(0,re.registerVersion)(js,"0.12.3","esm2017")}();const uo="analytics",Hl="firebase_id",Hs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js",Tn=new ue.Yd("@firebase/analytics");function fu(E){return Promise.all(E.map(b=>b.catch(A=>A)))}function pu(E,b){const A=document.createElement("script");A.src=`${hu}?l=${E}&id=${b}`,A.async=!0,document.head.appendChild(A)}function Rh(E,b,A,O,H,Y){return co.apply(this,arguments)}function co(){return(co=(0,P.Z)(function*(E,b,A,O,H,Y){const De=O[H];try{if(De)yield b[De];else{const $e=(yield fu(A)).find(Je=>Je.measurementId===H);$e&&(yield b[$e.appId])}}catch(Ke){Tn.error(Ke)}E("config",H,Y)})).apply(this,arguments)}function lo(E,b,A,O,H){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,P.Z)(function*(E,b,A,O,H){try{let Y=[];if(H&&H.send_to){let De=H.send_to;Array.isArray(De)||(De=[De]);const Ke=yield fu(A);for(const $e of De){const Je=Ke.find(Dt=>Dt.measurementId===$e),Ct=Je&&b[Je.appId];if(!Ct){Y=[];break}Y.push(Ct)}}0===Y.length&&(Y=Object.values(b)),yield Promise.all(Y),E("event",O,H||{})}catch(Y){Tn.error(Y)}})).apply(this,arguments)}function Wl(E){const b=window.document.getElementsByTagName("script");for(const A of Object.values(b))if(A.src&&A.src.includes(hu)&&A.src.includes(E))return A;return null}const or=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ua=new class Ai{constructor(b={},A=1e3){this.throttleMetadata=b,this.intervalMillis=A}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,A){this.throttleMetadata[b]=A}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function zl(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function ca(E){return xc.apply(this,arguments)}function xc(){return(xc=(0,P.Z)(function*(E){var b;const{appId:A,apiKey:O}=E,H={method:"GET",headers:zl(O)},Y=Hs.replace("{app-id}",A),De=yield fetch(Y,H);if(200!==De.status&&304!==De.status){let Ke="";try{const $e=yield De.json();null!==(b=$e.error)&&void 0!==b&&b.message&&(Ke=$e.error.message)}catch{}throw or.create("config-fetch-failed",{httpStatus:De.status,responseMessage:Ke})}return De.json()})).apply(this,arguments)}function kn(E){return mi.apply(this,arguments)}function mi(){return(mi=(0,P.Z)(function*(E,b=ua,A){const{appId:O,apiKey:H,measurementId:Y}=E.options;if(!O)throw or.create("no-app-id");if(!H){if(Y)return{measurementId:Y,appId:O};throw or.create("no-api-key")}const De=b.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new _u;return setTimeout((0,P.Z)(function*(){Ke.abort()}),void 0!==A?A:6e4),mu({appId:O,apiKey:H,measurementId:Y},De,Ke,b)})).apply(this,arguments)}function mu(E,b,A){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,P.Z)(function*(E,{throttleEndTimeMillis:b,backoffCount:A},O,H=ua){var Y;const{appId:De,measurementId:Ke}=E;try{yield la(O,b)}catch($e){if(Ke)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${$e?.message}]`),{appId:De,measurementId:Ke};throw $e}try{const $e=yield ca(E);return H.deleteThrottleMetadata(De),$e}catch($e){const Je=$e;if(!yu(Je)){if(H.deleteThrottleMetadata(De),Ke)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${Je?.message}]`),{appId:De,measurementId:Ke};throw $e}const Ct=503===Number(null===(Y=Je?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,X.$s)(A,H.intervalMillis,30):(0,X.$s)(A,H.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+Ct,backoffCount:A+1};return H.setThrottleMetadata(De,Dt),Tn.debug(`Calling attemptFetch again in ${Ct} millis`),mu(E,Dt,O,H)}})).apply(this,arguments)}function la(E,b){return new Promise((A,O)=>{const H=Math.max(b-Date.now(),0),Y=setTimeout(A,H);E.addEventListener(()=>{clearTimeout(Y),O(or.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function yu(E){if(!(E instanceof X.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}class _u{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let ps,fa;function gs(){return(gs=(0,P.Z)(function*(E,b,A,O,H){if(H&&H.global)E("event",A,O);else{const Y=yield b;E("event",A,Object.assign(Object.assign({},O),{send_to:Y}))}})).apply(this,arguments)}function zs(E){fa=E}function Rc(E){ps=E}function ys(){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,P.Z)(function*(){if(!(0,X.hl)())return Tn.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(E){return Tn.warn(or.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function fo(){return(fo=(0,P.Z)(function*(E,b,A,O,H,Y,De){var Ke;const $e=kn(E);$e.then(vn=>{A[vn.measurementId]=vn.appId,E.options.measurementId&&vn.measurementId!==E.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>Tn.error(vn)),b.push($e);const Je=ys().then(vn=>{if(vn)return O.getId()}),[Ct,Dt]=yield Promise.all([$e,Je]);Wl(Y)||pu(Y,Ct.measurementId),fa&&(H("consent","default",fa),zs(void 0)),H("js",new Date);const Zr=null!==(Ke=De?.config)&&void 0!==Ke?Ke:{};return Zr.origin="firebase",Zr.update=!0,null!=Dt&&(Zr[Hl]=Dt),H("config",Ct.measurementId,Zr),ps&&(H("set",ps),Rc(void 0)),Ct.measurementId})).apply(this,arguments)}class wu{constructor(b){this.app=b}_delete(){return delete qr[this.app.options.appId],Promise.resolve()}}let qr={},_s=[];const po={};let mo,Ks,go="dataLayer",pa=!1;function Sm(E,b,A){!function yp(){const E=[];if((0,X.ru)()&&E.push("This is a browser extension environment."),(0,X.zI)()||E.push("Cookies are not available."),E.length>0){const b=E.map((O,H)=>`(${H+1}) ${O}`).join(" "),A=or.create("invalid-analytics-context",{errorInfo:b});Tn.warn(A.message)}}();const O=E.options.appId;if(!O)throw or.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw or.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=qr[O])throw or.create("already-exists",{id:O});if(!pa){!function Gl(E){let b=[];Array.isArray(window[E])?b=window[E]:window[E]=b}(go);const{wrappedGtag:Y,gtagCore:De}=function sa(E,b,A,O,H){let Y=function(...De){window[O].push(arguments)};return window[H]&&"function"==typeof window[H]&&(Y=window[H]),window[H]=function gu(E,b,A,O){function Y(){return(Y=(0,P.Z)(function*(De,Ke,$e){try{"event"===De?yield lo(E,b,A,Ke,$e):"config"===De?yield Rh(E,b,A,O,Ke,$e):"consent"===De?E("consent","update",$e):E("set",Ke)}catch(Je){Tn.error(Je)}})).apply(this,arguments)}return function H(De,Ke,$e){return Y.apply(this,arguments)}}(Y,E,b,A),{gtagCore:Y,wrappedGtag:window[H]}}(qr,_s,po,go,"gtag");Ks=Y,mo=De,pa=!0}return qr[O]=function ho(E,b,A,O,H,Y,De){return fo.apply(this,arguments)}(E,_s,po,b,mo,go,A),new wu(E)}function xm(){return kh.apply(this,arguments)}function kh(){return(kh=(0,P.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch{return!1}})).apply(this,arguments)}const Is="@firebase/analytics";!function Yn(){(0,re._registerComponent)(new ae.wA(uo,(b,{options:A})=>Sm(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,re._registerComponent)(new ae.wA("analytics-internal",function E(b){try{const A=b.getProvider(uo).getImmediate();return{logEvent:(O,H,Y)=>function Pc(E,b,A,O){E=(0,X.m9)(E),function Kl(E,b,A,O,H){return gs.apply(this,arguments)}(Ks,qr[E.app.options.appId],b,A,O).catch(H=>Tn.error(H))}(A,O,H,Y)}}catch(A){throw or.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,re.registerVersion)(Is,"0.9.3"),(0,re.registerVersion)(Is,"0.9.3","esm2017")}();var un=F(4408),_o=F(7565);const si=new class Hi extends _o.v{}(class Yl extends un.o{constructor(b,A){super(b,A),this.scheduler=b,this.work=A}schedule(b,A=0){return A>0?super.schedule(b,A):(this.delay=A,this.state=b,this.scheduler.flush(this),this)}execute(b,A){return A>0||this.closed?super.execute(b,A):this._execute(b,A)}requestAsyncId(b,A,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(b,A,O):(b.flush(this),0)}});var yi=F(4986),vo=F(576),Qn=F(4482),Du=F(5403),Tr=F(4671),Io=F(9468),Jl=F(5363);const wo=new I.GfV("7.5.0"),zr="__angularfire_symbol__analyticsIsSupportedValue",Xl="__angularfire_symbol__analyticsIsSupported",ga="__angularfire_symbol__remoteConfigIsSupportedValue",de="__angularfire_symbol__remoteConfigIsSupported",_i="__angularfire_symbol__messagingIsSupportedValue",Eo="__angularfire_symbol__messagingIsSupported";function at(E,b,A){if(b){if(1===b.length)return b[0];const Y=b.filter(De=>De.app===A);if(1===Y.length)return Y[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[Xl]||(globalThis[Xl]=xm().then(E=>globalThis[zr]=E).catch(()=>globalThis[zr]=!1)),globalThis[Eo]||(globalThis[Eo]=Ul().then(E=>globalThis[_i]=E).catch(()=>globalThis[_i]=!1)),globalThis[de]||(globalThis[de]=Ka().then(E=>globalThis[ga]=E).catch(()=>globalThis[ga]=!1));const Do=(E,b)=>{const A=b?[b]:(0,Q.C6)(),O=[];return A.forEach(H=>{H.container.getProvider(E).instances.forEach(De=>{O.includes(De)||O.push(De)})}),O};function vt(){}class Zs{constructor(b,A=si){this.zone=b,this.delegate=A}now(){return this.delegate.now()}schedule(b,A,O){const H=this.zone;return this.delegate.schedule(function(De){H.runGuarded(()=>{b.apply(this,[De])})},A,O)}}class bo{constructor(b){this.zone=b,this.task=null}call(b,A){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vt,{},vt,vt)),A.pipe(function bu(E,b,A){const O=(0,vo.m)(E)||b||A?{next:E,error:b,complete:A}:E;return O?(0,Qn.e)((H,Y)=>{var De;null===(De=O.subscribe)||void 0===De||De.call(O);let Ke=!0;H.subscribe((0,Du.x)(Y,$e=>{var Je;null===(Je=O.next)||void 0===Je||Je.call(O,$e),Y.next($e)},()=>{var $e;Ke=!1,null===($e=O.complete)||void 0===$e||$e.call(O),Y.complete()},$e=>{var Je;Ke=!1,null===(Je=O.error)||void 0===Je||Je.call(O,$e),Y.error($e)},()=>{var $e,Je;Ke&&(null===($e=O.unsubscribe)||void 0===$e||$e.call(O)),null===(Je=O.finalize)||void 0===Je||Je.call(O)}))}):Tr.y}({next:O,complete:O,error:O})).subscribe(b).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let To=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Zs(Zone.current)),this.insideAngular=A.run(()=>new Zs(Zone.current,yi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(I.LFG(I.R0b))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Kr(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Hn(E){return Kr(),function Co(E){return function(A){return(A=A.lift(new bo(E.ngZone))).pipe((0,Io.R)(E.outsideAngular),(0,Jl.Q)(E.insideAngular))}}(Kr())(E)}},2090:(yt,xe,F)=>{F.d(xe,{$s:()=>it,BH:()=>fe,G6:()=>pe,L:()=>ce,LL:()=>rn,Pz:()=>Ie,Sg:()=>we,UG:()=>V,US:()=>ae,ZB:()=>U,ZR:()=>At,aH:()=>et,b$:()=>tt,eu:()=>Ae,hl:()=>Ce,jU:()=>se,m9:()=>Lt,ne:()=>Vn,pd:()=>Di,r3:()=>fi,ru:()=>Re,tV:()=>_e,uI:()=>Be,vZ:()=>Xe,w1:()=>Qe,xO:()=>Wn,xb:()=>ei,z$:()=>Le,zI:()=>ve,zd:()=>ti});const re=function(B){const L=[];let W=0;for(let ye=0;ye<B.length;ye++){let z=B.charCodeAt(ye);z<128?L[W++]=z:z<2048?(L[W++]=z>>6|192,L[W++]=63&z|128):55296==(64512&z)&&ye+1<B.length&&56320==(64512&B.charCodeAt(ye+1))?(z=65536+((1023&z)<<10)+(1023&B.charCodeAt(++ye)),L[W++]=z>>18|240,L[W++]=z>>12&63|128,L[W++]=z>>6&63|128,L[W++]=63&z|128):(L[W++]=z>>12|224,L[W++]=z>>6&63|128,L[W++]=63&z|128)}return L},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let z=0;z<B.length;z+=3){const He=B[z],pt=z+1<B.length,Qt=pt?B[z+1]:0,cn=z+2<B.length,Wt=cn?B[z+2]:0;let Vt=(15&Qt)<<2|Wt>>6,ir=63&Wt;cn||(ir=64,pt||(Vt=64)),ye.push(W[He>>2],W[(3&He)<<4|Qt>>4],W[Vt],W[ir])}return ye.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(re(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let W=0,ye=0;for(;W<B.length;){const z=B[W++];if(z<128)L[ye++]=String.fromCharCode(z);else if(z>191&&z<224){const He=B[W++];L[ye++]=String.fromCharCode((31&z)<<6|63&He)}else if(z>239&&z<365){const cn=((7&z)<<18|(63&B[W++])<<12|(63&B[W++])<<6|63&B[W++])-65536;L[ye++]=String.fromCharCode(55296+(cn>>10)),L[ye++]=String.fromCharCode(56320+(1023&cn))}else{const He=B[W++],pt=B[W++];L[ye++]=String.fromCharCode((15&z)<<12|(63&He)<<6|63&pt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const W=L?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let z=0;z<B.length;){const He=W[B.charAt(z++)],Qt=z<B.length?W[B.charAt(z)]:0;++z;const Wt=z<B.length?W[B.charAt(z)]:64;++z;const je=z<B.length?W[B.charAt(z)]:64;if(++z,null==He||null==Qt||null==Wt||null==je)throw Error();ye.push(He<<2|Qt>>4),64!==Wt&&(ye.push(Qt<<4&240|Wt>>2),64!==je&&ye.push(Wt<<6&192|je))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ce=function(B){return function(B){const L=re(B);return ae.encodeByteArray(L,!0)}(B).replace(/\./g,"")},_e=function(B){try{return ae.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function U(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const W in L)!L.hasOwnProperty(W)||!K(W)||(B[W]=U(B[W],L[W]));return B}function K(B){return"__proto__"!==B}const le=()=>{try{return function Ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&_e(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},et=()=>{var B;return null===(B=le())||void 0===B?void 0:B.config},Ie=B=>{var L;return null===(L=le())||void 0===L?void 0:L[`_${B}`]};class fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,W)=>{this.resolve=L,this.reject=W})}wrapCallback(L){return(W,ye)=>{W?this.reject(W):this.resolve(ye),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(W):L(W,ye))}}}function we(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=L||"demo-project",z=B.iat||0,He=B.sub||B.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:z,exp:z+3600,auth_time:z,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(pt)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function V(){var B;const L=null===(B=le())||void 0===B?void 0:B.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function se(){return"object"==typeof self&&self.self===self}function Re(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function pe(){return!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ce(){try{return"object"==typeof indexedDB}catch{return!1}}function Ae(){return new Promise((B,L)=>{try{let W=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(ye);z.onsuccess=()=>{z.result.close(),W||self.indexedDB.deleteDatabase(ye),B(!0)},z.onupgradeneeded=()=>{W=!1},z.onerror=()=>{var He;L((null===(He=z.error)||void 0===He?void 0:He.message)||"")}}catch(W){L(W)}})}function ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class At extends Error{constructor(L,W,ye){super(W),this.code=L,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,At.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(L,W,ye){this.service=L,this.serviceName=W,this.errors=ye}create(L,...W){const ye=W[0]||{},z=`${this.service}/${L}`,He=this.errors[L],pt=He?function nt(B,L){return B.replace(Kt,(W,ye)=>{const z=L[ye];return null!=z?String(z):`<${ye}?>`})}(He,ye):"Error";return new At(z,`${this.serviceName}: ${pt} (${z}).`,ye)}}const Kt=/\{\$([^}]+)}/g;function fi(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function ei(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Xe(B,L){if(B===L)return!0;const W=Object.keys(B),ye=Object.keys(L);for(const z of W){if(!ye.includes(z))return!1;const He=B[z],pt=L[z];if(Er(He)&&Er(pt)){if(!Xe(He,pt))return!1}else if(He!==pt)return!1}for(const z of ye)if(!W.includes(z))return!1;return!0}function Er(B){return null!==B&&"object"==typeof B}function Wn(B){const L=[];for(const[W,ye]of Object.entries(B))Array.isArray(ye)?ye.forEach(z=>{L.push(encodeURIComponent(W)+"="+encodeURIComponent(z))}):L.push(encodeURIComponent(W)+"="+encodeURIComponent(ye));return L.length?"&"+L.join("&"):""}function ti(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[z,He]=ye.split("=");L[decodeURIComponent(z)]=decodeURIComponent(He)}}),L}function Di(B){const L=B.indexOf("?");if(!L)return"";const W=B.indexOf("#",L);return B.substring(L,W>0?W:void 0)}function Vn(B,L){const W=new ln(B,L);return W.subscribe.bind(W)}class ln{constructor(L,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{L(this)}).catch(ye=>{this.error(ye)})}next(L){this.forEachObserver(W=>{W.next(L)})}error(L){this.forEachObserver(W=>{W.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,W,ye){let z;if(void 0===L&&void 0===W&&void 0===ye)throw new Error("Missing Observer.");z=function lt(B,L){if("object"!=typeof B||null===B)return!1;for(const W of L)if(W in B&&"function"==typeof B[W])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:W,complete:ye},void 0===z.next&&(z.next=nn),void 0===z.error&&(z.error=nn),void 0===z.complete&&(z.complete=nn);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),He}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,L)}sendOne(L,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{W(this.observers[L])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}function it(B,L=1e3,W=2){const ye=L*Math.pow(W,B),z=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+z)}function Lt(B){return B&&B._delegate?B._delegate:B}},8306:(yt,xe,F)=>{F.d(xe,{y:()=>$});var I=F(2961),Q=F(727),P=F(8822),re=F(4671);var ue=F(2416),ce=F(576),_e=F(2806);let $=(()=>{class Me{constructor(We){We&&(this._subscribe=We)}lift(We){const le=new Me;return le.source=this,le.operator=We,le}subscribe(We,le,he){const qe=function Ye(Me){return Me&&Me instanceof I.Lv||function K(Me){return Me&&(0,ce.m)(Me.next)&&(0,ce.m)(Me.error)&&(0,ce.m)(Me.complete)}(Me)&&(0,Q.Nn)(Me)}(We)?We:new I.Hp(We,le,he);return(0,_e.x)(()=>{const{operator:et,source:Ie}=this;qe.add(et?et.call(qe,Ie):Ie?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(We){try{return this._subscribe(We)}catch(le){We.error(le)}}forEach(We,le){return new(le=U(le))((he,qe)=>{const et=new I.Hp({next:Ie=>{try{We(Ie)}catch(fe){qe(fe),et.unsubscribe()}},error:qe,complete:he});this.subscribe(et)})}_subscribe(We){var le;return null===(le=this.source)||void 0===le?void 0:le.subscribe(We)}[P.L](){return this}pipe(...We){return function ae(Me){return 0===Me.length?re.y:1===Me.length?Me[0]:function(We){return Me.reduce((le,he)=>he(le),We)}}(We)(this)}toPromise(We){return new(We=U(We))((le,he)=>{let qe;this.subscribe(et=>qe=et,et=>he(et),()=>le(qe))})}}return Me.create=Ne=>new Me(Ne),Me})();function U(Me){var Ne;return null!==(Ne=Me??ue.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(yt,xe,F)=>{F.d(xe,{x:()=>ue});var I=F(8306),Q=F(727);const re=(0,F(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=F(8737),ae=F(2806);let ue=(()=>{class _e extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const K=new ce(this,this);return K.operator=U,K}_throwIfClosed(){if(this.closed)throw new re}next(U){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(U)}})}error(U){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:K}=this;for(;K.length;)K.shift().error(U)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:K,isStopped:Ye,observers:Me}=this;return K||Ye?Q.Lc:(this.currentObservers=null,Me.push(U),new Q.w0(()=>{this.currentObservers=null,(0,X.P)(Me,U)}))}_checkFinalizedStatuses(U){const{hasError:K,thrownError:Ye,isStopped:Me}=this;K?U.error(Ye):Me&&U.complete()}asObservable(){const U=new I.y;return U.source=this,U}}return _e.create=($,U)=>new ce($,U),_e})();class ce extends ue{constructor($,U){super(),this.destination=$,this.source=U}next($){var U,K;null===(K=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===K||K.call(U,$)}error($){var U,K;null===(K=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===K||K.call(U,$)}complete(){var $,U;null===(U=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===U||U.call($)}_subscribe($){var U,K;return null!==(K=null===(U=this.source)||void 0===U?void 0:U.subscribe($))&&void 0!==K?K:Q.Lc}}},2961:(yt,xe,F)=>{F.d(xe,{Hp:()=>We,Lv:()=>K});var I=F(576),Q=F(727),P=F(2416),re=F(7849);function X(){}const ae=_e("C",void 0,void 0);function _e(Ie,fe,we){return{kind:Ie,value:fe,error:we}}var $=F(3410),U=F(2806);class K extends Q.w0{constructor(fe){super(),this.isStopped=!1,fe?(this.destination=fe,(0,Q.Nn)(fe)&&fe.add(this)):this.destination=et}static create(fe,we,Le){return new We(fe,we,Le)}next(fe){this.isStopped?qe(function ce(Ie){return _e("N",Ie,void 0)}(fe),this):this._next(fe)}error(fe){this.isStopped?qe(function ue(Ie){return _e("E",void 0,Ie)}(fe),this):(this.isStopped=!0,this._error(fe))}complete(){this.isStopped?qe(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(fe){this.destination.next(fe)}_error(fe){try{this.destination.error(fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Me(Ie,fe){return Ye.call(Ie,fe)}class Ne{constructor(fe){this.partialObserver=fe}next(fe){const{partialObserver:we}=this;if(we.next)try{we.next(fe)}catch(Le){le(Le)}}error(fe){const{partialObserver:we}=this;if(we.error)try{we.error(fe)}catch(Le){le(Le)}else le(fe)}complete(){const{partialObserver:fe}=this;if(fe.complete)try{fe.complete()}catch(we){le(we)}}}class We extends K{constructor(fe,we,Le){let Be;if(super(),(0,I.m)(fe)||!fe)Be={next:fe??void 0,error:we??void 0,complete:Le??void 0};else{let V;this&&P.v.useDeprecatedNextContext?(V=Object.create(fe),V.unsubscribe=()=>this.unsubscribe(),Be={next:fe.next&&Me(fe.next,V),error:fe.error&&Me(fe.error,V),complete:fe.complete&&Me(fe.complete,V)}):Be=fe}this.destination=new Ne(Be)}}function le(Ie){P.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Ie):(0,re.h)(Ie)}function qe(Ie,fe){const{onStoppedNotification:we}=P.v;we&&$.z.setTimeout(()=>we(Ie,fe))}const et={closed:!0,next:X,error:function he(Ie){throw Ie},complete:X}},727:(yt,xe,F)=>{F.d(xe,{Lc:()=>ae,w0:()=>X,Nn:()=>ue});var I=F(576);const P=(0,F(3888).d)(_e=>function(U){_e(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((K,Ye)=>`${Ye+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var re=F(8737);class X{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Me of U)Me.remove(this);else U.remove(this);const{initialTeardown:K}=this;if((0,I.m)(K))try{K()}catch(Me){$=Me instanceof P?Me.errors:[Me]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Me of Ye)try{ce(Me)}catch(Ne){$=$??[],Ne instanceof P?$=[...$,...Ne.errors]:$.push(Ne)}}if($)throw new P($)}}add($){var U;if($&&$!==this)if(this.closed)ce($);else{if($ instanceof X){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push($)}}_hasParent($){const{_parentage:U}=this;return U===$||Array.isArray(U)&&U.includes($)}_addParent($){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push($),U):U?[U,$]:$}_removeParent($){const{_parentage:U}=this;U===$?this._parentage=null:Array.isArray(U)&&(0,re.P)(U,$)}remove($){const{_finalizers:U}=this;U&&(0,re.P)(U,$),$ instanceof X&&$._removeParent(this)}}X.EMPTY=(()=>{const _e=new X;return _e.closed=!0,_e})();const ae=X.EMPTY;function ue(_e){return _e instanceof X||_e&&"closed"in _e&&(0,I.m)(_e.remove)&&(0,I.m)(_e.add)&&(0,I.m)(_e.unsubscribe)}function ce(_e){(0,I.m)(_e)?_e():_e.unsubscribe()}},2416:(yt,xe,F)=>{F.d(xe,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(yt,xe,F)=>{F.d(xe,{E:()=>Q});const Q=new(F(8306).y)(X=>X.complete())},8996:(yt,xe,F)=>{F.d(xe,{D:()=>fe});var I=F(8421),Q=F(5363),P=F(9468),ae=F(8306),ce=F(2202),_e=F(576),$=F(9672);function K(we,Le){if(!we)throw new Error("Iterable cannot be null");return new ae.y(Be=>{(0,$.f)(Be,Le,()=>{const V=we[Symbol.asyncIterator]();(0,$.f)(Be,Le,()=>{V.next().then(se=>{se.done?Be.complete():Be.next(se.value)})},0,!0)})})}var Ye=F(3670),Me=F(8239),Ne=F(1144),We=F(6495),le=F(2206),he=F(4532),qe=F(3260);function fe(we,Le){return Le?function Ie(we,Le){if(null!=we){if((0,Ye.c)(we))return function re(we,Le){return(0,I.Xf)(we).pipe((0,P.R)(Le),(0,Q.Q)(Le))}(we,Le);if((0,Ne.z)(we))return function ue(we,Le){return new ae.y(Be=>{let V=0;return Le.schedule(function(){V===we.length?Be.complete():(Be.next(we[V++]),Be.closed||this.schedule())})})}(we,Le);if((0,Me.t)(we))return function X(we,Le){return(0,I.Xf)(we).pipe((0,P.R)(Le),(0,Q.Q)(Le))}(we,Le);if((0,le.D)(we))return K(we,Le);if((0,We.T)(we))return function U(we,Le){return new ae.y(Be=>{let V;return(0,$.f)(Be,Le,()=>{V=we[ce.h](),(0,$.f)(Be,Le,()=>{let se,Re;try{({value:se,done:Re}=V.next())}catch(tt){return void Be.error(tt)}Re?Be.complete():Be.next(se)},0,!0)}),()=>(0,_e.m)(V?.return)&&V.return()})}(we,Le);if((0,qe.L)(we))return function et(we,Le){return K((0,qe.Q)(we),Le)}(we,Le)}throw(0,he.z)(we)}(we,Le):(0,I.Xf)(we)}},8421:(yt,xe,F)=>{F.d(xe,{Xf:()=>Ye});var I=F(655),Q=F(1144),P=F(8239),re=F(8306),X=F(3670),ae=F(2206),ue=F(4532),ce=F(6495),_e=F(3260),$=F(576),U=F(7849),K=F(8822);function Ye(Ie){if(Ie instanceof re.y)return Ie;if(null!=Ie){if((0,X.c)(Ie))return function Me(Ie){return new re.y(fe=>{const we=Ie[K.L]();if((0,$.m)(we.subscribe))return we.subscribe(fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Q.z)(Ie))return function Ne(Ie){return new re.y(fe=>{for(let we=0;we<Ie.length&&!fe.closed;we++)fe.next(Ie[we]);fe.complete()})}(Ie);if((0,P.t)(Ie))return function We(Ie){return new re.y(fe=>{Ie.then(we=>{fe.closed||(fe.next(we),fe.complete())},we=>fe.error(we)).then(null,U.h)})}(Ie);if((0,ae.D)(Ie))return he(Ie);if((0,ce.T)(Ie))return function le(Ie){return new re.y(fe=>{for(const we of Ie)if(fe.next(we),fe.closed)return;fe.complete()})}(Ie);if((0,_e.L)(Ie))return function qe(Ie){return he((0,_e.Q)(Ie))}(Ie)}throw(0,ue.z)(Ie)}function he(Ie){return new re.y(fe=>{(function et(Ie,fe){var we,Le,Be,V;return(0,I.mG)(this,void 0,void 0,function*(){try{for(we=(0,I.KL)(Ie);!(Le=yield we.next()).done;)if(fe.next(Le.value),fe.closed)return}catch(se){Be={error:se}}finally{try{Le&&!Le.done&&(V=we.return)&&(yield V.call(we))}finally{if(Be)throw Be.error}}fe.complete()})})(Ie,fe).catch(we=>fe.error(we))})}},6451:(yt,xe,F)=>{F.d(xe,{T:()=>ae});var I=F(6131),Q=F(8421),P=F(515),re=F(7669),X=F(8996);function ae(...ue){const ce=(0,re.yG)(ue),_e=(0,re._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,I.J)(_e)((0,X.D)($,ce)):P.E}},5403:(yt,xe,F)=>{F.d(xe,{x:()=>Q});var I=F(2961);function Q(re,X,ae,ue,ce){return new P(re,X,ae,ue,ce)}class P extends I.Lv{constructor(X,ae,ue,ce,_e,$){super(X),this.onFinalize=_e,this.shouldUnsubscribe=$,this._next=ae?function(U){try{ae(U)}catch(K){X.error(K)}}:super._next,this._error=ce?function(U){try{ce(U)}catch(K){X.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(U){X.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(yt,xe,F)=>{F.d(xe,{U:()=>P});var I=F(4482),Q=F(5403);function P(re,X){return(0,I.e)((ae,ue)=>{let ce=0;ae.subscribe((0,Q.x)(ue,_e=>{ue.next(re.call(X,_e,ce++))}))})}},6131:(yt,xe,F)=>{F.d(xe,{J:()=>$});var I=F(4004),Q=F(8421),P=F(4482),re=F(9672),X=F(5403),ue=F(576);function ce(U,K,Ye=1/0){return(0,ue.m)(K)?ce((Me,Ne)=>(0,I.U)((We,le)=>K(Me,We,Ne,le))((0,Q.Xf)(U(Me,Ne))),Ye):("number"==typeof K&&(Ye=K),(0,P.e)((Me,Ne)=>function ae(U,K,Ye,Me,Ne,We,le,he){const qe=[];let et=0,Ie=0,fe=!1;const we=()=>{fe&&!qe.length&&!et&&K.complete()},Le=V=>et<Me?Be(V):qe.push(V),Be=V=>{We&&K.next(V),et++;let se=!1;(0,Q.Xf)(Ye(V,Ie++)).subscribe((0,X.x)(K,Re=>{Ne?.(Re),We?Le(Re):K.next(Re)},()=>{se=!0},void 0,()=>{if(se)try{for(et--;qe.length&&et<Me;){const Re=qe.shift();le?(0,re.f)(K,le,()=>Be(Re)):Be(Re)}we()}catch(Re){K.error(Re)}}))};return U.subscribe((0,X.x)(K,Le,()=>{fe=!0,we()})),()=>{he?.()}}(Me,Ne,U,Ye)))}var _e=F(4671);function $(U=1/0){return ce(_e.y,U)}},5363:(yt,xe,F)=>{F.d(xe,{Q:()=>re});var I=F(9672),Q=F(4482),P=F(5403);function re(X,ae=0){return(0,Q.e)((ue,ce)=>{ue.subscribe((0,P.x)(ce,_e=>(0,I.f)(ce,X,()=>ce.next(_e),ae),()=>(0,I.f)(ce,X,()=>ce.complete(),ae),_e=>(0,I.f)(ce,X,()=>ce.error(_e),ae)))})}},3099:(yt,xe,F)=>{F.d(xe,{B:()=>X});var I=F(8421),Q=F(7579),P=F(2961),re=F(4482);function X(ue={}){const{connector:ce=(()=>new Q.x),resetOnError:_e=!0,resetOnComplete:$=!0,resetOnRefCountZero:U=!0}=ue;return K=>{let Ye,Me,Ne,We=0,le=!1,he=!1;const qe=()=>{Me?.unsubscribe(),Me=void 0},et=()=>{qe(),Ye=Ne=void 0,le=he=!1},Ie=()=>{const fe=Ye;et(),fe?.unsubscribe()};return(0,re.e)((fe,we)=>{We++,!he&&!le&&qe();const Le=Ne=Ne??ce();we.add(()=>{We--,0===We&&!he&&!le&&(Me=ae(Ie,U))}),Le.subscribe(we),!Ye&&We>0&&(Ye=new P.Hp({next:Be=>Le.next(Be),error:Be=>{he=!0,qe(),Me=ae(et,_e,Be),Le.error(Be)},complete:()=>{le=!0,qe(),Me=ae(et,$),Le.complete()}}),(0,I.Xf)(fe).subscribe(Ye))})(K)}}function ae(ue,ce,..._e){if(!0===ce)return void ue();if(!1===ce)return;const $=new P.Hp({next:()=>{$.unsubscribe(),ue()}});return ce(..._e).subscribe($)}},9468:(yt,xe,F)=>{F.d(xe,{R:()=>Q});var I=F(4482);function Q(P,re=0){return(0,I.e)((X,ae)=>{ae.add(P.schedule(()=>X.subscribe(ae),re))})}},4408:(yt,xe,F)=>{F.d(xe,{o:()=>X});var I=F(727);class Q extends I.w0{constructor(ue,ce){super()}schedule(ue,ce=0){return this}}const P={setInterval(ae,ue,...ce){const{delegate:_e}=P;return _e?.setInterval?_e.setInterval(ae,ue,...ce):setInterval(ae,ue,...ce)},clearInterval(ae){const{delegate:ue}=P;return(ue?.clearInterval||clearInterval)(ae)},delegate:void 0};var re=F(8737);class X extends Q{constructor(ue,ce){super(ue,ce),this.scheduler=ue,this.work=ce,this.pending=!1}schedule(ue,ce=0){var _e;if(this.closed)return this;this.state=ue;const $=this.id,U=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(U,$,ce)),this.pending=!0,this.delay=ce,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(U,this.id,ce),this}requestAsyncId(ue,ce,_e=0){return P.setInterval(ue.flush.bind(ue,this),_e)}recycleAsyncId(ue,ce,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ce;null!=ce&&P.clearInterval(ce)}execute(ue,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ue,ce);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ce){let $,_e=!1;try{this.work(ue)}catch(U){_e=!0,$=U||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ce}=this,{actions:_e}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(_e,this),null!=ue&&(this.id=this.recycleAsyncId(ce,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(yt,xe,F)=>{F.d(xe,{v:()=>P});var I=F(6063);class Q{constructor(X,ae=Q.now){this.schedulerActionCtor=X,this.now=ae}schedule(X,ae=0,ue){return new this.schedulerActionCtor(this,X).schedule(ue,ae)}}Q.now=I.l.now;class P extends Q{constructor(X,ae=Q.now){super(X,ae),this.actions=[],this._active=!1}flush(X){const{actions:ae}=this;if(this._active)return void ae.push(X);let ue;this._active=!0;do{if(ue=X.execute(X.state,X.delay))break}while(X=ae.shift());if(this._active=!1,ue){for(;X=ae.shift();)X.unsubscribe();throw ue}}}},4986:(yt,xe,F)=>{F.d(xe,{z:()=>P});var I=F(4408);const P=new(F(7565).v)(I.o)},6063:(yt,xe,F)=>{F.d(xe,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(yt,xe,F)=>{F.d(xe,{z:()=>I});const I={setTimeout(Q,P,...re){const{delegate:X}=I;return X?.setTimeout?X.setTimeout(Q,P,...re):setTimeout(Q,P,...re)},clearTimeout(Q){const{delegate:P}=I;return(P?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(yt,xe,F)=>{F.d(xe,{h:()=>Q});const Q=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yt,xe,F)=>{F.d(xe,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(yt,xe,F)=>{F.d(xe,{_6:()=>ae,yG:()=>X});var I=F(576);function P(ue){return ue[ue.length-1]}function X(ue){return function Q(ue){return ue&&(0,I.m)(ue.schedule)}(P(ue))?ue.pop():void 0}function ae(ue,ce){return"number"==typeof P(ue)?ue.pop():ce}},8737:(yt,xe,F)=>{function I(Q,P){if(Q){const re=Q.indexOf(P);0<=re&&Q.splice(re,1)}}F.d(xe,{P:()=>I})},3888:(yt,xe,F)=>{function I(Q){const re=Q(X=>{Error.call(X),X.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}F.d(xe,{d:()=>I})},2806:(yt,xe,F)=>{F.d(xe,{O:()=>re,x:()=>P});var I=F(2416);let Q=null;function P(X){if(I.v.useDeprecatedSynchronousErrorHandling){const ae=!Q;if(ae&&(Q={errorThrown:!1,error:null}),X(),ae){const{errorThrown:ue,error:ce}=Q;if(Q=null,ue)throw ce}}else X()}function re(X){I.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=X)}},9672:(yt,xe,F)=>{function I(Q,P,re,X=0,ae=!1){const ue=P.schedule(function(){re(),ae?Q.add(this.schedule(null,X)):this.unsubscribe()},X);if(Q.add(ue),!ae)return ue}F.d(xe,{f:()=>I})},4671:(yt,xe,F)=>{function I(Q){return Q}F.d(xe,{y:()=>I})},1144:(yt,xe,F)=>{F.d(xe,{z:()=>I});const I=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(yt,xe,F)=>{F.d(xe,{D:()=>Q});var I=F(576);function Q(P){return Symbol.asyncIterator&&(0,I.m)(P?.[Symbol.asyncIterator])}},576:(yt,xe,F)=>{function I(Q){return"function"==typeof Q}F.d(xe,{m:()=>I})},3670:(yt,xe,F)=>{F.d(xe,{c:()=>P});var I=F(8822),Q=F(576);function P(re){return(0,Q.m)(re[I.L])}},6495:(yt,xe,F)=>{F.d(xe,{T:()=>P});var I=F(2202),Q=F(576);function P(re){return(0,Q.m)(re?.[I.h])}},8239:(yt,xe,F)=>{F.d(xe,{t:()=>Q});var I=F(576);function Q(P){return(0,I.m)(P?.then)}},3260:(yt,xe,F)=>{F.d(xe,{L:()=>re,Q:()=>P});var I=F(655),Q=F(576);function P(X){return(0,I.FC)(this,arguments,function*(){const ue=X.getReader();try{for(;;){const{value:ce,done:_e}=yield(0,I.qq)(ue.read());if(_e)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(ce)}}finally{ue.releaseLock()}})}function re(X){return(0,Q.m)(X?.getReader)}},4482:(yt,xe,F)=>{F.d(xe,{e:()=>P});var I=F(576);function P(re){return X=>{if(function Q(re){return(0,I.m)(re?.lift)}(X))return X.lift(function(ae){try{return re(ae,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(yt,xe,F)=>{F.d(xe,{h:()=>P});var I=F(2416),Q=F(3410);function P(re){Q.z.setTimeout(()=>{const{onUnhandledError:X}=I.v;if(!X)throw re;X(re)})}},4532:(yt,xe,F)=>{function I(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(xe,{z:()=>I})},655:(yt,xe,F)=>{function re(ee,oe){var pe={};for(var Ce in ee)Object.prototype.hasOwnProperty.call(ee,Ce)&&oe.indexOf(Ce)<0&&(pe[Ce]=ee[Ce]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(Ce=Object.getOwnPropertySymbols(ee);Ae<Ce.length;Ae++)oe.indexOf(Ce[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ee,Ce[Ae])&&(pe[Ce[Ae]]=ee[Ce[Ae]])}return pe}function K(ee,oe,pe,Ce){return new(pe||(pe=Promise))(function(ve,ct){function At(Kt){try{nt(Ce.next(Kt))}catch(ft){ct(ft)}}function rn(Kt){try{nt(Ce.throw(Kt))}catch(ft){ct(ft)}}function nt(Kt){Kt.done?ve(Kt.value):function Ae(ve){return ve instanceof pe?ve:new pe(function(ct){ct(ve)})}(Kt.value).then(At,rn)}nt((Ce=Ce.apply(ee,oe||[])).next())})}function Ie(ee){return this instanceof Ie?(this.v=ee,this):new Ie(ee)}function fe(ee,oe,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Ce=pe.apply(ee,oe||[]),ve=[];return Ae={},ct("next"),ct("throw"),ct("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function ct(Tt){Ce[Tt]&&(Ae[Tt]=function(Ln){return new Promise(function(Nn,gn){ve.push([Tt,Ln,Nn,gn])>1||At(Tt,Ln)})})}function At(Tt,Ln){try{!function rn(Tt){Tt.value instanceof Ie?Promise.resolve(Tt.value.v).then(nt,Kt):ft(ve[0][2],Tt)}(Ce[Tt](Ln))}catch(Nn){ft(ve[0][3],Nn)}}function nt(Tt){At("next",Tt)}function Kt(Tt){At("throw",Tt)}function ft(Tt,Ln){Tt(Ln),ve.shift(),ve.length&&At(ve[0][0],ve[0][1])}}function Le(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,oe=ee[Symbol.asyncIterator];return oe?oe.call(ee):(ee=function We(ee){var oe="function"==typeof Symbol&&Symbol.iterator,pe=oe&&ee[oe],Ce=0;if(pe)return pe.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&Ce>=ee.length&&(ee=void 0),{value:ee&&ee[Ce++],done:!ee}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),pe={},Ce("next"),Ce("throw"),Ce("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function Ce(ve){pe[ve]=ee[ve]&&function(ct){return new Promise(function(At,rn){!function Ae(ve,ct,At,rn){Promise.resolve(rn).then(function(nt){ve({value:nt,done:At})},ct)}(At,rn,(ct=ee[ve](ct)).done,ct.value)})}}}F.d(xe,{FC:()=>fe,KL:()=>Le,_T:()=>re,mG:()=>K,qq:()=>Ie})},4650:(yt,xe,F)=>{F.d(xe,{$8M:()=>wu,AFp:()=>lv,AaK:()=>ce,CHM:()=>ru,CZH:()=>ip,EJc:()=>rc,EpF:()=>qd,F4k:()=>Z0,FYo:()=>ay,FiY:()=>O,G48:()=>Lw,GfV:()=>Sn,JOm:()=>qi,KtG:()=>iu,LFG:()=>$n,Lbi:()=>Cl,Lck:()=>dD,MAs:()=>Qu,NdJ:()=>Uy,OlP:()=>hn,Q6J:()=>gl,QGY:()=>La,Qsj:()=>Ot,R0b:()=>Ns,RDi:()=>g,Rgc:()=>fh,SBq:()=>df,TTD:()=>Vi,TgZ:()=>Wd,X6Q:()=>KD,Xpm:()=>Ee,Y36:()=>rl,YNc:()=>Yu,Yjl:()=>ye,Yz7:()=>nt,ZZ4:()=>Tv,_UZ:()=>_g,_c5:()=>Gw,_uU:()=>dI,aQg:()=>Eh,cJS:()=>ft,cg1:()=>r_,dDg:()=>Yb,dqk:()=>nn,eFA:()=>ic,eoX:()=>gv,g9A:()=>Tw,h0i:()=>Pi,hGG:()=>ob,hij:()=>xg,ifc:()=>lt,ip1:()=>cv,kL8:()=>bI,lG2:()=>W,lri:()=>kw,oAB:()=>Lt,oxw:()=>jy,q4F:()=>mt,qLn:()=>Ue,qZA:()=>xf,rWj:()=>jD,sBO:()=>oc,sIi:()=>Zu,s_b:()=>ph,soG:()=>gm,vHH:()=>Ne,wAp:()=>It,xp6:()=>Ad,zSh:()=>Td,zs3:()=>es});var I=F(7579),Q=F(727),P=F(8306),re=F(6451),X=F(3099);function ae(r){for(let s in r)if(r[s]===ae)return s;throw Error("Could not find renamed property on target object.")}function ce(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ce).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function _e(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const $=ae({__forward_ref__:ae});function U(r){return r.__forward_ref__=U,r.toString=function(){return ce(this())},r}function K(r){return function Ye(r){return"function"==typeof r&&r.hasOwnProperty($)&&r.__forward_ref__===U}(r)?r():r}class Ne extends Error{constructor(s,o){super(function We(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function le(r){return"string"==typeof r?r:null==r?"":String(r)}function fe(r,s){throw new Ne(-201,!1)}function Ae(r,s){null==r&&function ve(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function nt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function ft(r){return{providers:r.providers||[],imports:r.imports||[]}}function Tt(r){return Nn(r,fi)||Nn(r,ei)}function Nn(r,s){return r.hasOwnProperty(s)?r[s]:null}function jr(r){return r&&(r.hasOwnProperty(Xr)||r.hasOwnProperty(zo))?r[Xr]:null}const fi=ae({\u0275prov:ae}),Xr=ae({\u0275inj:ae}),ei=ae({ngInjectableDef:ae}),zo=ae({ngInjectorDef:ae});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let Er;function Wn(r){const s=Er;return Er=r,s}function ti(r,s,o){const u=Tt(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Xe.Optional?null:void 0!==s?s:void fe(ce(r))}function Rn(r){return{toString:r}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),lt=(()=>{return(r=lt||(lt={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",lt;var r})();const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$r={},Nt=[],ss=ae({\u0275cmp:ae}),Xt=ae({\u0275dir:ae}),bi=ae({\u0275pipe:ae}),en=ae({\u0275mod:ae}),qn=ae({\u0275fac:ae}),Nr=ae({__NG_ELEMENT_ID__:ae});let st=0;function Ee(r){return Rn(()=>{const o=!0===r.standalone,u={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||Nt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||lt.Emulated,id:"c"+st++,styles:r.styles||Nt,_:null,setInput:null,schemas:r.schemas||null,tView:null},h=r.dependencies,m=r.features;return l.inputs=L(r.inputs,u),l.outputs=L(r.outputs),m&&m.forEach(v=>v(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(xt).filter(Rt):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(pt).filter(Rt):null,l})}function xt(r){return z(r)||He(r)}function Rt(r){return null!==r}function Lt(r){return Rn(()=>({type:r.type,bootstrap:r.bootstrap||Nt,declarations:r.declarations||Nt,imports:r.imports||Nt,exports:r.exports||Nt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function L(r,s){if(null==r)return $r;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),o[l]=u,s&&(s[l]=h)}return o}const W=Ee;function ye(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function z(r){return r[ss]||null}function He(r){return r[Xt]||null}function pt(r){return r[bi]||null}function sr(r){return Array.isArray(r)&&"object"==typeof r[1]}function Rr(r){return Array.isArray(r)&&!0===r[1]}function za(r){return 0!=(8&r.flags)}function Zo(r){return 2==(2&r.flags)}function lc(r){return 1==(1&r.flags)}function Dr(r){return null!==r.template}function bh(r){return 0!=(256&r[2])}function Ci(r,s){return r.hasOwnProperty(qn)?r[qn]:null}class Li{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Vi(){return Ls}function Ls(r){return r.type.prototype.ngOnChanges&&(r.setInput=Za),Yo}function Yo(){const r=Sh(this),s=r?.current;if(s){const o=r.previous;if(o===$r)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function Za(r,s,o,u){const l=Sh(r)||function Qo(r,s){return r[pc]=s}(r,{previous:$r,current:null}),h=l.current||(l.current={}),m=l.previous,v=this.declaredInputs[o],w=m[v];h[v]=new Li(w&&w.currentValue,s,m===$r),r[u]=s}Vi.ngInherit=!0;const pc="__ngSimpleChanges__";function Sh(r){return r[pc]||null}function En(r){for(;Array.isArray(r);)r=r[0];return r}function br(r,s){return En(s[r.index])}function so(r,s){return r.data[s]}function qt(r,s){const o=s[r];return sr(o)?o:o[0]}function Vs(r){return 64==(64&r[2])}function gi(r,s){return null==s?null:r[s]}function Xa(r){r[18]=0}function _n(r,s){r[5]+=s;let o=r,u=r[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const Mt={lFrame:Tc(null),bindingsEnabled:!0};function ji(){return Mt.bindingsEnabled}function be(){return Mt.lFrame.lView}function jt(){return Mt.lFrame.tView}function ru(r){return Mt.lFrame.contextLView=r,r[8]}function iu(r){return Mt.lFrame.contextLView=null,r}function Dn(){let r=su();for(;null!==r&&64===r.type;)r=r.parent;return r}function su(){return Mt.lFrame.currentTNode}function ii(r,s){const o=Mt.lFrame;o.currentTNode=r,o.isParent=s}function Xo(){return Mt.lFrame.isParent}function Bs(){return Mt.lFrame.bindingIndex++}function mp(r,s){const o=Mt.lFrame;o.bindingIndex=o.bindingRootIndex=r,ou(s)}function ou(r){Mt.lFrame.currentDirectiveIndex=r}function ia(r){Mt.lFrame.currentQueryIndex=r}function Dc(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function au(r,s,o){if(o&Xe.SkipSelf){let l=s,h=r;for(;!(l=l.parent,null!==l||o&Xe.Host||(l=Dc(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;s=l,r=h}const u=Mt.lFrame=bc();return u.currentTNode=s,u.lView=r,!0}function uu(r){const s=bc(),o=r[1];Mt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function bc(){const r=Mt.lFrame,s=null===r?null:r.child;return null===s?Tc(r):s}function Tc(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Cc(){const r=Mt.lFrame;return Mt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Bl=Cc;function Us(){const r=Cc();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Zn(){return Mt.lFrame.selectedIndex}function Wr(r){Mt.lFrame.selectedIndex=r}function du(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:w,ngAfterViewChecked:T,ngOnDestroy:M}=h;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),v&&((r.contentHooks||(r.contentHooks=[])).push(o,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,v)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),T&&((r.viewHooks||(r.viewHooks=[])).push(o,T),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,T)),null!=M&&(r.destroyHooks||(r.destroyHooks=[])).push(o,M)}}function $s(r,s,o){uo(r,s,3,o)}function ao(r,s,o,u){(3&r[2])===o&&uo(r,s,o,u)}function $l(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function uo(r,s,o,u){const h=u??-1,m=s.length-1;let v=0;for(let w=void 0!==u?65535&r[18]:0;w<m;w++)if("number"==typeof s[w+1]){if(v=s[w],null!=u&&v>=u)break}else s[w]<0&&(r[18]+=65536),(v<h||-1==h)&&(Hl(r,o,s,w),r[18]=(4294901760&r[18])+w+2),w++}function Hl(r,s,o,u){const l=o[u]<0,h=o[u+1],v=r[l?-o[u]:o[u]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class fs{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function lo(r,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const h=o[u++],m=o[u++],v=o[u++];r.setAttribute(s,m,v,h)}else{const h=l,m=o[++u];gu(h)?r.setProperty(s,h,m):r.setAttribute(s,h,m),u++}}return u}function Gs(r){return 3===r||4===r||6===r}function gu(r){return 64===r.charCodeAt(0)}function sa(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Wl(r,o,l,null,-1===o||2===o?s[++u]:null)}}return r}function Wl(r,s,o,u,l){let h=0,m=r.length;if(-1===s)m=-1;else for(;h<r.length;){const v=r[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<r.length;){const v=r[h];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(r[h+1]=l));if(u===r[h+1])return void(r[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(r.splice(m,0,s),h=m+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==l&&r.splice(h++,0,l)}function ql(r){return-1!==r}function or(r){return 32767&r}function aa(r,s){let o=function oa(r){return r>>16}(r),u=s;for(;o>0;)u=u[15],o--;return u}let Ai=!0;function ua(r){const s=Ai;return Ai=r,s}let kn=0;const mi={};function Ws(r,s){const o=yu(r,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(r.injectorIndex=s.length,la(u.data,r),la(s,null),la(u.blueprint,null));const l=_u(r,s),h=r.injectorIndex;if(ql(l)){const m=or(l),v=aa(l,s),w=v[1].data;for(let T=0;T<8;T++)s[h+T]=v[m+T]|w[m+T]}return s[h+8]=l,h}function la(r,s){r.push(0,0,0,0,0,0,0,0,s)}function yu(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function _u(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=fo(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function ps(r,s,o){!function mu(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Nr)&&(u=o[Nr]),null==u&&(u=o[Nr]=kn++);const l=255&u;s.data[r+(l>>5)]|=1<<l}(r,s,o)}function gs(r,s,o){if(o&Xe.Optional||void 0!==r)return r;fe()}function Mc(r,s,o,u){if(o&Xe.Optional&&void 0===u&&(u=null),0==(o&(Xe.Self|Xe.Host))){const l=r[9],h=Wn(void 0);try{return l?l.get(s,u,o&Xe.Optional):ti(s,u,o&Xe.Optional)}finally{Wn(h)}}return gs(u,0,o)}function qs(r,s,o,u=Xe.Default,l){if(null!==r){if(1024&s[2]){const m=function ho(r,s,o,u,l){let h=r,m=s;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const v=da(h,m,o,u|Xe.Self,mi);if(v!==mi)return v;let w=h.parent;if(!w){const T=m[21];if(T){const M=T.get(o,mi,u);if(M!==mi)return M}w=fo(m),m=m[15]}h=w}return l}(r,s,o,u,mi);if(m!==mi)return m}const h=da(r,s,o,u,mi);if(h!==mi)return h}return Mc(s,o,u,l)}function da(r,s,o,u,l){const h=function Nc(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Nr)?r[Nr]:void 0;return"number"==typeof s?s>=0?255&s:Rc:s}(o);if("function"==typeof h){if(!au(s,r,u))return u&Xe.Host?gs(l,0,u):Mc(s,o,u,l);try{const m=h(u);if(null!=m||u&Xe.Optional)return m;fe()}finally{Bl()}}else if("number"==typeof h){let m=null,v=yu(r,s),w=-1,T=u&Xe.Host?s[16][6]:null;for((-1===v||u&Xe.SkipSelf)&&(w=-1===v?_u(r,s):s[v+8],-1!==w&&fa(u,!1)?(m=s[1],v=or(w),s=aa(w,s)):v=-1);-1!==v;){const M=s[1];if(vu(h,v,M.data)){const R=Zl(v,s,o,m,u,T);if(R!==mi)return R}w=s[v+8],-1!==w&&fa(u,s[1].data[v+8]===T)&&vu(h,v,s)?(m=M,v=or(w),s=aa(w,s)):v=-1}}return l}function Zl(r,s,o,u,l,h){const m=s[1],v=m.data[r+8],M=function ha(r,s,o,u,l){const h=r.providerIndexes,m=s.data,v=1048575&h,w=r.directiveStart,M=h>>20,j=l?v+M:r.directiveEnd;for(let Z=u?v:v+M;Z<j;Z++){const ge=m[Z];if(Z<w&&o===ge||Z>=w&&ge.type===o)return Z}if(l){const Z=m[w];if(Z&&Dr(Z)&&Z.type===o)return w}return null}(v,m,o,null==u?Zo(v)&&Ai:u!=m&&0!=(3&v.type),l&Xe.Host&&h===v);return null!==M?ms(s,m,M,v):mi}function ms(r,s,o,u){let l=r[o];const h=s.data;if(function Hs(r){return r instanceof fs}(l)){const m=l;m.resolving&&function qe(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${r}${o}`)}(function he(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():le(r)}(h[o]));const v=ua(m.canSeeViewProviders);m.resolving=!0;const w=m.injectImpl?Wn(m.injectImpl):null;au(r,u,Xe.Default);try{l=r[o]=m.factory(void 0,h,r,u),s.firstCreatePass&&o>=u.directiveStart&&function jl(r,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(u){const m=Ls(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,l),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],s)}finally{null!==w&&Wn(w),ua(v),m.resolving=!1,Bl()}}return l}function vu(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function fa(r,s){return!(r&Xe.Self||r&Xe.Host&&s)}class zs{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return qs(this._tNode,this._lView,s,u,o)}}function Rc(){return new zs(Dn(),be())}function fo(r){const s=r[1],o=s.type;return 2===o?s.declTNode:1===o?r[6]:null}function wu(r){return function Kl(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const h=o[l];if(Gs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(h===s)return o[l+1];l+=2}}}return null}(Dn(),r)}const _s="__parameters__";function mo(r,s,o){return Rn(()=>{const u=function Eu(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return v.annotation=m,v;function v(w,T,M){const R=w.hasOwnProperty(_s)?w[_s]:Object.defineProperty(w,_s,{value:[]})[_s];for(;R.length<=M;)R.push(null);return(R[M]=R[M]||[]).push(m),w}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class hn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=nt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function un(r,s){r.forEach(o=>Array.isArray(o)?un(o,s):s(o))}function Yl(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function _o(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}const pr={},at="__NG_DI_FLAG__",Do="ngTempTokenPath",Zs=/\n/gm,To="__source";let Kr;function Gi(r){const s=Kr;return Kr=r,s}function ws(r,s=Xe.Default){if(void 0===Kr)throw new Ne(-203,!1);return null===Kr?ti(r,void 0,s):Kr.get(r,s&Xe.Optional?null:void 0,s)}function $n(r,s=Xe.Default){return(function is(){return Er}()||ws)(K(r),s)}function Co(r){const s=[];for(let o=0;o<r.length;o++){const u=K(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Ne(900,!1);let l,h=Xe.Default;for(let m=0;m<u.length;m++){const v=u[m],w=Wi(v);"number"==typeof w?-1===w?l=v.token:h|=w:l=v}s.push($n(l,h))}else s.push($n(u))}return s}function Cn(r,s){return r[at]=s,r.prototype[at]=s,r}function Wi(r){return r[at]}const O=Cn(mo("Optional"),8),Y=Cn(mo("SkipSelf"),4);var qi=(()=>((qi=qi||{})[qi.Important=1]="Important",qi[qi.DashCase=2]="DashCase",qi))();const Su=new Map;let ud=0;const Ys="__ngContext__";function Fr(r,s){sr(s)?(r[Ys]=s[20],function gr(r){Su.set(r[20],r)}(s)):r[Ys]=s}function hd(r,s){return undefined(r,s)}function _a(r){const s=r[3];return Rr(s)?s[3]:s}function $c(r){return xo(r[13])}function Hc(r){return xo(r[4])}function xo(r){for(;null!==r&&!Rr(r);)r=r[4];return r}function xi(r,s,o,u,l){if(null!=u){let h,m=!1;Rr(u)?h=u:sr(u)&&(m=!0,u=u[0]);const v=En(u);0===r&&null!==o?null==l?yd(s,o,v):No(s,o,v,l||null,!0):1===r&&null!==o?No(s,o,v,l||null,!0):2===r?function _d(r,s,o){const u=Qs(r,s);u&&function Zh(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,v,m):3===r&&s.destroyNode(v),null!=h&&function Pu(r,s,o,u,l){const h=o[7];h!==En(o)&&xi(s,r,u,h,l);for(let v=10;v<o.length;v++){const w=o[v];ku(w[1],w,r,s,u,h)}}(s,r,h,o,l)}}function yr(r,s,o){return r.createElement(s,o)}function gd(r,s){const o=r[9],u=o.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,_n(l,-1)),o.splice(u,1)}function Ia(r,s){if(r.length<=10)return;const o=10+s,u=r[o];if(u){const l=u[17];null!==l&&l!==r&&gd(l,u),s>0&&(r[o-1][4]=u[4]);const h=_o(r,10+s);!function Cp(r,s){ku(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function md(r,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&ku(r,s,o,3,null,null),function Sp(r){let s=r[13];if(!s)return Wc(r[1],r);for(;s;){let o=null;if(sr(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==r;)sr(s)&&Wc(s[1],s),s=s[3];null===s&&(s=r),sr(s)&&Wc(s[1],s),o=s&&s[4]}s=o}}(s)}}function Wc(r,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function qc(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof fs)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=l[h[m]],w=h[m+1];try{w.call(v)}finally{}}else try{h.call(l)}finally{}}}}(r,s),function Kh(r,s){const o=r.cleanup,u=s[7];let l=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],v="function"==typeof m?m(s):En(s[m]),w=u[l=o[h+2]],T=o[h+3];"boolean"==typeof T?v.removeEventListener(o[h],w,T):T>=0?u[l=T]():u[l=-T].unsubscribe(),h+=2}else{const m=u[l=o[h+1]];o[h].call(m)}if(null!==u){for(let h=l+1;h<u.length;h++)(0,u[h])();s[7]=null}}(r,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&Rr(s[3])){o!==s[3]&&gd(o,s);const u=s[19];null!==u&&u.detachView(r)}!function cd(r){Su.delete(r[20])}(s)}}function Mo(r,s,o){return function zc(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=r.data[u.directiveStart].encapsulation;if(l===lt.None||l===lt.Emulated)return null}return br(u,o)}(r,s.parent,o)}function No(r,s,o,u,l){r.insertBefore(s,o,u,l)}function yd(r,s,o){r.appendChild(s,o)}function wa(r,s,o,u,l){null!==u?No(r,s,o,u,l):yd(r,s,o)}function Qs(r,s){return r.parentNode(s)}let ef,Kc=function Ro(r,s,o){return 40&r.type?br(r,o):null};function Ds(r,s,o,u){const l=Mo(r,u,s),h=s[11],v=function xp(r,s,o){return Kc(r,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let w=0;w<o.length;w++)wa(h,l,o[w],v,!1);else wa(h,l,o,v,!1)}function Ii(r,s){if(null!==s){const o=s.type;if(3&o)return br(s,r);if(4&o)return Jh(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return Ii(r,u);{const l=r[s.index];return Rr(l)?Jh(-1,l):En(l)}}if(32&o)return hd(s,r)()||En(r[s.index]);{const u=Qh(r,s);return null!==u?Array.isArray(u)?u[0]:Ii(_a(r[16]),u):Ii(r,s.next)}}return null}function Qh(r,s){return null!==s?r[16][6].projection[s.projection]:null}function Jh(r,s){const o=10+r+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return Ii(u,l)}return s[7]}function vd(r,s,o,u,l,h,m){for(;null!=o;){const v=u[o.index],w=o.type;if(m&&0===s&&(v&&Fr(En(v),u),o.flags|=4),64!=(64&o.flags))if(8&w)vd(r,s,o.child,u,l,h,!1),xi(s,r,l,v,h);else if(32&w){const T=hd(o,u);let M;for(;M=T();)xi(s,r,l,M,h);xi(s,r,l,v,h)}else 16&w?Mi(r,s,u,o,l,h):xi(s,r,l,v,h);o=m?o.projectionNext:o.next}}function ku(r,s,o,u,l,h){vd(o,u,r.firstChild,s,l,h,!1)}function Mi(r,s,o,u,l,h){const m=o[16],w=m[6].projection[u.projection];if(Array.isArray(w))for(let T=0;T<w.length;T++)xi(s,r,l,w[T],h);else vd(r,s,w,m[3],l,h,!0)}function zi(r,s,o){r.setAttribute(s,"style",o)}function on(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function g(r){ef=r}const ty=new hn("ENVIRONMENT_INITIALIZER"),ny=new hn("INJECTOR",-1),ry=new hn("INJECTOR_DEF_TYPES");class cf{get(s,o=pr){if(o===pr){const u=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw u.name="NullInjectorError",u}return o}}function Yi(...r){return{\u0275providers:iy(0,r)}}function iy(r,...s){const o=[],u=new Set;let l;return un(s,h=>{const m=h;Fu(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&sy(l,o),o}function sy(r,s){for(let o=0;o<r.length;o++){const{providers:l}=r[o];un(l,h=>{s.push(h)})}}function Fu(r,s,o,u){if(!(r=K(r)))return!1;let l=null,h=jr(r);const m=!h&&z(r);if(h||m){if(m&&!m.standalone)return!1;l=r}else{const w=r.ngModule;if(h=jr(w),!h)return!1;l=w}const v=u.has(l);if(m){if(v)return!1;if(u.add(l),m.dependencies){const w="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const T of w)Fu(T,s,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!v){let T;u.add(l);try{un(h.imports,M=>{Fu(M,s,o,u)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&sy(T,s)}if(!v){const T=Ci(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Nt},{provide:ry,useValue:l,multi:!0},{provide:ty,useValue:()=>$n(l),multi:!0})}const w=h.providers;null==w||v||un(w,M=>{s.push(M)})}}return l!==r&&void 0!==r.providers}const Jw=ae({provide:String,useValue:ae});function lf(r){return null!==r&&"object"==typeof r&&Jw in r}function Lu(r){return"function"==typeof r}const Td=new hn("Set Injector scope."),Vp={},Wv={};let vr;function Ta(){return void 0===vr&&(vr=new cf),vr}class Qi{}class Bp extends Qi{constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ne(s,m=>this.processProvider(m)),this.records.set(ny,Bu(void 0,this)),l.has("environment")&&this.records.set(Qi,Bu(void 0,this));const h=this.records.get(Td);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(ry.multi,Nt,Xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=Gi(this),u=Wn(void 0);try{return s()}finally{Gi(o),Wn(u)}}get(s,o=pr,u=Xe.Default){this.assertNotDestroyed();const l=Gi(this),h=Wn(void 0);try{if(!(u&Xe.SkipSelf)){let v=this.records.get(s);if(void 0===v){const w=function eE(r){return"function"==typeof r||"object"==typeof r&&r instanceof hn}(s)&&Tt(s);v=w&&this.injectableDefInScope(w)?Bu(oy(s),Vp):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Xe.Self?Ta():this.parent).get(s,o=u&Xe.Optional&&o===pr?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Do]=m[Do]||[]).unshift(ce(s)),l)throw m;return function E(r,s,o,u){const l=r[Do];throw s[To]&&l.unshift(s[To]),r.message=function b(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=ce(s);if(Array.isArray(s))l=s.map(ce).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):ce(v)))}l=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(Zs,"\n  ")}`}("\n"+r.message,l,o,u),r.ngTokenPath=l,r[Do]=null,r}(m,s,"R3InjectorError",this.source)}throw m}finally{Wn(h),Gi(l)}}resolveInjectorInitializers(){const s=Gi(this),o=Wn(void 0);try{const u=this.get(ty.multi,Nt,Xe.Self);for(const l of u)l()}finally{Gi(s),Wn(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(ce(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(s){let o=Lu(s=K(s))?s:K(s&&s.provide);const u=function ur(r){return lf(r)?Bu(void 0,r.useValue):Bu(function Vu(r,s,o){let u;if(Lu(r)){const l=K(r);return Ci(l)||oy(l)}if(lf(r))u=()=>K(r.useValue);else if(function Gv(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Co(r.deps||[]));else if(function Hv(r){return!(!r||!r.useExisting)}(r))u=()=>$n(K(r.useExisting));else{const l=K(r&&(r.useClass||r.provide));if(!function ot(r){return!!r.deps}(r))return Ci(l)||oy(l);u=()=>new l(...Co(r.deps))}return u}(r),Vp)}(s);if(Lu(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Bu(void 0,Vp,!0),l.factory=()=>Co(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===Vp&&(o.value=Wv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function dt(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=K(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function oy(r){const s=Tt(r),o=null!==s?s.factory:Ci(r);if(null!==o)return o;if(r instanceof hn)throw new Ne(204,!1);if(r instanceof Function)return function ke(r){const s=r.length;if(s>0)throw function Hi(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}(s,"?"),new Ne(204,!1);const o=function gn(r){const s=r&&(r[fi]||r[ei]);if(s){const o=function wn(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Ne(204,!1)}function Bu(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function ze(r){return!!r.\u0275providers}function ne(r,s){for(const o of r)Array.isArray(o)?ne(o,s):ze(o)?ne(o.\u0275providers,s):s(o)}class Ir{}class tE{resolveComponentFactory(s){throw function qv(r){const s=Error(`No component factory found for ${ce(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let Up=(()=>{class r{}return r.NULL=new tE,r})();function nE(){return Yc(Dn(),be())}function Yc(r,s){return new df(br(r,s))}let df=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=nE,r})();class ay{}let Ot=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Cd(){const r=be(),o=qt(Dn().index,r);return(sr(o)?o:r)[11]}(),r})(),Kv=(()=>{class r{}return r.\u0275prov=nt({token:r,providedIn:"root",factory:()=>null}),r})();class Sn{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const mt=new Sn("14.2.12"),Qc={};function Pn(r){return r.ngOriginalError}class Ue{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Pn(s);for(;o&&Pn(o);)o=Pn(o);return o||null}}function J(r,s,o){let u=r.length;for(;;){const l=r.indexOf(s,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const h=s.length;if(l+h===u||r.charCodeAt(l+h)<=32)return l}o=l+1}}const Ts="ng-template";function uE(r,s,o){let u=0;for(;u<r.length;){let l=r[u++];if(o&&"class"===l){if(l=r[u],-1!==J(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<r.length&&"string"==typeof(l=r[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function Sd(r){return 4===r.type&&r.value!==Ts}function Uu(r,s,o){return s===(4!==r.type||o?r.value:Ts)}function cE(r,s,o){let u=4;const l=r.attrs||[],h=function dE(r){for(let s=0;s<r.length;s++)if(Gs(r[s]))return s;return r.length}(l);let m=!1;for(let v=0;v<s.length;v++){const w=s[v];if("number"!=typeof w){if(!m)if(4&u){if(u=2|1&u,""!==w&&!Uu(r,w,o)||""===w&&1===s.length){if(Qr(u))return!1;m=!0}}else{const T=8&u?w:s[++v];if(8&u&&null!==r.attrs){if(!uE(r.attrs,T,o)){if(Qr(u))return!1;m=!0}continue}const R=Yv(8&u?"class":w,l,Sd(r),o);if(-1===R){if(Qr(u))return!1;m=!0;continue}if(""!==T){let j;j=R>h?"":l[R+1].toLowerCase();const Z=8&u?j:null;if(Z&&-1!==J(Z,T,0)||2&u&&T!==j){if(Qr(u))return!1;m=!0}}}}else{if(!m&&!Qr(u)&&!Qr(w))return!1;if(m&&Qr(w))continue;m=!1,u=w|1&u}}return Qr(u)||m}function Qr(r){return 0==(1&r)}function Yv(r,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let h=!1;for(;l<s.length;){const m=s[l];if(m===r)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Xi(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function Hp(r,s,o=!1){for(let u=0;u<s.length;u++)if(cE(r,s[u],o))return!0;return!1}function Sa(r,s){return r?":not("+s.trim()+")":s}function Qv(r){let s=r[0],o=1,u=2,l="",h=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const v=r[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Qr(m)&&(s+=Sa(h,l),l=""),u=m,h=h||!Qr(u);o++}return""!==l&&(s+=Sa(h,l)),s}const kt={};function Ad(r){dy(jt(),be(),Zn()+r,!1)}function dy(r,s,o,u){if(!u)if(3==(3&s[2])){const h=r.preOrderCheckHooks;null!==h&&$s(s,h,o)}else{const h=r.preOrderHooks;null!==h&&ao(s,h,0,o)}Wr(o)}function xa(r,s=null,o=null,u){const l=ff(r,s,o,u);return l.resolveInjectorInitializers(),l}function ff(r,s=null,o=null,u,l=new Set){const h=[o||Nt,Yi(r)];return u=u||("object"==typeof r?void 0:ce(r)),new Bp(h,s||Ta(),u||null,l)}let es=(()=>{class r{static create(o,u){if(Array.isArray(o))return xa({name:""},u,o,"");{const l=o.name??"";return xa({name:l},o.parent,o.providers,l)}}}return r.THROW_IF_NOT_FOUND=pr,r.NULL=new cf,r.\u0275prov=nt({token:r,providedIn:"any",factory:()=>$n(ny)}),r.__NG_ELEMENT_ID__=-1,r})();function rl(r,s=Xe.Default){const o=be();return null===o?$n(r,s):qs(Dn(),o,K(r),s)}function Wu(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],h=o[u+1];if(-1!==h){const m=r.data[h];ia(l),m.contentQueries(2,s[h],h)}}}function wf(r,s,o,u,l,h,m,v,w,T,M){const R=s.blueprint.slice();return R[0]=l,R[2]=76|u,(null!==M||r&&1024&r[2])&&(R[2]|=1024),Xa(R),R[3]=R[15]=r,R[8]=o,R[10]=m||r&&r[10],R[11]=v||r&&r[11],R[12]=w||r&&r[12]||null,R[9]=T||r&&r[9]||null,R[6]=h,R[20]=function $h(){return ud++}(),R[21]=M,R[16]=2==s.type?r[16]:R,R}function Js(r,s,o,u,l){let h=r.data[s];if(null===h)h=function tg(r,s,o,u,l){const h=su(),m=Xo(),w=r.data[s]=function ka(r,s,o,u,l,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,s,u,l);return null===r.firstChild&&(r.firstChild=w),null!==h&&(m?null==h.child&&null!==w.parent&&(h.child=w):null===h.next&&(h.next=w)),w}(r,s,o,u,l),function gp(){return Mt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=l;const m=function oo(){const r=Mt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return ii(h,!0),h}function ol(r,s,o,u){if(0===o)return-1;const l=s.length;for(let h=0;h<o;h++)s.push(u),r.blueprint.push(u),r.data.push(null);return l}function al(r,s,o){uu(s);try{const u=r.viewQuery;null!==u&&zu(1,u,o);const l=r.template;null!==l&&b0(r,s,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Wu(r,s),r.staticViewQueries&&zu(2,r.viewQuery,o);const h=r.components;null!==h&&function sl(r,s){for(let o=0;o<s.length;o++)R0(r,s[o])}(s,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[2]&=-5,Us()}}function ng(r,s,o,u){const l=s[2];if(128!=(128&l)){uu(s);try{Xa(s),function Ic(r){return Mt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&b0(r,s,o,2,u);const m=3==(3&l);if(m){const T=r.preOrderCheckHooks;null!==T&&$s(s,T,null)}else{const T=r.preOrderHooks;null!==T&&ao(s,T,0,null),$l(s,0)}if(function M0(r){for(let s=$c(r);null!==s;s=Hc(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],h=l[3];0==(512&l[2])&&_n(h,1),l[2]|=512}}}(s),function x0(r){for(let s=$c(r);null!==s;s=Hc(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];Vs(u)&&ng(l,u,l.template,u[8])}}(s),null!==r.contentQueries&&Wu(r,s),m){const T=r.contentCheckHooks;null!==T&&$s(s,T)}else{const T=r.contentHooks;null!==T&&ao(s,T,1),$l(s,1)}!function kd(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)Wr(~l);else{const h=l,m=o[++u],v=o[++u];mp(m,h),v(2,s[h])}}}finally{Wr(-1)}}(r,s);const v=r.components;null!==v&&function D0(r,s){for(let o=0;o<s.length;o++)N0(r,s[o])}(s,v);const w=r.viewQuery;if(null!==w&&zu(2,w,u),m){const T=r.viewCheckHooks;null!==T&&$s(s,T)}else{const T=r.viewHooks;null!==T&&ao(s,T,2),$l(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,_n(s[3],-1))}finally{Us()}}}function b0(r,s,o,u,l){const h=Zn(),m=2&u;try{Wr(-1),m&&s.length>22&&dy(r,s,22,!1),o(u,l)}finally{Wr(h)}}function Pd(r,s,o){!ji()||(function DE(r,s,o,u){const l=o.directiveStart,h=o.directiveEnd;r.firstCreatePass||Ws(o,s),Fr(u,s);const m=o.initialInputs;for(let v=l;v<h;v++){const w=r.data[v],T=Dr(w);T&&bE(s,o,w);const M=ms(s,r,v,o);Fr(M,s),null!==m&&sg(0,v-l,M,w,0,m),T&&(qt(o.index,s)[8]=M)}}(r,s,o,br(o,s)),128==(128&o.flags)&&function Ri(r,s,o){const u=o.directiveStart,l=o.directiveEnd,h=o.index,m=function wc(){return Mt.lFrame.currentDirectiveIndex}();try{Wr(h);for(let v=u;v<l;v++){const w=r.data[v],T=s[v];ou(v),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&xy(w,T)}}finally{Wr(-1),ou(m)}}(r,s,o))}function Od(r,s,o=br){const u=s.localNames;if(null!==u){let l=s.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],v=-1===m?o(s,r):r[m];r[l++]=v}}}function by(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=Ty(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function Ty(r,s,o,u,l,h,m,v,w,T){const M=22+u,R=M+l,j=function Ef(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:kt);return o}(M,R),Z="function"==typeof T?T():T;return j[1]={type:r,blueprint:j,template:o,queries:null,viewQuery:v,declTNode:s,data:j.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:w,consts:Z,incompleteFirstPass:!1}}function Cy(r,s,o){for(let u in r)if(r.hasOwnProperty(u)){const l=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function Sy(r,s){const u=s.directiveEnd,l=r.data,h=s.attrs,m=[];let v=null,w=null;for(let T=s.directiveStart;T<u;T++){const M=l[T],R=M.inputs,j=null===h||Sd(s)?null:bf(R,h);m.push(j),v=Cy(R,T,v),w=Cy(M.outputs,T,w)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=w}function rg(r,s){const o=qt(s,r);16&o[2]||(o[2]|=32)}function ig(r,s,o,u){let l=!1;if(ji()){const h=function Df(r,s,o){const u=r.directiveRegistry;let l=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];Hp(o,m.selectors,!1)&&(l||(l=[]),ps(Ws(o,s),r,m.type),Dr(m)?(My(r,o),l.unshift(m)):l.push(m))}return l}(r,s,o),m=null===u?null:{"":-1};if(null!==h){l=!0,Fd(o,r.data.length,h.length);for(let M=0;M<h.length;M++){const R=h[M];R.providersResolver&&R.providersResolver(R)}let v=!1,w=!1,T=ol(r,s,h.length,null);for(let M=0;M<h.length;M++){const R=h[M];o.mergedAttrs=sa(o.mergedAttrs,R.hostAttrs),A0(r,o,s,T,R),S0(T,R,m),null!==R.contentQueries&&(o.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(o.flags|=128);const j=R.type.prototype;!v&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),v=!0),!w&&(j.ngOnChanges||j.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),T++}Sy(r,o)}m&&function Uo(r,s,o){if(s){const u=r.localNames=[];for(let l=0;l<s.length;l+=2){const h=o[s[l+1]];if(null==h)throw new Ne(-301,!1);u.push(s[l],h)}}}(o,u,m)}return o.mergedAttrs=sa(o.mergedAttrs,o.attrs),l}function Ay(r,s,o,u,l,h){const m=h.hostBindings;if(m){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const w=~s.index;(function qu(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=w&&v.push(w),v.push(u,l,m)}}function xy(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function My(r,s){s.flags|=2,(r.components||(r.components=[])).push(s.index)}function S0(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;Dr(s)&&(o[""]=r)}}function Fd(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}function A0(r,s,o,u,l){r.data[u]=l;const h=l.factory||(l.factory=Ci(l.type)),m=new fs(h,Dr(l),rl);r.blueprint[u]=m,o[u]=m,Ay(r,s,0,u,ol(r,o,l.hostVars,kt),l)}function bE(r,s,o){const u=br(s,r),l=by(o),h=r[10],m=ag(r,wf(r,l,null,o.onPush?32:16,u,s,h,h.createRenderer(u,o),null,null,null));r[s.index]=m}function sg(r,s,o,u,l,h){const m=h[s];if(null!==m){const v=u.setInput;for(let w=0;w<m.length;){const T=m[w++],M=m[w++],R=m[w++];null!==v?u.setInput(o,R,T,M):o[M]=R}}}function bf(r,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;r.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,r[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function Tf(r,s,o,u){return new Array(r,!0,!1,s,null,0,u,o,null,null)}function N0(r,s){const o=qt(s,r);if(Vs(o)){const u=o[1];48&o[2]?ng(u,o,u.template,o[8]):o[5]>0&&Ry(o)}}function Ry(r){for(let u=$c(r);null!==u;u=Hc(u))for(let l=10;l<u.length;l++){const h=u[l];if(Vs(h))if(512&h[2]){const m=h[1];ng(m,h,m.template,h[8])}else h[5]>0&&Ry(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=qt(o[u],r);Vs(l)&&l[5]>0&&Ry(l)}}function R0(r,s){const o=qt(s,r),u=o[1];(function k0(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),al(u,o,o[8])}function ag(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function ky(r){for(;r;){r[2]|=32;const s=_a(r);if(bh(r)&&!s)return r;r=s}return null}function ug(r,s,o,u=!0){const l=s[10];l.begin&&l.begin();try{ng(r,s,r.template,o)}catch(m){throw u&&Py(s,m),m}finally{l.end&&l.end()}}function zu(r,s,o){ia(0),s(r,o)}function P0(r){return r[7]||(r[7]=[])}function nr(r){return r.cleanup||(r.cleanup=[])}function Py(r,s){const o=r[9],u=o?o.get(Ue,null):null;u&&u.handleError(s)}function cl(r,s,o,u,l){for(let h=0;h<o.length;){const m=o[h++],v=o[h++],w=s[m],T=r.data[m];null!==T.setInput?T.setInput(w,l,u,v):w[v]=l}}function Br(r,s,o){const u=function ri(r,s){return En(s[r])}(s,r);!function Nu(r,s,o){r.setValue(s,o)}(r[11],u,o)}function Ld(r,s,o){let u=o?r.styles:null,l=o?r.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?l=_e(l,v):2==h&&(u=_e(u,v+": "+s[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}function Cf(r,s,o,u,l=!1){for(;null!==o;){const h=s[o.index];if(null!==h&&u.push(En(h)),Rr(h))for(let v=10;v<h.length;v++){const w=h[v],T=w[1].firstChild;null!==T&&Cf(w[1],w,T,u)}const m=o.type;if(8&m)Cf(r,s,o.child,u);else if(32&m){const v=hd(o,s);let w;for(;w=v();)u.push(w)}else if(16&m){const v=Qh(s,o);if(Array.isArray(v))u.push(...v);else{const w=_a(s[16]);Cf(w[1],w,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class Pa{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Cf(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Rr(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Ia(s,u),_o(o,u))}this._attachedToViewContainer=!1}md(this._lView[1],this._lView)}onDestroy(s){!function ul(r,s,o,u){const l=P0(s);null===o?l.push(u):(l.push(o),r.firstCreatePass&&nr(r).push(u,l.length-1))}(this._lView[1],this._lView,null,s)}markForCheck(){ky(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ug(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pd(r,s){ku(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=s}}class O0 extends Pa{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;ug(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class lg extends Up{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=z(s);return new Oa(o,this.ngModule)}}function Oy(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class SE{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){const l=this.injector.get(s,Qc,u);return l!==Qc||o===Qc?l:this.parentInjector.get(s,o,u)}}class Oa extends Ir{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function el(r){return r.map(Qv).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Oy(this.componentDef.inputs)}get outputs(){return Oy(this.componentDef.outputs)}create(s,o,u,l){let h=(l=l||this.ngModule)instanceof Qi?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new SE(s,h):s,v=m.get(ay,null);if(null===v)throw new Ne(407,!1);const w=m.get(Kv,null),T=v.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=u?function T0(r,s,o){return r.selectRootElement(s,o===lt.ShadowDom)}(T,u,this.componentDef.encapsulation):yr(T,M,function CE(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),j=this.componentDef.onPush?288:272,Z=Ty(0,null,null,1,0,null,null,null,null,null),ge=wf(null,Z,null,j,null,null,v,T,w,m,null);let Pe,Ge;uu(ge);try{const ut=function V0(r,s,o,u,l,h){const m=o[1];o[22]=r;const w=Js(m,22,2,"#host",null),T=w.mergedAttrs=s.hostAttrs;null!==T&&(Ld(w,T,!0),null!==r&&(lo(l,r,T),null!==w.classes&&on(l,r,w.classes),null!==w.styles&&zi(l,r,w.styles)));const M=u.createRenderer(r,s),R=wf(o,by(s),null,s.onPush?32:16,o[22],w,u,M,h||null,null,null);return m.firstCreatePass&&(ps(Ws(w,o),m,s.type),My(m,w),Fd(w,o.length,1)),ag(o,R),o[22]=R}(R,this.componentDef,ge,v,T);if(R)if(u)lo(T,R,["ng-version",mt.full]);else{const{attrs:wt,classes:Te}=function Jv(r){const s=[],o=[];let u=1,l=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===l?""!==h&&s.push(h,r[++u]):8===l&&o.push(h);else{if(!Qr(l))break;l=h}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);wt&&lo(T,R,wt),Te&&Te.length>0&&on(T,R,Te.join(" "))}if(Ge=so(Z,22),void 0!==o){const wt=Ge.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const bt=o[Te];wt.push(null!=bt?Array.from(bt):null)}}Pe=function AE(r,s,o,u){const l=o[1],h=function tn(r,s,o){const u=Dn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),A0(r,u,s,ol(r,s,1,null),o),Sy(r,u));const l=ms(s,r,u.directiveStart,u);Fr(l,s);const h=br(u,s);return h&&Fr(h,s),l}(l,o,s);if(r[8]=o[8]=h,null!==u)for(const v of u)v(h,s);if(s.contentQueries){const v=Dn();s.contentQueries(1,h,v.directiveStart)}const m=Dn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Wr(m.index),Ay(o[1],m,0,m.directiveStart,m.directiveEnd,s),xy(s,h)),h}(ut,this.componentDef,ge,[B0]),al(Z,ge,null)}finally{Us()}return new F0(this.componentType,Pe,Yc(Ge,ge),ge,Ge)}}class F0 extends class Se{}{constructor(s,o,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new O0(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){const h=this._rootLView;cl(h[1],h,l,s,o),rg(h,this._tNode.index)}}get injector(){return new zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function B0(){const r=Dn();du(be()[1],r)}let Sf=null;function ai(){if(!Sf){const r=nn.Symbol;if(r&&r.iterator)Sf=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Sf=u)}}}return Sf}function Zu(r){return!!Ly(r)&&(Array.isArray(r)||!(r instanceof Map)&&ai()in r)}function Ly(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function ui(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function Yu(r,s,o,u,l,h,m,v){const w=be(),T=jt(),M=r+22,R=T.firstCreatePass?function mg(r,s,o,u,l,h,m,v,w){const T=s.consts,M=Js(s,r,4,m||null,gi(T,v));ig(s,o,M,gi(T,w)),du(s,M);const R=M.tViews=Ty(2,M,u,l,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),R.queries=s.queries.embeddedTView(M)),M}(M,T,w,s,o,u,l,h,m):T.data[M];ii(R,!1);const j=w[11].createComment("");Ds(T,w,j,R),Fr(j,w),ag(w,w[M]=Tf(j,w,j,R)),lc(R)&&Pd(T,w,R),null!=m&&Od(w,R,v)}function Qu(r){return function Ui(r,s){return r[s]}(function vc(){return Mt.lFrame.contextLView}(),22+r)}function gl(r,s,o){const u=be();return ui(u,Bs(),s)&&function Vr(r,s,o,u,l,h,m,v){const w=br(s,o);let M,T=s.inputs;!v&&null!=T&&(M=T[u])?(cl(r,o,M,u,l),Zo(s)&&rg(o,s.index)):3&s.type&&(u=function C0(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=m?m(l,s.value||"",u):l,h.setProperty(w,u,l))}(jt(),function dn(){const r=Mt.lFrame;return so(r.tView,r.selectedIndex)}(),u,r,s,u[11],o,!1),gl}function yg(r,s,o,u,l){const m=l?"class":"style";cl(r,o,s.inputs[m],m,u)}function Wd(r,s,o,u){const l=be(),h=jt(),m=22+r,v=l[11],w=l[m]=yr(v,s,function lu(){return Mt.lFrame.currentNamespace}()),T=h.firstCreatePass?function By(r,s,o,u,l,h,m){const v=s.consts,T=Js(s,r,2,l,gi(v,h));return ig(s,o,T,gi(v,m)),null!==T.attrs&&Ld(T,T.attrs,!1),null!==T.mergedAttrs&&Ld(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(m,h,l,0,s,o,u):h.data[m];ii(T,!0);const M=T.mergedAttrs;null!==M&&lo(v,w,M);const R=T.classes;null!==R&&on(v,w,R);const j=T.styles;return null!==j&&zi(v,w,j),64!=(64&T.flags)&&Ds(h,l,w,T),0===function tu(){return Mt.lFrame.elementDepthCount}()&&Fr(w,l),function nu(){Mt.lFrame.elementDepthCount++}(),lc(T)&&(Pd(h,l,T),function An(r,s,o){if(za(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const m=r.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,T,l)),null!==u&&Od(l,T),Wd}function xf(){let r=Dn();Xo()?function ea(){Mt.lFrame.isParent=!1}():(r=r.parent,ii(r,!1));const s=r;!function mc(){Mt.lFrame.elementDepthCount--}();const o=jt();return o.firstCreatePass&&(du(o,r),za(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function pu(r){return 0!=(16&r.flags)}(s)&&yg(o,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Gl(r){return 0!=(32&r.flags)}(s)&&yg(o,s,be(),s.stylesWithoutHost,!1),xf}function _g(r,s,o,u){return Wd(r,s,o,u),xf(),_g}function qd(){return be()}function La(r){return!!r&&"function"==typeof r.then}function Z0(r){return!!r&&"function"==typeof r.subscribe}const Y0=Z0;function Uy(r,s,o,u){const l=be(),h=jt(),m=Dn();return function zd(r,s,o,u,l,h,m,v){const w=lc(u),M=r.firstCreatePass&&nr(r),R=s[8],j=P0(s);let Z=!0;if(3&u.type||v){const Ge=br(u,s),ut=v?v(Ge):Ge,wt=j.length,Te=v?an=>v(En(an[u.index])):u.index;let bt=null;if(!v&&w&&(bt=function FE(r,s,o,u){const l=r.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===o&&l[h+1]===u){const v=s[7],w=l[h+2];return v.length>w?v[w]:null}"string"==typeof m&&(h+=2)}return null}(r,s,l,u.index)),null!==bt)(bt.__ngLastListenerFn__||bt).__ngNextListenerFn__=h,bt.__ngLastListenerFn__=h,Z=!1;else{h=Va(u,s,R,h,!1);const an=o.listen(ut,l,h);j.push(h,an),M&&M.push(l,Te,wt,wt+1)}}else h=Va(u,s,R,h,!1);const ge=u.outputs;let Pe;if(Z&&null!==ge&&(Pe=ge[l])){const Ge=Pe.length;if(Ge)for(let ut=0;ut<Ge;ut+=2){const Mn=s[Pe[ut]][Pe[ut+1]].subscribe(h),Ga=j.length;j.push(h,Mn),M&&M.push(l,u.index,Ga,-(Ga+1))}}}(h,l,l[11],m,r,s,0,u),Uy}function Ju(r,s,o,u){try{return!1!==o(u)}catch(l){return Py(r,l),!1}}function Va(r,s,o,u,l){return function h(m){if(m===Function)return u;ky(2&r.flags?qt(r.index,s):s);let w=Ju(s,0,u,m),T=h.__ngNextListenerFn__;for(;T;)w=Ju(s,0,T,m)&&w,T=T.__ngNextListenerFn__;return l&&!1===w&&(m.preventDefault(),m.returnValue=!1),w}}function jy(r=1){return function js(r){return(Mt.lFrame.contextLView=function cu(r,s){for(;r>0;)s=s[15],r--;return s}(r,Mt.lFrame.contextLView))[8]}(r)}function dI(r,s=""){const o=be(),u=jt(),l=r+22,h=u.firstCreatePass?Js(u,l,1,s,null):u.data[l],m=o[l]=function fd(r,s){return r.createText(s)}(o[11],s);Ds(u,o,m,h),ii(h,!1)}function xg(r,s,o){const u=be(),l=function Ud(r,s,o,u){return ui(r,Bs(),o)?s+le(o)+u:kt}(u,r,s,o);return l!==kt&&Br(u,Zn(),l),xg}const Ua=void 0;var DI=["en",[["a","p"],["AM","PM"],Ua],[["AM","PM"],Ua,Ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ua,"{1} 'at' {0}",Ua],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function n_(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Xd={};function r_(r){const s=function o_(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=i_(s);if(o)return o;const u=s.split("-")[0];if(o=i_(u),o)return o;if("en"===u)return DI;throw new Ne(701,!1)}function bI(r){return r_(r)[It.PluralCase]}function i_(r){return r in Xd||(Xd[r]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[r]),Xd[r]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const eh="en-US";let nh=eh;class Pi{}function dD(r,s){return new $I(r,s??null)}class $I extends Pi{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lg(this);const u=function cn(r,s){const o=r[en]||null;if(!o&&!0===s)throw new Error(`Type ${ce(r)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function Fo(r){return r instanceof Function?r():r}(u.bootstrap),this._r3Injector=ff(s,o,[{provide:Pi,useValue:this},{provide:Up,useValue:this.componentFactoryResolver}],ce(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class F_ extends class O_{}{constructor(s){super(),this.moduleType=s}create(s){return new $I(this.moduleType,s)}}function W_(r){return s=>{setTimeout(r,void 0,s)}}const ja=class wD extends I.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,h=o||(()=>null),m=u;if(s&&"object"==typeof s){const w=s;l=w.next?.bind(w),h=w.error?.bind(w),m=w.complete?.bind(w)}this.__isAsync&&(h=W_(h),l&&(l=W_(l)),m&&(m=W_(m)));const v=super.subscribe({next:l,error:h,complete:m});return s instanceof Q.w0&&s.add(v),v}};let fh=(()=>{class r{}return r.__NG_ELEMENT_ID__=K_,r})();const q_=fh,z_=class extends q_{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,l=wf(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),al(u,l,s),new Pa(l)}};function K_(){return function El(r,s){return 4&r.type?new z_(s,r,Yc(r,s)):null}(Dn(),be())}let ph=(()=>{class r{}return r.__NG_ELEMENT_ID__=sw,r})();function sw(){return function Dl(r,s){let o;const u=s[r.index];if(Rr(u))o=u;else{let l;if(8&r.type)l=En(u);else{const h=s[11];l=h.createComment("");const m=br(r,s);No(h,Qs(h,m),l,function Yh(r,s){return r.nextSibling(s)}(h,m),!1)}s[r.index]=o=Tf(u,s,l,r),ag(s,o)}return new sm(o,r,s)}(Dn(),be())}const im=ph,sm=class extends im{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Yc(this._hostTNode,this._hostLView)}get injector(){return new zs(this._hostTNode,this._hostLView)}get parentInjector(){const s=_u(this._hostTNode,this._hostLView);if(ql(s)){const o=aa(s,this._hostLView),u=or(s);return new zs(o[1].data[u+8],o)}return new zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=om(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let l,h;"number"==typeof u?l=u:null!=u&&(l=u.index,h=u.injector);const m=s.createEmbeddedView(o||{},h);return this.insert(m,l),m}createComponent(s,o,u,l,h){const m=s&&!function vs(r){return"function"==typeof r}(s);let v;if(m)v=o;else{const R=o||{};v=R.index,u=R.injector,l=R.projectableNodes,h=R.environmentInjector||R.ngModuleRef}const w=m?s:new Oa(z(s)),T=u||this.parentInjector;if(!h&&null==w.ngModule){const j=(m?T:this.parentInjector).get(Qi,null);j&&(h=j)}const M=w.create(T,l,void 0,h);return this.insert(M.hostView,v),M}insert(s,o){const u=s._lView,l=u[1];if(function Ja(r){return Rr(r[3])}(u)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const R=u[3],j=new sm(R,R[6],R[3]);j.detach(j.indexOf(s))}}const h=this._adjustIndex(o),m=this._lContainer;!function va(r,s,o,u){const l=10+u,h=o.length;u>0&&(o[l-1][4]=s),u<h-10?(s[4]=o[l],Yl(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function Ap(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(r),s[2]|=64}(l,u,m,h);const v=Jh(h,m),w=u[11],T=Qs(w,m[7]);return null!==T&&function Gc(r,s,o,u,l,h){u[0]=l,u[6]=s,ku(r,u,o,1,l,h)}(l,m[6],w,u,T,v),s.attachToViewContainerRef(),Yl(am(m),h,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=om(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Ia(this._lContainer,o);u&&(_o(am(this._lContainer),o),md(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Ia(this._lContainer,o);return u&&null!=_o(am(this._lContainer),o)?new Pa(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function om(r){return r[8]}function am(r){return r[8]||(r[8]=[])}function rp(...r){}const cv=new hn("Application Initializer");let ip=(()=>{class r{constructor(o){this.appInits=o,this.resolve=rp,this.reject=rp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(La(h))o.push(h);else if(Y0(h)){const m=new Promise((v,w)=>{h.subscribe({complete:v,error:w})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)($n(cv,8))},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const lv=new hn("AppId",{providedIn:"root",factory:function dv(){return`${vh()}${vh()}${vh()}`}});function vh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tw=new hn("Platform Initializer"),Cl=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ha=new hn("appBootstrapListener"),gm=new hn("LocaleId",{providedIn:"root",factory:()=>function Hn(r,s=Xe.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),$n(r,s)}(gm,Xe.Optional|Xe.SkipSelf)||function Cw(){return typeof $localize<"u"&&$localize.locale||eh}()}),rc=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),fv=(()=>Promise.resolve(0))();function xw(r){typeof Zone>"u"?fv.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Ns{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ja(!1),this.onMicrotaskEmpty=new ja(!1),this.onStable=new ja(!1),this.onError=new ja(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Zb(){let r=nn.requestAnimationFrame,s=nn.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function BD(r){const s=()=>{!function VD(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(nn,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,pv(r),r.isCheckStableRunning=!0,Go(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),pv(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,h,m,v)=>{try{return Nw(r),o.invokeTask(l,h,m,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&s(),Rw(r)}},onInvoke:(o,u,l,h,m,v,w)=>{try{return Nw(r),o.invoke(l,h,m,v,w)}finally{r.shouldCoalesceRunChangeDetection&&s(),Rw(r)}},onHasTask:(o,u,l,h)=>{o.hasTask(l,h),u===l&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,pv(r),Go(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,l,h)=>(o.handleError(l,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ns.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(Ns.isInAngularZone())throw new Ne(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,s,Mw,rp,rp);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Mw={};function Go(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function pv(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Nw(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Rw(r){r._nesting--,Go(r)}class UD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ja,this.onMicrotaskEmpty=new ja,this.onStable=new ja,this.onError=new ja}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const kw=new hn(""),jD=new hn("");let mv,Yb=(()=>{class r{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mv||(function $D(r){mv=r}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ns.assertNotInAngularZone(),xw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xw(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return r.\u0275fac=function(o){return new(o||r)($n(Ns),$n(gv),$n(jD))},r.\u0275prov=nt({token:r,factory:r.\u0275fac}),r})(),gv=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return mv?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Wo=null;const yv=new hn("AllowMultipleToken"),mm=new hn("PlatformDestroyListeners");function ic(r,s,o=[]){const u=`Platform: ${s}`,l=new hn(u);return(h=[])=>{let m=_m();if(!m||m.injector.get(yv,!1)){const v=[...o,...h,{provide:l,useValue:!0}];r?r(v):function ym(r){if(Wo&&!Wo.get(yv,!1))throw new Ne(400,!1);Wo=r;const s=r.get(Ih);(function vv(r){const s=r.get(Tw,null);s&&s.forEach(o=>o())})(r)}(function li(r=[],s){return es.create({name:s,providers:[{provide:Td,useValue:"platform"},{provide:mm,useValue:new Set([()=>Wo=null])},...r]})}(v,u))}return function Rs(r){const s=_m();if(!s)throw new Ne(401,!1);return s}()}}function _m(){return Wo?.get(Ih)??null}let Ih=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function di(r,s){let o;return o="noop"===r?new UD:("zone.js"===r?void 0:r)||new Ns(s),o}(u?.ngZone,function wh(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Ns,useValue:l}];return l.run(()=>{const m=es.create({providers:h,parent:this.injector,name:o.moduleType.name}),v=o.create(m),w=v.injector.get(Ue,null);if(!w)throw new Ne(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{w.handleError(M)}});v.onDestroy(()=>{qo(this._modules,v),T.unsubscribe()})}),function Pw(r,s,o){try{const u=o();return La(u)?u.catch(l=>{throw s.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(w,l,()=>{const T=v.injector.get(ip);return T.runInitializers(),T.donePromise.then(()=>(function Bg(r){Ae(r,"Expected localeId to be defined"),"string"==typeof r&&(nh=r.toLowerCase().replace(/_/g,"-"))}(v.injector.get(gm,eh)||eh),this._moduleDoBootstrap(v),v))})})}bootstrapModule(o,u=[]){const l=vm({},u);return function _v(r,s,o){const u=new F_(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(o){const u=o.injector.get(sc);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Ne(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(mm,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)($n(es))},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function vm(r,s){return Array.isArray(s)?s.reduce(vm,r):{...r,...s}}let sc=(()=>{class r{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new P.y(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new P.y(v=>{let w;this._zone.runOutsideAngular(()=>{w=this._zone.onStable.subscribe(()=>{Ns.assertNotInAngularZone(),xw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Ns.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{w.unsubscribe(),T.unsubscribe()}});this.isStable=(0,re.T)(h,m.pipe((0,X.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Ir;if(!this._injector.get(ip).done)throw!l&&function Qt(r){const s=z(r)||He(r)||pt(r);return null!==s&&s.standalone}(o),new Ne(405,false);let m;m=l?o:this._injector.get(Up).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const v=function HD(r){return r.isBoundToModule}(m)?void 0:this._injector.get(Pi),T=m.create(es.NULL,[],u||m.selector,v),M=T.location.nativeElement,R=T.injector.get(kw,null);return R?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),qo(this.components,T),R?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Ne(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;qo(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(Ha,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>qo(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ne(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)($n(Ns),$n(Qi),$n(Ue))},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function qo(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}let Ow=!0,Fw=!1;function KD(){return Fw=!0,Ow}function Lw(){if(Fw)throw new Error("Cannot enable prod mode after platform setup.");Ow=!1}let oc=(()=>{class r{}return r.__NG_ELEMENT_ID__=ZD,r})();function ZD(r){return function YD(r,s,o){if(Zo(r)&&!o){const u=qt(r.index,s);return new Pa(u,u)}return 47&r.type?new Pa(s[16],s):null}(Dn(),be(),16==(16&r))}class $w{constructor(){}supports(s){return Zu(s)}create(s){return new iT(s)}}const rT=(r,s)=>s;class iT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||rT}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<rb(u,l,h)?o:u,v=rb(m,l,h),w=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{h||(h=[]);const T=v-l,M=w-l;if(T!=M){for(let j=0;j<T;j++){const Z=j<h.length?h[j]:h[j]=0,ge=Z+j;M<=ge&&ge<T&&(h[j]=Z+1)}h[m.previousIndex]=M-T}}v!==w&&s(m,v,w)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Zu(s))throw new Ne(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,v)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,v),u=!0),o=o._next}else l=0,function kE(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[ai()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,h,l)):s=this._addAfter(new sT(o,u),h,l),s}_verifyReinsertion(s,o,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new nb),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class sT{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class nb{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new oT,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rb(r,s,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class ib{constructor(){}supports(s){return s instanceof Map||Ly(s)}create(){return new aT}}class aT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Ly(s)))throw new Ne(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new Dv(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class Dv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bv(){return new Tv([new $w])}let Tv=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||bv()),deps:[[r,new Y,new O]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Ne(901,!1)}}return r.\u0275prov=nt({token:r,providedIn:"root",factory:bv}),r})();function Hw(){return new Eh([new ib])}let Eh=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Hw()),deps:[[r,new Y,new O]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Ne(901,!1)}}return r.\u0275prov=nt({token:r,providedIn:"root",factory:Hw}),r})();const Gw=ic(null,"core",[]);let ob=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)($n(sc))},r.\u0275mod=Lt({type:r}),r.\u0275inj=ft({}),r})()},3942:(yt,xe,F)=>{F.d(xe,{Z:()=>Ne});var I=F(2090),Q=F(4859),P=F(9681),re=F(1877);class X{constructor(le,he){this._delegate=le,this.firebase=he,(0,P._addComponent)(le,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this._delegate.automaticDataCollectionEnabled=le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(le=>{this._delegate.checkDestroyed(),le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(le,he=P._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(le);return!et.isInitialized()&&"EXPLICIT"===(null===(qe=et.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&et.initialize(),et.getImmediate({identifier:he})}_removeServiceInstance(le,he=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(le).clearInstance(he)}_addComponent(le){(0,P._addComponent)(this._delegate,le)}_addOrOverwriteComponent(le){(0,P._addOrOverwriteComponent)(this._delegate,le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function _e(){const We=function ce(We){const le={},he={__esModule:!0,initializeApp:function Ie(Be,V={}){const se=P.initializeApp(Be,V);if((0,I.r3)(le,se.name))return le[se.name];const Re=new We(se,he);return le[se.name]=Re,Re},app:et,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function we(Be){const V=Be.name,se=V.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const Re=(tt=et())=>{if("function"!=typeof tt[se])throw ue.create("invalid-app-argument",{appName:V});return tt[se]()};void 0!==Be.serviceProps&&(0,I.ZB)(Re,Be.serviceProps),he[se]=Re,We.prototype[se]=function(...tt){return this._getService.bind(this,V).apply(this,Be.multipleInstances?tt:[])}}return"PUBLIC"===Be.type?he[se]:null},removeApp:function qe(Be){delete le[Be]},useAsService:function Le(Be,V){return"serverAuth"===V?null:V},modularAPIs:P}};function et(Be){if(!(0,I.r3)(le,Be=Be||P._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Be});return le[Be]}return he.default=he,Object.defineProperty(he,"apps",{get:function fe(){return Object.keys(le).map(Be=>le[Be])}}),et.App=We,he}(X);return We.INTERNAL=Object.assign(Object.assign({},We.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function le(he){(0,I.ZB)(We,he)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),We}(),U=new re.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const We=self.firebase.SDK_VERSION;We&&We.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=$;!function Me(We){(0,P.registerVersion)("@firebase/app-compat","0.2.3",We)}()},9681:(yt,xe,F)=>{F.r(xe),F.d(xe,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>jr,_DEFAULT_ENTRY_NAME:()=>Ae,_addComponent:()=>rn,_addOrOverwriteComponent:()=>nt,_apps:()=>ct,_clearComponents:()=>Ln,_components:()=>At,_getProvider:()=>ft,_registerComponent:()=>Kt,_removeServiceInstance:()=>Tt,deleteApp:()=>zo,getApp:()=>Xr,getApps:()=>ei,initializeApp:()=>fi,onLog:()=>is,registerVersion:()=>Er,setLogLevel:()=>Wn});var I=F(5861),Q=F(4859),P=F(1877),re=F(2090),X=F(8766);class ae{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function ue(st){return"VERSION"===st.getComponent()?.type}(it)){const xt=it.getImmediate();return`${xt.library}/${xt.version}`}return null}).filter(it=>it).join(" ")}}const ce="@firebase/app",$=new P.Yd("@firebase/app"),Ae="[DEFAULT]",ve={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ct=new Map,At=new Map;function rn(st,Ee){try{st.container.addComponent(Ee)}catch(it){$.debug(`Component ${Ee.name} failed to register with FirebaseApp ${st.name}`,it)}}function nt(st,Ee){st.container.addOrOverwriteComponent(Ee)}function Kt(st){const Ee=st.name;if(At.has(Ee))return $.debug(`There were multiple attempts to register component ${Ee}.`),!1;At.set(Ee,st);for(const it of ct.values())rn(it,st);return!0}function ft(st,Ee){const it=st.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),st.container.getProvider(Ee)}function Tt(st,Ee,it=Ae){ft(st,Ee).clearInstance(it)}function Ln(){At.clear()}const gn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(Ee,it,xt){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=xt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}const jr="9.17.1";function fi(st,Ee={}){let it=st;"object"!=typeof Ee&&(Ee={name:Ee});const xt=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},Ee),Rt=xt.name;if("string"!=typeof Rt||!Rt)throw gn.create("bad-app-name",{appName:String(Rt)});if(it||(it=(0,re.aH)()),!it)throw gn.create("no-options");const Lt=ct.get(Rt);if(Lt){if((0,re.vZ)(it,Lt.options)&&(0,re.vZ)(xt,Lt.config))return Lt;throw gn.create("duplicate-app",{appName:Rt})}const B=new Q.H0(Rt);for(const W of At.values())B.addComponent(W);const L=new wn(it,xt,B);return ct.set(Rt,L),L}function Xr(st=Ae){const Ee=ct.get(st);if(!Ee&&st===Ae)return fi();if(!Ee)throw gn.create("no-app",{appName:st});return Ee}function ei(){return Array.from(ct.values())}function zo(st){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,I.Z)(function*(st){const Ee=st.name;ct.has(Ee)&&(ct.delete(Ee),yield Promise.all(st.container.getProviders().map(it=>it.delete())),st.isDeleted=!0)})).apply(this,arguments)}function Er(st,Ee,it){var xt;let Rt=null!==(xt=ve[st])&&void 0!==xt?xt:st;it&&(Rt+=`-${it}`);const Lt=Rt.match(/\s|\//),B=Ee.match(/\s|\//);if(Lt||B){const L=[`Unable to register library "${Rt}" with version "${Ee}":`];return Lt&&L.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Lt&&B&&L.push("and"),B&&L.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void $.warn(L.join(" "))}Kt(new Q.wA(`${Rt}-version`,()=>({library:Rt,version:Ee}),"VERSION"))}function is(st,Ee){if(null!==st&&"function"!=typeof st)throw gn.create("invalid-log-argument");(0,P.Am)(st,Ee)}function Wn(st){(0,P.Ub)(st)}const Rn="firebase-heartbeat-store";let Vn=null;function ln(){return Vn||(Vn=(0,X.X3)("firebase-heartbeat-database",1,{upgrade:(st,Ee)=>{0===Ee&&st.createObjectStore(Rn)}}).catch(st=>{throw gn.create("idb-open",{originalErrorMessage:st.message})})),Vn}function lt(){return(lt=(0,I.Z)(function*(st){try{return(yield ln()).transaction(Rn).objectStore(Rn).get(Bn(st))}catch(Ee){if(Ee instanceof re.ZR)$.warn(Ee.message);else{const it=gn.create("idb-get",{originalErrorMessage:Ee?.message});$.warn(it.message)}}})).apply(this,arguments)}function nn(st,Ee){return lr.apply(this,arguments)}function lr(){return(lr=(0,I.Z)(function*(st,Ee){try{const xt=(yield ln()).transaction(Rn,"readwrite");return yield xt.objectStore(Rn).put(Ee,Bn(st)),xt.done}catch(it){if(it instanceof re.ZR)$.warn(it.message);else{const xt=gn.create("idb-set",{originalErrorMessage:it?.message});$.warn(xt.message)}}})).apply(this,arguments)}function Bn(st){return`${st.name}!${st.options.appId}`}class ss{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new en(it),this._heartbeatsCachePromise=this._storage.read().then(xt=>(this._heartbeatsCache=xt,xt))}triggerHeartbeat(){var Ee=this;return(0,I.Z)(function*(){const xt=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Xt();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!Ee._heartbeatsCache.heartbeats.some(Lt=>Lt.date===Rt))return Ee._heartbeatsCache.heartbeats.push({date:Rt,agent:xt}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Lt=>{const B=new Date(Lt.date).valueOf();return Date.now()-B<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,I.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const it=Xt(),{heartbeatsToSend:xt,unsentEntries:Rt}=function bi(st,Ee=1024){const it=[];let xt=st.slice();for(const Rt of st){const Lt=it.find(B=>B.agent===Rt.agent);if(Lt){if(Lt.dates.push(Rt.date),qn(it)>Ee){Lt.dates.pop();break}}else if(it.push({agent:Rt.agent,dates:[Rt.date]}),qn(it)>Ee){it.pop();break}xt=xt.slice(1)}return{heartbeatsToSend:it,unsentEntries:xt}}(Ee._heartbeatsCache.heartbeats),Lt=(0,re.L)(JSON.stringify({version:2,heartbeats:xt}));return Ee._heartbeatsCache.lastSentHeartbeatDate=it,Rt.length>0?(Ee._heartbeatsCache.heartbeats=Rt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),Lt})()}}function Xt(){return(new Date).toISOString().substring(0,10)}class en{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,I.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function _t(st){return lt.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var it=this;return(0,I.Z)(function*(){var xt;if(yield it._canUseIndexedDBPromise){const Lt=yield it.read();return nn(it.app,{lastSentHeartbeatDate:null!==(xt=Ee.lastSentHeartbeatDate)&&void 0!==xt?xt:Lt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var it=this;return(0,I.Z)(function*(){var xt;if(yield it._canUseIndexedDBPromise){const Lt=yield it.read();return nn(it.app,{lastSentHeartbeatDate:null!==(xt=Ee.lastSentHeartbeatDate)&&void 0!==xt?xt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Ee.heartbeats]})}})()}}function qn(st){return(0,re.L)(JSON.stringify({version:2,heartbeats:st})).length}!function Nr(st){Kt(new Q.wA("platform-logger",Ee=>new ae(Ee),"PRIVATE")),Kt(new Q.wA("heartbeat",Ee=>new ss(Ee),"PRIVATE")),Er(ce,"0.9.3",st),Er(ce,"0.9.3","esm2017"),Er("fire-js","")}("")},4859:(yt,xe,F)=>{F.d(xe,{H0:()=>ce,wA:()=>P});var I=F(5861),Q=F(2090);class P{constructor($,U,K){this.name=$,this.instanceFactory=U,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const re="[DEFAULT]";class X{constructor($,U){this.name=$,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const U=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(U)){const K=new Q.BH;if(this.instancesDeferred.set(U,K),this.isInitialized(U)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:U});Ye&&K.resolve(Ye)}catch{}}return this.instancesDeferred.get(U).promise}getImmediate($){var U;const K=this.normalizeInstanceIdentifier($?.identifier),Ye=null!==(U=$?.optional)&&void 0!==U&&U;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Me){if(Ye)return null;throw Me}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(_e){return"EAGER"===_e.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[U,K]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(U);try{const Me=this.getOrInitializeService({instanceIdentifier:Ye});K.resolve(Me)}catch{}}}}clearInstance($=re){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,I.Z)(function*(){const U=Array.from($.instances.values());yield Promise.all([...U.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...U.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=re){return this.instances.has($)}getOptions($=re){return this.instancesOptions.get($)||{}}initialize($={}){const{options:U={}}=$,K=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:K,options:U});for(const[Me,Ne]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Me)&&Ne.resolve(Ye);return Ye}onInit($,U){var K;const Ye=this.normalizeInstanceIdentifier(U),Me=null!==(K=this.onInitCallbacks.get(Ye))&&void 0!==K?K:new Set;Me.add($),this.onInitCallbacks.set(Ye,Me);const Ne=this.instances.get(Ye);return Ne&&$(Ne,Ye),()=>{Me.delete($)}}invokeOnInitCallbacks($,U){const K=this.onInitCallbacks.get(U);if(K)for(const Ye of K)try{Ye($,U)}catch{}}getOrInitializeService({instanceIdentifier:$,options:U={}}){let K=this.instances.get($);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=$,_e===re?void 0:_e),options:U}),this.instances.set($,K),this.instancesOptions.set($,U),this.invokeOnInitCallbacks(K,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,K)}catch{}var _e;return K||null}normalizeInstanceIdentifier($=re){return this.component?this.component.multipleInstances?$:re:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor($){this.name=$,this.providers=new Map}addComponent($){const U=this.getProvider($.name);if(U.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);U.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const U=new X($,this);return this.providers.set($,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(yt,xe,F)=>{F.d(xe,{Am:()=>_e,Ub:()=>ce,Yd:()=>ue,in:()=>Q});const I=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},re=Q.INFO,X={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ae=($,U,...K)=>{if(U<$.logLevel)return;const Ye=(new Date).toISOString(),Me=X[U];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Me](`[${Ye}]  ${$.name}:`,...K)};class ue{constructor(U){this.name=U,this._logLevel=re,this._logHandler=ae,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in Q))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?P[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...U),this._logHandler(this,Q.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...U),this._logHandler(this,Q.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...U),this._logHandler(this,Q.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...U),this._logHandler(this,Q.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...U),this._logHandler(this,Q.ERROR,...U)}}function ce($){I.forEach(U=>{U.setLogLevel($)})}function _e($,U){for(const K of I){let Ye=null;U&&U.level&&(Ye=P[U.level]),K.userLogHandler=null===$?null:(Me,Ne,...We)=>{const le=We.map(he=>{if(null==he)return null;if("string"==typeof he)return he;if("number"==typeof he||"boolean"==typeof he)return he.toString();if(he instanceof Error)return he.message;try{return JSON.stringify(he)}catch{return null}}).filter(he=>he).join(" ");Ne>=(Ye??Me.logLevel)&&$({level:Q[Ne].toLowerCase(),message:le,args:We,type:Me.name})}}}},259:(yt,xe,F)=>{F.d(xe,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=F(9681);(0,I.registerVersion)("firebase","9.17.1","app")},9260:(yt,xe,F)=>{F.d(xe,{Z:()=>I.Z});var I=F(3942);I.Z.registerVersion("firebase","9.17.1","app-compat")},407:(yt,xe,F)=>{F.r(xe);var I=F(5861),Q=F(3942),P=F(2090),re=F(9681),X=F(1877),ae=F(655),ue=F(4859);const Ne=function Ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},We=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},le=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new X.Yd("@firebase/auth");function et(g,...d){qe.logLevel<=X.in.ERROR&&qe.error(`Auth (${re.SDK_VERSION}): ${g}`,...d)}function Ie(g,...d){throw Be(g,...d)}function fe(g,...d){return Be(g,...d)}function we(g,d,f){const _=Object.assign(Object.assign({},We()),{[d]:f});return new P.LL("auth","Firebase",_).create(d,{appName:g.name})}function Le(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Ie(g,"argument-error"),we(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return le.create(g,...d)}function V(g,d,...f){if(!g)throw Be(d,...f)}function se(g){const d="INTERNAL ASSERTION FAILED: "+g;throw et(d),new Error(d)}function Re(g,d){g||se(d)}const tt=new Map;function ht(g){Re(g instanceof Function,"Expected a class definition");let d=tt.get(g);return d?(Re(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,tt.set(g,d),d)}function oe(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function pe(){return"http:"===Ce()||"https:"===Ce()}function Ce(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class ct{constructor(d,f){this.shortDelay=d,this.longDelay=f,Re(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pe()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function At(g,d){Re(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class rn{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new ct(3e4,6e4);function ft(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Tt(g,d,f,_){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,I.Z)(function*(g,d,f,_,S={}){return Nn(g,S,(0,I.Z)(function*(){let N={},G={};_&&("GET"===d?G=_:N={body:JSON.stringify(_)});const ie=(0,P.xO)(Object.assign({key:g.config.apiKey},G)).slice(1),Fe=yield g._getAdditionalHeaders();return Fe["Content-Type"]="application/json",g.languageCode&&(Fe["X-Firebase-Locale"]=g.languageCode),rn.fetch()(fi(g,g.config.apiHost,f,ie),Object.assign({method:d,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Nn(g,d,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,I.Z)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},nt),d);try{const S=new Xr(g),N=yield Promise.race([f(),S.promise]);S.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw ei(g,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const ie=N.ok?G.errorMessage:G.error.message,[Fe,rt]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw ei(g,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw ei(g,"email-already-in-use",G);if("USER_DISABLED"===Fe)throw ei(g,"user-disabled",G);const Et=_[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw we(g,Et,rt);Ie(g,Et)}}catch(S){if(S instanceof P.ZR)throw S;Ie(g,"network-request-failed")}})).apply(this,arguments)}function wn(g,d,f,_){return jr.apply(this,arguments)}function jr(){return(jr=(0,I.Z)(function*(g,d,f,_,S={}){const N=yield Tt(g,d,f,_,S);return"mfaPendingCredential"in N&&Ie(g,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function fi(g,d,f,_){const S=`${d}${f}?${_}`;return g.config.emulator?At(g.config,S):`${g.config.apiScheme}://${S}`}class Xr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(fe(this.auth,"network-request-failed")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ei(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const S=fe(g,d,_);return S.customData._tokenResponse=f,S}function Xe(){return(Xe=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Er(g,d){return is.apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Wn(g,d){return ti.apply(this,arguments)}function ti(){return(ti=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Di(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function ln(){return(ln=(0,I.Z)(function*(g,d=!1){const f=(0,P.m9)(g),_=yield f.getIdToken(d),S=lt(_);V(S&&S.exp&&S.auth_time&&S.iat,f.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,G=N?.sign_in_provider;return{claims:S,token:_,authTime:Di(_t(S.auth_time)),issuedAtTime:Di(_t(S.iat)),expirationTime:Di(_t(S.exp)),signInProvider:G||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(g){return 1e3*Number(g)}function lt(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return et("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,P.tV)(f);return S?JSON.parse(S):(et("Failed to decode base64 JWT payload"),null)}catch(S){return et("Caught error parsing JWT payload as JSON",S?.toString()),null}}function lr(g,d){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,I.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof P.ZR&&$r(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}function $r({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Nt{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,I.Z)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,I.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class ss{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Di(this.lastLoginAt),this.creationTime=Di(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xt(g){return bi.apply(this,arguments)}function bi(){return(bi=(0,I.Z)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),S=yield lr(g,Wn(f,{idToken:_}));V(S?.users.length,f,"internal-error");const N=S.users[0];g._notifyReloadListener(N);const G=null!==(d=N.providerUserInfo)&&void 0!==d&&d.length?st(N.providerUserInfo):[],ie=Nr(g.providerData,G),Et=!!g.isAnonymous&&!(g.email&&N.passwordHash||ie?.length),gt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ie,metadata:new ss(N.createdAt,N.lastLoginAt),isAnonymous:Et};Object.assign(g,gt)})).apply(this,arguments)}function qn(){return(qn=(0,I.Z)(function*(g){const d=(0,P.m9)(g);yield Xt(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Nr(g,d){return[...g.filter(_=>!d.some(S=>S.providerId===_.providerId)),...d]}function st(g){return g.map(d=>{var{providerId:f}=d,_=(0,ae._T)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function it(){return(it=(0,I.Z)(function*(g,d){const f=yield Nn(g,{},(0,I.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:S,apiKey:N}=g.config,G=fi(g,S,"/v1/token",`key=${N}`),ie=yield g._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(G,{method:"POST",headers:ie,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){V(d.idToken,"internal-error"),V(typeof d.idToken<"u","internal-error"),V(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function nn(g){const d=lt(g);return V(d,"internal-error"),V(typeof d.exp<"u","internal-error"),V(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var _=this;return(0,I.Z)(function*(){return V(!_.accessToken||_.refreshToken,d,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,I.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:G}=yield function Ee(g,d){return it.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(S,N,Number(G))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:S,expirationTime:N}=f,G=new xt;return _&&(V("string"==typeof _,"internal-error",{appName:d}),G.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:d}),G.accessToken=S),N&&(V("number"==typeof N,"internal-error",{appName:d}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new xt,this.toJSON())}_performRefresh(){return se("not implemented")}}function Rt(g,d){V("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class Lt{constructor(d){var{uid:f,auth:_,stsTokenManager:S}=d,N=(0,ae._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new ss(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,I.Z)(function*(){const _=yield lr(f,f.stsTokenManager.getToken(f.auth,d));return V(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function Vn(g){return ln.apply(this,arguments)}(this,d)}reload(){return function en(g){return qn.apply(this,arguments)}(this)}_assign(d){this!==d&&(V(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new Lt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,I.Z)(function*(){let S=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),S=!0),f&&(yield Xt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,I.Z)(function*(){const f=yield d.getIdToken();return yield lr(d,function zo(g,d){return Xe.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,S,N,G,ie,Fe,rt,Et;const gt=null!==(_=f.displayName)&&void 0!==_?_:void 0,Xn=null!==(S=f.email)&&void 0!==S?S:void 0,er=null!==(N=f.phoneNumber)&&void 0!==N?N:void 0,bs=null!==(G=f.photoURL)&&void 0!==G?G:void 0,tf=null!==(ie=f.tenantId)&&void 0!==ie?ie:void 0,nf=null!==(Fe=f._redirectEventId)&&void 0!==Fe?Fe:void 0,rf=null!==(rt=f.createdAt)&&void 0!==rt?rt:void 0,Wm=null!==(Et=f.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Np,emailVerified:qm,isAnonymous:Ou,providerData:Da,stsTokenManager:Zc}=f;V(Np&&Zc,d,"internal-error");const sf=xt.fromJSON(this.name,Zc);V("string"==typeof Np,d,"internal-error"),Rt(gt,d.name),Rt(Xn,d.name),V("boolean"==typeof qm,d,"internal-error"),V("boolean"==typeof Ou,d,"internal-error"),Rt(er,d.name),Rt(bs,d.name),Rt(tf,d.name),Rt(nf,d.name),Rt(rf,d.name),Rt(Wm,d.name);const wd=new Lt({uid:Np,auth:d,email:Xn,emailVerified:qm,displayName:gt,isAnonymous:Ou,photoURL:bs,phoneNumber:er,tenantId:tf,stsTokenManager:sf,createdAt:rf,lastLoginAt:Wm});return Da&&Array.isArray(Da)&&(wd.providerData=Da.map(ba=>Object.assign({},ba))),nf&&(wd._redirectEventId=nf),wd}static _fromIdTokenResponse(d,f,_=!1){return(0,I.Z)(function*(){const S=new xt;S.updateFromServerResponse(f);const N=new Lt({uid:f.localId,auth:d,stsTokenManager:S,isAnonymous:_});return yield Xt(N),N})()}}const L=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(f,_){var S=this;return(0,I.Z)(function*(){S.storage[f]=_})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=_.storage[f];return void 0===S?null:S})()}_remove(f){var _=this;return(0,I.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function W(g,d,f){return`firebase:${g}:${d}:${f}`}class ye{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=W(this.userKey,S.apiKey,N),this.fullPersistenceKey=W("persistence",S.apiKey,N),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,I.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?Lt._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,I.Z)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,I.Z)(function*(){if(!f.length)return new ye(ht(L),d,_);const S=(yield Promise.all(f.map(function(){var rt=(0,I.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let N=S[0]||ht(L);const G=W(_,d.config.apiKey,d.name);let ie=null;for(const rt of f)try{const Et=yield rt._get(G);if(Et){const gt=Lt._fromJSON(d,Et);rt!==N&&(ie=gt),N=rt;break}}catch{}const Fe=S.filter(rt=>rt._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],ie&&(yield N._set(G,ie.toJSON())),yield Promise.all(f.map(function(){var rt=(0,I.Z)(function*(Et){if(Et!==N)try{yield Et._remove(G)}catch{}});return function(Et){return rt.apply(this,arguments)}}())),new ye(N,d,_)):new ye(N,d,_)})()}}function z(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(cn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(He(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Oe(d))return"Blackberry";if(je(d))return"Webos";if(pt(d))return"Safari";if((d.includes("chrome/")||Qt(d))&&!d.includes("edge/"))return"Chrome";if(Wt(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function He(g=(0,P.z$)()){return/firefox\//i.test(g)}function pt(g=(0,P.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Qt(g=(0,P.z$)()){return/crios\//i.test(g)}function cn(g=(0,P.z$)()){return/iemobile/i.test(g)}function Wt(g=(0,P.z$)()){return/android/i.test(g)}function Oe(g=(0,P.z$)()){return/blackberry/i.test(g)}function je(g=(0,P.z$)()){return/webos/i.test(g)}function Vt(g=(0,P.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function ks(g=(0,P.z$)()){return Vt(g)||Wt(g)||je(g)||Oe(g)||/windows phone/i.test(g)||cn(g)}function os(g,d=[]){let f;switch(g){case"Browser":f=z((0,P.z$)());break;case"Worker":f=`${z((0,P.z$)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${re.SDK_VERSION}/${_}`}class ro{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=N=>new Promise((G,ie)=>{try{G(d(N))}catch(Fe){ie(Fe)}});_.onAbort=f,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,I.Z)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const S of f.queue)yield S(d),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const N of _)try{N()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Pt{constructor(d,f,_){this.app=d,this.heartbeatServiceProvider=f,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ps(this),this.idTokenSubscription=new Ps(this),this.beforeStateQueue=new ro(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=ht(f)),this._initializationPromise=this.queue((0,I.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield ye.create(_,d),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,I.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,I.Z)(function*(){var _;const S=yield f.assertedPersistence.getCurrentUser();let N=S,G=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ie=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Fe=N?._redirectEventId,rt=yield f.tryRedirectSignIn(d);(!ie||ie===Fe)&&rt?.user&&(N=rt.user,G=!0)}if(!N)return f.directlySetCurrentUser(null);if(!N._redirectEventId){if(G)try{yield f.beforeStateQueue.runMiddleware(N)}catch(ie){N=S,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ie))}return N?f.reloadAndSetCurrentUserOrClear(N):f.directlySetCurrentUser(null)}return V(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===N._redirectEventId?f.directlySetCurrentUser(N):f.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(d){var f=this;return(0,I.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,I.Z)(function*(){try{yield Xt(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ve(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,I.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,I.Z)(function*(){const _=d?(0,P.m9)(d):null;return _&&V(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,I.Z)(function*(){if(!_._deleted)return d&&V(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,I.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,I.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,I.Z)(function*(){yield f.assertedPersistence.setPersistence(ht(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new P.LL("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,I.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(f);return null===d?S.removeCurrentUser():S.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,I.Z)(function*(){if(!f.redirectPersistenceManager){const _=d&&ht(d)||f._popupRedirectResolver;V(_,f,"argument-error"),f.redirectPersistenceManager=yield ye.create(f,[ht(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,I.Z)(function*(){var _,S;return f._isInitialized&&(yield f.queue((0,I.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(S=f.redirectUser)||void 0===S?void 0:S._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,I.Z)(function*(){if(d===f.currentUser)return f.queue((0,I.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,S){if(this._deleted)return()=>{};const N="function"==typeof f?f:f.next.bind(f),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof f?d.addObserver(f,_,S):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,I.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=os(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,I.Z)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const S=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function mn(g){return(0,P.m9)(g)}class Ps{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,P.ne)(f=>this.observer=f)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ti(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function as(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class dr{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return se("not implemented")}_getIdTokenResponse(d){return se("not implemented")}_linkToIdToken(d,f){return se("not implemented")}_getReauthenticationResolver(d){return se("not implemented")}}function jn(g,d){return qa.apply(this,arguments)}function qa(){return(qa=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:resetPassword",ft(g,d))})).apply(this,arguments)}function sn(g,d){return ac.apply(this,arguments)}function ac(){return(ac=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function uc(g,d){return Os.apply(this,arguments)}function Os(){return(Os=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:update",ft(g,d))})).apply(this,arguments)}function Fs(){return(Fs=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signInWithPassword",ft(g,d))})).apply(this,arguments)}function cs(g,d){return pi.apply(this,arguments)}function pi(){return(pi=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:sendOobCode",ft(g,d))})).apply(this,arguments)}function hr(g,d){return cc.apply(this,arguments)}function cc(){return(cc=(0,I.Z)(function*(g,d){return cs(g,d)})).apply(this,arguments)}function sr(g,d){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,I.Z)(function*(g,d){return cs(g,d)})).apply(this,arguments)}function za(g,d){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,I.Z)(function*(g,d){return cs(g,d)})).apply(this,arguments)}function lc(g,d){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,I.Z)(function*(g,d){return cs(g,d)})).apply(this,arguments)}function Ml(){return(Ml=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signInWithEmailLink",ft(g,d))})).apply(this,arguments)}function dc(){return(dc=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signInWithEmailLink",ft(g,d))})).apply(this,arguments)}class hc extends dr{constructor(d,f,_,S=null){super("password",_),this._email=d,this._password=f,this._tenantId=S}static _fromEmailAndPassword(d,f){return new hc(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new hc(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return function Ko(g,d){return Fs.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function bh(g,d){return Ml.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Ie(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,I.Z)(function*(){switch(_.signInMethod){case"password":return sn(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Th(g,d){return dc.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:Ie(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Kn(g,d){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signInWithIdp",ft(g,d))})).apply(this,arguments)}class Fi extends dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Fi(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Ie("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S}=f,N=(0,ae._T)(f,["providerId","signInMethod"]);if(!_||!S)return null;const G=new Fi(_,S);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(d){return Kn(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Kn(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Kn(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,P.xO)(f)}return d}}function lp(g,d){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:sendVerificationCode",ft(g,d))})).apply(this,arguments)}function ls(){return(ls=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signInWithPhoneNumber",ft(g,d))})).apply(this,arguments)}function kl(){return(kl=(0,I.Z)(function*(g,d){const f=yield wn(g,"POST","/v1/accounts:signInWithPhoneNumber",ft(g,d));if(f.temporaryProof)throw ei(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const hp={USER_NOT_FOUND:"user-not-found"};function Pl(){return(Pl=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signInWithPhoneNumber",ft(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),hp)})).apply(this,arguments)}class ds extends dr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new ds({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new ds({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function fc(g,d){return ls.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function dp(g,d){return kl.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function fp(g,d){return Pl.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:S}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:S}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}=d;return _||f||S||N?new ds({verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class Ka{constructor(d){var f,_,S,N,G,ie;const Fe=(0,P.zd)((0,P.pd)(d)),rt=null!==(f=Fe.apiKey)&&void 0!==f?f:null,Et=null!==(_=Fe.oobCode)&&void 0!==_?_:null,gt=function Ol(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);V(rt&&Et&&gt,"argument-error"),this.apiKey=rt,this.operation=gt,this.code=Et,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ie=Fe.tenantId)&&void 0!==ie?ie:null}static parseLink(d){const f=function Fl(g){const d=(0,P.zd)((0,P.pd)(g)).link,f=d?(0,P.zd)((0,P.pd)(d)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(g)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||f||d||g}(d);try{return new Ka(f)}catch{return null}}}let Ci=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return hc._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const S=Ka.parseLink(_);return V(S,"argument-error"),hc._fromEmailAndCode(f,S.code,S.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Li{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Vi extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ls extends Vi{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return V("providerId"in f&&"signInMethod"in f,"argument-error"),Fi._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return V(d.idToken||d.accessToken,"argument-error"),Fi._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ls.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ls.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:G,providerId:ie}=d;if(!_&&!S&&!f&&!N||!ie)return null;try{return new Ls(ie)._credential({idToken:f,accessToken:_,nonce:G,pendingToken:N})}catch{return null}}}let Yo=(()=>{class g extends Vi{constructor(){super("facebook.com")}static credential(f){return Fi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Za=(()=>{class g extends Vi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return Fi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:S}=f;if(!_&&!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),pc=(()=>{class g extends Vi{constructor(){super("github.com")}static credential(f){return Fi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Qo extends dr{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Kn(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Kn(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Kn(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S,pendingToken:N}=f;return _&&S&&N&&_===S?new Qo(_,N):null}static _create(d,f){return new Qo(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ni extends Li{constructor(d){V(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return ni.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return ni.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Qo.fromJSON(d);return V(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return Qo._create(_,f)}catch{return null}}}let Gr=(()=>{class g extends Vi{constructor(){super("twitter.com")}static credential(f,_){return Fi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=f;if(!_||!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function io(g,d){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signUp",ft(g,d))})).apply(this,arguments)}class fr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,S=!1){return(0,I.Z)(function*(){const N=yield Lt._fromIdTokenResponse(d,_,S),G=Ah(_);return new fr({user:N,providerId:G,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,I.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const S=Ah(_);return new fr({user:d,providerId:S,_tokenResponse:_,operationType:f})})()}}function Ah(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function En(){return(En=(0,I.Z)(function*(g){var d;const f=mn(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new fr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield io(f,{returnSecureToken:!0}),S=yield fr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(S.user),S})).apply(this,arguments)}class gc extends P.ZR{constructor(d,f,_,S){var N;super(f.code,f.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:d.name,tenantId:null!==(N=d.tenantId)&&void 0!==N?N:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,S){return new gc(d,f,_,S)}}function pp(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?gc._fromErrorAndOperation(g,N,d,_):N})}function ri(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Ya(){return(Ya=(0,I.Z)(function*(g,d){const f=(0,P.m9)(g);yield qt(!0,f,d);const{providerUserInfo:_}=yield Er(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),S=ri(_||[]);return f.providerData=f.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function so(g,d){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,I.Z)(function*(g,d,f=!1){const _=yield lr(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return fr._forOperation(g,"link",_)})).apply(this,arguments)}function qt(g,d,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,I.Z)(function*(g,d,f){yield Xt(d);const S=!1===g?"provider-already-linked":"no-such-provider";V(ri(d.providerData).has(f)===g,d.auth,S)})).apply(this,arguments)}function Vs(g,d){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,I.Z)(function*(g,d,f=!1){const{auth:_}=g,S="reauthenticate";try{const N=yield lr(g,pp(_,S,d,g),f);V(N.idToken,_,"internal-error");const G=lt(N.idToken);V(G,_,"internal-error");const{sub:ie}=G;return V(g.uid===ie,_,"user-mismatch"),fr._forOperation(g,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&Ie(_,"user-mismatch"),N}})).apply(this,arguments)}function gi(g,d){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,I.Z)(function*(g,d,f=!1){const _="signIn",S=yield pp(g,_,d),N=yield fr._fromIdTokenResponse(g,_,S);return f||(yield g._updateCurrentUser(N.user)),N})).apply(this,arguments)}function _n(g,d){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,I.Z)(function*(g,d){return gi(mn(g),d)})).apply(this,arguments)}function eu(g,d){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,I.Z)(function*(g,d){const f=(0,P.m9)(g);return yield qt(!1,f,d.providerId),so(f,d)})).apply(this,arguments)}function tu(g,d){return nu.apply(this,arguments)}function nu(){return(nu=(0,I.Z)(function*(g,d){return Vs((0,P.m9)(g),d)})).apply(this,arguments)}function mc(g,d){return ji.apply(this,arguments)}function ji(){return(ji=(0,I.Z)(function*(g,d){return wn(g,"POST","/v1/accounts:signInWithCustomToken",ft(g,d))})).apply(this,arguments)}function Jo(){return(Jo=(0,I.Z)(function*(g,d){const f=mn(g),_=yield mc(f,{token:d,returnSecureToken:!0}),S=yield fr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(S.user),S})).apply(this,arguments)}class be{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?jt._fromServerResponse(d,f):Ie(d,"internal-error")}}class jt extends be{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new jt(f)}}function ru(g,d,f){var _;V((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),V(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(V(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(V(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Dn(){return(Dn=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g),S={requestType:"PASSWORD_RESET",email:d};f&&ru(_,S,f),yield sr(_,S)})).apply(this,arguments)}function oo(){return(oo=(0,I.Z)(function*(g,d,f){yield jn((0,P.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Xo(){return(Xo=(0,I.Z)(function*(g,d){yield uc((0,P.m9)(g),{oobCode:d})})).apply(this,arguments)}function ea(g,d){return _c.apply(this,arguments)}function _c(){return(_c=(0,I.Z)(function*(g,d){const f=(0,P.m9)(g),_=yield jn(f,{oobCode:d}),S=_.requestType;switch(V(S,f,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,f,"internal-error");default:V(_.email,f,"internal-error")}let N=null;return _.mfaInfo&&(N=be._fromServerResponse(mn(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Vl(){return(Vl=(0,I.Z)(function*(g,d){const{data:f}=yield ea((0,P.m9)(g),d);return f.email})).apply(this,arguments)}function bn(){return(bn=(0,I.Z)(function*(g,d,f){const _=mn(g),S=yield io(_,{returnSecureToken:!0,email:d,password:f}),N=yield fr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}function Bs(){return(Bs=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g),S={requestType:"EMAIL_SIGNIN",email:d};V(f.handleCodeInApp,_,"argument-error"),f&&ru(_,S,f),yield za(_,S)})).apply(this,arguments)}function na(){return(na=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g),S=Ci.credentialWithLink(d,f||oe());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),_n(_,S)})).apply(this,arguments)}function mp(g,d){return wc.apply(this,arguments)}function wc(){return(wc=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:createAuthUri",ft(g,d))})).apply(this,arguments)}function ra(){return(ra=(0,I.Z)(function*(g,d){const _={identifier:d,continueUri:pe()?oe():"http://localhost"},{signinMethods:S}=yield mp((0,P.m9)(g),_);return S||[]})).apply(this,arguments)}function ia(){return(ia=(0,I.Z)(function*(g,d){const f=(0,P.m9)(g),S={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&ru(f.auth,S,d);const{email:N}=yield hr(f.auth,S);N!==g.email&&(yield g.reload())})).apply(this,arguments)}function au(){return(au=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&ru(_.auth,N,f);const{email:G}=yield lc(_.auth,N);G!==g.email&&(yield g.reload())})).apply(this,arguments)}function uu(g,d){return bc.apply(this,arguments)}function bc(){return(bc=(0,I.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Cc(){return(Cc=(0,I.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,P.m9)(g),N={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},G=yield lr(_,uu(_.auth,N));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const ie=_.providerData.find(({providerId:Fe})=>"password"===Fe);ie&&(ie.displayName=_.displayName,ie.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function js(g,d,f){return cu.apply(this,arguments)}function cu(){return(cu=(0,I.Z)(function*(g,d,f){const{auth:_}=g,N={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(N.email=d),f&&(N.password=f);const G=yield lr(g,sn(_,N));yield g._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Wr{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class dn extends Wr{constructor(d,f,_,S){super(d,f,_),this.username=S}}class Ul extends Wr{constructor(d,f){super(d,"facebook.com",f)}}class Sc extends dn{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Nh extends Wr{constructor(d,f){super(d,"google.com",f)}}class Ac extends dn{constructor(d,f,_){super(d,"twitter.com",f,_)}}function lu(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Zn(g){var d,f;if(!g)return null;const{providerId:_}=g,S=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},N=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const G=null===(f=null===(d=lt(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(G)return new Wr(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new Ul(N,S);case"github.com":return new Sc(N,S);case"google.com":return new Nh(N,S);case"twitter.com":return new Ac(N,S,g.screenName||null);case"custom":case"anonymous":return new Wr(N,null);default:return new Wr(N,_,S)}}(f)}class Hs{constructor(d,f,_){this.type=d,this.credential=f,this.auth=_}static _fromIdtoken(d,f){return new Hs("enroll",d,f)}static _fromMfaPendingCredential(d){return new Hs("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Hs._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Hs._fromIdtoken(d.multiFactorSession.idToken)}return null}}class hu{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=mn(d),S=f.customData._serverResponse,N=(S.mfaInfo||[]).map(ie=>be._fromServerResponse(_,ie));V(S.mfaPendingCredential,_,"internal-error");const G=Hs._fromMfaPendingCredential(S.mfaPendingCredential);return new hu(G,N,function(){var ie=(0,I.Z)(function*(Fe){const rt=yield Fe._process(_,G);delete S.mfaInfo,delete S.mfaPendingCredential;const Et=Object.assign(Object.assign({},S),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(f.operationType){case"signIn":const gt=yield fr._fromIdTokenResponse(_,f.operationType,Et);return yield _._updateCurrentUser(gt.user),gt;case"reauthenticate":return V(f.user,_,"internal-error"),fr._forOperation(f.user,f.operationType,Et);default:Ie(_,"internal-error")}});return function(Fe){return ie.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,I.Z)(function*(){return f.signInResolver(d)})()}}function fu(g,d){return Tt(g,"POST","/v2/accounts/mfaEnrollment:start",ft(g,d))}class Rh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>be._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new Rh(d)}getSession(){var d=this;return(0,I.Z)(function*(){return Hs._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,f){var _=this;return(0,I.Z)(function*(){const S=d,N=yield _.getSession(),G=yield lr(_.user,S._process(_.user.auth,N,f));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(d){var f=this;return(0,I.Z)(function*(){const _="string"==typeof d?d:d.uid,S=yield f.user.getIdToken();try{const N=yield lr(f.user,function Gl(g,d){return Tt(g,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(g,d))}(f.user.auth,{idToken:S,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:G})=>G!==_),yield f.user._updateTokensIfNecessary(N),yield f.user.reload()}catch(N){throw N}})()}}const co=new WeakMap,Gs="__sak";class gu{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Gs,"1"),this.storage.removeItem(Gs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const oa=(()=>{class g extends gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sa(){const g=(0,P.z$)();return pt(g)||Vt(g)}()&&function pn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ks(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&f(_,N,S)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((ie,Fe,rt)=>{this.notifyListeners(ie,rt)});const S=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(S);if(f.newValue!==ie)null!==f.newValue?this.storage.setItem(S,f.newValue):this.storage.removeItem(S);else if(this.localCache[S]===f.newValue&&!_)return}const N=()=>{const ie=this.storage.getItem(S);!_&&this.localCache[S]===ie||this.notifyListeners(S,ie)},G=this.storage.getItem(S);!function zn(){return(0,P.w1)()&&10===document.documentMode}()||G===f.newValue||f.newValue===f.oldValue?N():setTimeout(N,10)}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var S=()=>super._set,N=this;return(0,I.Z)(function*(){yield S().call(N,f,_),N.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,S=this;return(0,I.Z)(function*(){const N=yield _().call(S,f);return S.localCache[f]=JSON.stringify(N),N})()}_remove(f){var _=()=>super._remove,S=this;return(0,I.Z)(function*(){yield _().call(S,f),delete S.localCache[f]})()}}return g.type="LOCAL",g})(),Ai=(()=>{class g extends gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let zl=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(N=>N.isListeningto(f));if(_)return _;const S=new g(f);return this.receivers.push(S),S}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,I.Z)(function*(){const S=f,{eventId:N,eventType:G,data:ie}=S.data,Fe=_.handlersMap[G];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const rt=Array.from(Fe).map(function(){var gt=(0,I.Z)(function*(Xn){return Xn(S.origin,ie)});return function(Xn){return gt.apply(this,arguments)}}()),Et=yield function ua(g){return Promise.all(g.map(function(){var d=(0,I.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(rt);S.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:Et})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function ca(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class xc{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var S=this;return(0,I.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,ie;return new Promise((Fe,rt)=>{const Et=ca("",20);N.port1.start();const gt=setTimeout(()=>{rt(new Error("unsupported_event"))},_);ie={messageChannel:N,onMessage(Xn){const er=Xn;if(er.data.eventId===Et)switch(er.data.status){case"ack":clearTimeout(gt),G=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Fe(er.data.response);break;default:clearTimeout(gt),clearTimeout(G),rt(new Error("invalid_response"))}}},S.handlers.add(ie),N.port1.addEventListener("message",ie.onMessage),S.target.postMessage({eventType:d,eventId:Et,data:f},[N.port2])}).finally(()=>{ie&&S.removeMessageHandler(ie)})})()}}function kn(){return window}function mu(){return typeof kn().WorkerGlobalScope<"u"&&"function"==typeof kn().importScripts}function la(){return(la=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ps="firebaseLocalStorageDb",gs="firebaseLocalStorage",Mc="fbase_key";class qs{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function da(g,d){return g.transaction([gs],d?"readwrite":"readonly").objectStore(gs)}function ha(){const g=indexedDB.open(ps,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(gs,{keyPath:Mc})}catch(S){f(S)}}),g.addEventListener("success",(0,I.Z)(function*(){const _=g.result;_.objectStoreNames.contains(gs)?d(_):(_.close(),yield function Zl(){const g=indexedDB.deleteDatabase(ps);return new qs(g).toPromise()}(),d(yield ha()))}))})}function ms(g,d,f){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,I.Z)(function*(g,d,f){const _=da(g,!0).put({[Mc]:d,value:f});return new qs(_).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,I.Z)(function*(g,d){const f=da(g,!1).get(d),_=yield new qs(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function zs(g,d){const f=da(g,!0).delete(d);return new qs(f).toPromise()}const ho=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,I.Z)(function*(){return f.db||(f.db=yield ha()),f.db})()}_withRetries(f){var _=this;return(0,I.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield f(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,I.Z)(function*(){return mu()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,I.Z)(function*(){f.receiver=zl._getInstance(function _u(){return mu()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,I.Z)(function*(S,N){return{keyProcessed:(yield f._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,I.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,I.Z)(function*(){var _,S;if(f.activeServiceWorker=yield function Ws(){return la.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new xc(f.activeServiceWorker);const N=yield f.sender._send("ping",{},800);!N||(null===(_=N[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,I.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function yu(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ha();return yield ms(f,Gs,"1"),yield zs(f,Gs),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,I.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var S=this;return(0,I.Z)(function*(){return S._withPendingWrite((0,I.Z)(function*(){return yield S._withRetries(N=>ms(N,f,_)),S.localCache[f]=_,S.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=yield _._withRetries(N=>function vu(g,d){return fa.apply(this,arguments)}(N,f));return _.localCache[f]=S,S})()}_remove(f){var _=this;return(0,I.Z)(function*(){return _._withPendingWrite((0,I.Z)(function*(){return yield _._withRetries(S=>zs(S,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,I.Z)(function*(){const _=yield f._withRetries(G=>{const ie=da(G,!1).getAll();return new qs(ie).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:G,value:ie}of _)N.add(G),JSON.stringify(f.localCache[G])!==JSON.stringify(ie)&&(f.notifyListeners(G,ie),S.push(G));for(const G of Object.keys(f.localCache))f.localCache[G]&&!N.has(G)&&(f.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function fo(g,d){return Tt(g,"POST","/v2/accounts/mfaSignIn:start",ft(g,d))}function _s(){return(_s=(0,I.Z)(function*(g){return(yield Tt(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function go(g){return new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=S=>{const N=fe("internal-error");N.customData=S,f(N)},_.type="text/javascript",_.charset="UTF-8",function po(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)})}function Eu(g){return`__${g}${Math.floor(1e6*Math.random())}`}const pa=1e12;class hn{constructor(d){this.auth=d,this.counter=pa,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new yp(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||pa;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||pa))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,I.Z)(function*(){var _;return null===(_=f._widgets.get(d||pa))||void 0===_||_.execute(),""})()}}class yp{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof d?document.getElementById(d):d;V(S,"argument-error",{appName:f}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Sm(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _p=Eu("rcb"),Am=new ct(3e4,6e4);class kh{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=kn().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return V(function Ov(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(kn().grecaptcha):new Promise((_,S)=>{const N=kn().setTimeout(()=>{S(fe(d,"network-request-failed"))},Am.get());kn()[_p]=()=>{kn().clearTimeout(N),delete kn()[_p];const ie=kn().grecaptcha;if(!ie)return void S(fe(d,"internal-error"));const Fe=ie.render;ie.render=(rt,Et)=>{const gt=Fe(rt,Et);return this.counter++,gt},this.hostLanguage=f,_(ie)},go(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:_p,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(N),S(fe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=kn().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kc{load(d){return(0,I.Z)(function*(){return new hn(d)})()}clearedOneInstance(){}}const Mm="recaptcha",Nm={theme:"light",type:"image"};class ar{constructor(d,f=Object.assign({},Nm),_){this.parameters=f,this.type=Mm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof d?document.getElementById(d):d;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kc:new kh,this.validateStartingState()}verify(){var d=this;return(0,I.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(N=>{const G=ie=>{!ie||(d.tokenChangeListeners.delete(G),N(ie))};d.tokenChangeListeners.add(G),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=kn()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,I.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,I.Z)(function*(){V(pe()&&!mu(),d.auth,"internal-error"),yield function Pc(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function qr(g){return _s.apply(this,arguments)}(d.auth);V(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vs{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=ds._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function yo(){return(yo=(0,I.Z)(function*(g,d,f){const _=mn(g),S=yield Hi(_,d,(0,P.m9)(f));return new vs(S,N=>_n(_,N))})).apply(this,arguments)}function un(){return(un=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g);yield qt(!1,_,"phone");const S=yield Hi(_.auth,d,(0,P.m9)(f));return new vs(S,N=>eu(_,N))})).apply(this,arguments)}function _o(){return(_o=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g),S=yield Hi(_.auth,d,(0,P.m9)(f));return new vs(S,N=>tu(_,N))})).apply(this,arguments)}function Hi(g,d,f){return si.apply(this,arguments)}function si(){return(si=(0,I.Z)(function*(g,d,f){var _;const S=yield f.verify();try{let N;if(V("string"==typeof S,g,"argument-error"),V(f.type===Mm,g,"argument-error"),N="string"==typeof d?{phoneNumber:d}:d,"session"in N){const G=N.session;if("phoneNumber"in N)return V("enroll"===G.type,g,"internal-error"),(yield fu(g,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,g,"internal-error");const ie=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return V(ie,g,"missing-multi-factor-info"),(yield fo(g,{mfaPendingCredential:G.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield lp(g,{phoneNumber:N.phoneNumber,recaptchaToken:S});return G}}finally{f._reset()}})).apply(this,arguments)}function yi(){return(yi=(0,I.Z)(function*(g,d){yield so((0,P.m9)(g),d)})).apply(this,arguments)}let vo=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=mn(f)}verifyPhoneNumber(f,_){return Hi(this.auth,f,(0,P.m9)(_))}static credential(f,_){return ds._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:S}=f;return _&&S?ds._fromTokenResponse(_,S):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Qn(g,d){return d?ht(d):(V(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Du extends dr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Kn(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Kn(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Kn(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function Tr(g){return gi(g.auth,new Du(g),g.bypassAuthState)}function bu(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),Vs(f,new Du(g),g.bypassAuthState)}function Io(g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,I.Z)(function*(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),so(f,new Du(g),g.bypassAuthState)})).apply(this,arguments)}class wo{constructor(d,f,_,S,N=!1){this.auth=d,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,I.Z)(function*(_,S){d.pendingPromise={resolve:_,reject:S};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(N){d.reject(N)}});return function(_,S){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,I.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:G,error:ie,type:Fe}=d;if(ie)return void f.reject(ie);const rt={auth:f.auth,requestUri:_,sessionId:S,tenantId:G||void 0,postBody:N||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Fe)(rt))}catch(Et){f.reject(Et)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Tr;case"linkViaPopup":case"linkViaRedirect":return Io;case"reauthViaPopup":case"reauthViaRedirect":return bu;default:Ie(this.auth,"internal-error")}}resolve(d){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zr=new ct(2e3,1e4);function ga(){return(ga=(0,I.Z)(function*(g,d,f){const _=mn(g);Le(g,d,Li);const S=Qn(_,f);return new $t(_,"signInViaPopup",d,S).executeNotNull()})).apply(this,arguments)}function _i(){return(_i=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g);Le(_.auth,d,Li);const S=Qn(_.auth,f);return new $t(_.auth,"reauthViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}function kr(){return(kr=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g);Le(_.auth,d,Li);const S=Qn(_.auth,f);return new $t(_.auth,"linkViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}let $t=(()=>{class g extends wo{constructor(f,_,S,N,G){super(f,_,N,G),this.provider=S,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,I.Z)(function*(){const _=yield f.execute();return V(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,I.Z)(function*(){Re(1===f.filter.length,"Popup operations only handle one event");const _=ca();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(S=>{f.reject(S)}),f.resolver._isIframeWebStorageSupported(f.auth,S=>{S||f.reject(fe(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,zr.get())};f()}}return g.currentPopupAction=null,g})();const pr=new Map;class at extends wo{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,I.Z)(function*(){let _=pr.get(f.auth._key());if(!_){try{const N=(yield function Do(g,d){return vt.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}pr.set(f.auth._key(),_)}return f.bypassAuthState||pr.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,I.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const S=yield _.auth._redirectUserForId(d.eventId);if(S)return _.user=S,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function vt(){return(vt=(0,I.Z)(function*(g,d){const f=ws(d),_=Gi(g);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(f));return yield _._remove(f),S})).apply(this,arguments)}function Zs(g,d){return bo.apply(this,arguments)}function bo(){return(bo=(0,I.Z)(function*(g,d){return Gi(g)._set(ws(d),"true")})).apply(this,arguments)}function Kr(g,d){pr.set(g._key(),d)}function Gi(g){return ht(g._redirectPersistence)}function ws(g){return W("pendingRedirect",g.config.apiKey,g.name)}function Hn(){return(Hn=(0,I.Z)(function*(g,d,f){const _=mn(g);Le(g,d,Li),yield _._initializationPromise;const S=Qn(_,f);return yield Zs(S,_),S._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Wi(){return(Wi=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g);Le(_.auth,d,Li),yield _.auth._initializationPromise;const S=Qn(_.auth,f);yield Zs(S,_.auth);const N=yield Ke(_);return S._openRedirect(_.auth,d,"reauthViaRedirect",N)})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(g,d,f){const _=(0,P.m9)(g);Le(_.auth,d,Li),yield _.auth._initializationPromise;const S=Qn(_.auth,f);yield qt(!1,_,d.providerId),yield Zs(S,_.auth);const N=yield Ke(_);return S._openRedirect(_.auth,d,"linkViaRedirect",N)})).apply(this,arguments)}function H(){return(H=(0,I.Z)(function*(g,d){return yield mn(g)._initializationPromise,Y(g,d,!1)})).apply(this,arguments)}function Y(g,d){return De.apply(this,arguments)}function De(){return(De=(0,I.Z)(function*(g,d,f=!1){const _=mn(g),S=Qn(_,d),G=yield new at(_,S,f).execute();return G&&!f&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,d)),G})).apply(this,arguments)}function Ke(g){return $e.apply(this,arguments)}function $e(){return($e=(0,I.Z)(function*(g){const d=ca(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Ct{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function vn(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zr(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!Zr(d)){const S=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(fe(this.auth,S))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dt(d))}saveEventToCache(d){this.cachedEventUids.add(Dt(d)),this.lastProcessedEventTime=Date.now()}}function Dt(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Zr({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Pr(g){return So.apply(this,arguments)}function So(){return(So=(0,I.Z)(function*(g,d={}){return Tt(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Ao=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yr=/^https?/;function Tu(){return(Tu=(0,I.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Pr(g);for(const f of d)try{if(ed(f))return}catch{}Ie(g,"unauthorized-domain")})).apply(this,arguments)}function ed(g){const d=oe(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const G=new URL(g);return""===G.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&G.hostname===_}if(!Yr.test(f))return!1;if(Ao.test(g))return _===g;const S=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const Oh=new ct(3e4,6e4);function td(){const g=kn().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Oc=null;function km(g){return Oc=Oc||function Cu(g){return new Promise((d,f)=>{var _,S,N;function G(){td(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{td(),f(fe(g,"network-request-failed"))},timeout:Oh.get()})}if(null!==(S=null===(_=kn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)d(gapi.iframes.getContext());else{if(null===(N=kn().gapi)||void 0===N||!N.load){const ie=Eu("iframefcb");return kn()[ie]=()=>{gapi.load?G():f(fe(g,"network-request-failed"))},go(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Fe=>f(Fe))}G()}}).catch(d=>{throw Oc=null,d})}(g),Oc}const nd=new ct(5e3,15e3),rd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Om=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fc(g){const d=g.config;V(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?At(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,_={apiKey:d.apiKey,appName:g.name,v:re.SDK_VERSION},S=Om.get(g.config.apiHost);S&&(_.eid=S);const N=g._getFrameworks();return N.length&&(_.fw=N.join(",")),`${f}?${(0,P.xO)(_).slice(1)}`}function Ip(){return Ip=(0,I.Z)(function*(g){const d=yield km(g),f=kn().gapi;return V(f,g,"internal-error"),d.open({where:document.body,url:Fc(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rd,dontclear:!0},_=>new Promise(function(){var S=(0,I.Z)(function*(N,G){yield _.restyle({setHideOnLeave:!1});const ie=fe(g,"network-request-failed"),Fe=kn().setTimeout(()=>{G(ie)},nd.get());function rt(){kn().clearTimeout(Fe),N(_)}_.ping(rt).then(rt,()=>{G(ie)})});return function(N,G){return S.apply(this,arguments)}}()))}),Ip.apply(this,arguments)}const Lh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class id{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bc(g,d,f,_,S,N){V(g.config.authDomain,g,"auth-domain-config-required"),V(g.config.apiKey,g,"invalid-api-key");const G={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:re.SDK_VERSION,eventId:S};if(d instanceof Li){d.setDefaultLanguage(g.languageCode),G.providerId=d.providerId||"",(0,P.xb)(d.getCustomParameters())||(G.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Fe,rt]of Object.entries(N||{}))G[Fe]=rt}if(d instanceof Vi){const Fe=d.getScopes().filter(rt=>""!==rt);Fe.length>0&&(G.scopes=Fe.join(","))}g.tenantId&&(G.tid=g.tenantId);const ie=G;for(const Fe of Object.keys(ie))void 0===ie[Fe]&&delete ie[Fe];return`${function Bh({config:g}){return g.emulator?At(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,P.xO)(ie).slice(1)}`}const od="webStorageSupport";class ad extends class jh{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return se("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new ad(d)}_finalizeEnroll(d,f,_){return function pu(g,d){return Tt(g,"POST","/v2/accounts/mfaEnrollment:finalize",ft(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function wu(g,d){return Tt(g,"POST","/v2/accounts/mfaSignIn:finalize",ft(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ep=(()=>{class g{constructor(){}static assertion(f){return ad._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Su="@firebase/auth";class $h{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,I.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ys(){return window}function xu(){return(xu=(0,I.Z)(function*(g,d,f){var _;const{BuildInfo:S}=Ys();Re(d.sessionId,"AuthEvent did not contain a session ID");const N=yield ld(d.sessionId),G={};return Vt()?G.ibi=S.packageName:Wt()?G.apn=S.packageName:Ie(g,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=N,Bc(g,f,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function Uc(){return(Uc=(0,I.Z)(function*(g){const{BuildInfo:d}=Ys(),f={};Vt()?f.iosBundleId=d.packageName:Wt()?f.androidPackageName=d.packageName:Ie(g,"operation-not-supported-in-this-environment"),yield Pr(g,f)})).apply(this,arguments)}function ma(){return(ma=(0,I.Z)(function*(g,d,f){const{cordova:_}=Ys();let S=()=>{};try{yield new Promise((N,G)=>{let ie=null;function Fe(){var gt;N();const Xn=null===(gt=_.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof Xn&&Xn(),"function"==typeof f?.close&&f.close()}function rt(){ie||(ie=window.setTimeout(()=>{G(fe(g,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===document?.visibilityState&&rt()}d.addPassiveListener(Fe),document.addEventListener("resume",rt,!1),Wt()&&document.addEventListener("visibilitychange",Et,!1),S=()=>{d.removePassiveListener(Fe),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",Et,!1),ie&&window.clearTimeout(ie)}})}finally{S()}})).apply(this,arguments)}function ld(g){return dd.apply(this,arguments)}function dd(){return(dd=(0,I.Z)(function*(g){const d=jm(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function jm(g){if(Re(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}(0,P.Pz)("authIdTokenMaxAge"),function mr(g){(0,re._registerComponent)(new ue.wA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),S=d.getProvider("heartbeat"),{apiKey:N,authDomain:G}=_.options;return((ie,Fe)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:ie.name}),V(!G?.includes(":"),"argument-error",{appName:ie.name});const rt={apiKey:N,authDomain:G,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:os(g)},Et=new Pt(ie,Fe,rt);return function ee(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(ht);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(Et,f),Et})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new ue.wA("auth-internal",d=>{const f=mn(d.getProvider("auth").getImmediate());return new $h(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(Su,"0.21.3",function gr(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,re.registerVersion)(Su,"0.21.3","esm2017")}("Browser");class hd extends Ct{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,I.Z)(function*(){yield d.initPromise})()}}function jc(g){return _a.apply(this,arguments)}function _a(){return(_a=(0,I.Z)(function*(g){const d=yield $c()._get(Hc(g));return d&&(yield $c()._remove(Hc(g))),d})).apply(this,arguments)}function Mu(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const _=Math.floor(Math.random()*d.length);g.push(d.charAt(_))}return g.join("")}function $c(){return ht(oa)}function Hc(g){return W("authEvent",g.config.apiKey,g.name)}function xi(g){if(!g?.includes("?"))return{};const[d,...f]=g.split("?");return(0,P.zd)(f.join("?"))}function yr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fe("no-auth-event")}}function va(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function gd(g=(0,P.z$)()){return!("file:"!==va()&&"ionic:"!==va()&&"capacitor:"!==va()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function qc(){try{const g=self.localStorage,d=ca();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Kh(g=(0,P.z$)()){return function md(){return(0,P.w1)()&&11===document?.documentMode}()||function Wc(g=(0,P.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,P.hl)()}catch{return Mo()&&(0,P.hl)()}return!1}function Mo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zc(){return(function Ap(){return"http:"===va()||"https:"===va()}()||(0,P.ru)()||gd())&&!function Ia(){return(0,P.b$)()||(0,P.UG)()}()&&qc()&&!Mo()}function No(){return gd()&&typeof document<"u"}function wa(){return(wa=(0,I.Z)(function*(){return!!No()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const vi={LOCAL:"local",NONE:"none",SESSION:"session"},Qs=V,Yh="persistence";function Ro(g){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,I.Z)(function*(g){yield g._initializationPromise;const d=Ea(),f=W(Yh,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Ea(){var g;try{return(null===(g=function Zh(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const Ds=V;class Ii{constructor(){this.browserResolver=ht(class qi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ai,this._completeRedirectFn=Y,this._overrideRedirectResult=Kr}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){var G;Re(null===(G=N.eventManagers[d._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ie=Bc(d,f,_,oe(),S);return function wp(g,d,f,_=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let ie="";const Fe=Object.assign(Object.assign({},Lh),{width:_.toString(),height:S.toString(),top:N,left:G}),rt=(0,P.z$)().toLowerCase();f&&(ie=Qt(rt)?"_blank":f),He(rt)&&(d=d||"http://localhost",Fe.scrollbars="yes");const Et=Object.entries(Fe).reduce((Xn,[er,bs])=>`${Xn}${er}=${bs},`,"");if(function Hr(g=(0,P.z$)()){var d;return Vt(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(rt)&&"_self"!==ie)return function Vh(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",ie),new id(null);const gt=window.open(d||"",ie,Et);V(gt,g,"popup-blocked");try{gt.focus()}catch{}return new id(gt)}(d,ie,ca())})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N._originValidation(d),function mi(g){kn().location.href=g}(Bc(d,f,_,oe(),S)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:S,promise:N}=this.eventManagers[f];return S?Promise.resolve(S):(Re(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,I.Z)(function*(){const _=yield function Fh(g){return Ip.apply(this,arguments)}(d),S=new Ct(d);return _.register("authEvent",N=>(V(N?.authEvent,d,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:S},f.iframes[d._key()]=_,S})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(od,{type:od},S=>{var N;const G=null===(N=S?.[0])||void 0===N?void 0:N[od];void 0!==G&&f(!!G),Ie(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Es(g){return Tu.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return ks()||pt()||Vt()}}),this.cordovaResolver=ht(class Nu{constructor(){this._redirectPersistence=Ai,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Y,this._overrideRedirectResult=Kr}_initialize(d){var f=this;return(0,I.Z)(function*(){const _=d._key();let S=f.eventManagers.get(_);return S||(S=new hd(d),f.eventManagers.set(_,S),f.attachCallbackListeners(d,S)),S})()}_openPopup(d){Ie(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){!function qh(g){var d,f,_,S,N,G,ie,Fe,rt,Et;const gt=Ys();V("function"==typeof(null===(d=gt?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(f=gt?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(S=null===(_=gt?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(ie=null===(G=gt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Fe?void 0:Fe.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Et=null===(rt=gt?.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===Et?void 0:Et.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const G=yield N._initialize(d);yield G.initialized(),G.resetRedirect(),function To(){pr.clear()}(),yield N._originValidation(d);const ie=function bp(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Mu(),postBody:null,tenantId:g.tenantId,error:fe(g,"no-auth-event")}}(d,_,S);yield function zh(g,d){return $c()._set(Hc(g),d)}(d,ie);const Fe=yield function Au(g,d,f){return xu.apply(this,arguments)}(d,ie,f),rt=yield function Wh(g){const{cordova:d}=Ys();return new Promise(f=>{d.plugins.browsertab.isAvailable(_=>{let S=null;_?d.plugins.browsertab.openUrl(g):S=d.InAppBrowser.open(g,function ir(g=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(S)})})}(Fe);return function Um(g,d,f){return ma.apply(this,arguments)}(d,G,rt)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Bm(g){return Uc.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=Ys(),G=setTimeout((0,I.Z)(function*(){yield jc(d),f.onEvent(yr())}),500),ie=function(){var Et=(0,I.Z)(function*(gt){clearTimeout(G);const Xn=yield jc(d);let er=null;Xn&&gt?.url&&(er=function $m(g,d){var f,_;const S=function Hm(g){const d=xi(g),f=d.link?decodeURIComponent(d.link):void 0,_=xi(f).link,S=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return xi(S).link||S||_||f||g}(d);if(S.includes("/__/auth/callback")){const N=xi(S),G=N.firebaseError?function xo(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ie=null===(_=null===(f=G?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Fe=ie?fe(ie):null;return Fe?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:S,postBody:null}}return null}(Xn,gt.url)),f.onEvent(er||yr())});return function(Xn){return Et.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ie);const Fe=S,rt=`${N.packageName.toLowerCase()}://`;Ys().handleOpenURL=function(){var Et=(0,I.Z)(function*(gt){if(gt.toLowerCase().startsWith(rt)&&ie({url:gt}),"function"==typeof Fe)try{Fe(gt)}catch(Xn){console.error(Xn)}});return function(gt){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ai,this._completeRedirectFn=Y,this._overrideRedirectResult=Kr}_initialize(d){var f=this;return(0,I.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(d,f,_,S)})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(d,f,_,S)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return No()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ds(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,I.Z)(function*(){if(d.underlyingResolver)return;const f=yield function yd(){return wa.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Qh(g){return g.unwrap()}function _d(g){return ku(g)}function ku(g){const{_tokenResponse:d}=g instanceof P.ZR?g.customData:g;if(!d)return null;if(!(g instanceof P.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return vo.credentialFromResult(g);const f=d.providerId;if(!f||"password"===f)return null;let _;switch(f){case"google.com":_=Za;break;case"facebook.com":_=Yo;break;case"github.com":_=pc;break;case"twitter.com":_=Gr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:ie,nonce:Fe}=d;return N||G||S||ie?ie?f.startsWith("saml.")?Qo._create(f,ie):Fi._fromParams({providerId:f,signInMethod:f,pendingToken:ie,idToken:S,accessToken:N}):new Ls(f).credential({idToken:S,accessToken:N,rawNonce:Fe}):null}return g instanceof P.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Jn(g,d){return d.catch(f=>{throw f instanceof P.ZR&&function vd(g,d){var f;const _=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Id(g,function Tn(g,d){var f;const _=(0,P.m9)(g),S=d;return V(d.customData.operationType,_,"argument-error"),V(null===(f=S.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),hu._fromError(_,S)}(g,d));else if(_){const S=ku(d),N=d;S&&(N.credential=S,N.tenantId=_.tenantId||void 0,N.email=_.email||void 0,N.phoneNumber=_.phoneNumber||void 0)}}(g,f),f}).then(f=>{const S=f.user;return{operationType:f.operationType,credential:_d(f),additionalUserInfo:lu(f),user:zi.getOrCreate(S)}})}function Mi(g,d){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,I.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:_=>Jn(g,f.confirm(_))}})).apply(this,arguments)}class Id{constructor(d,f){this.resolver=f,this.auth=function Jh(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Jn(Qh(this.auth),this.resolver.resolveSignIn(d))}}class zi{constructor(d){this._delegate=d,this.multiFactor=function lo(g){const d=(0,P.m9)(g);return co.has(d)||co.set(d,Rh._fromUser(d)),co.get(d)}(d)}static getOrCreate(d){return zi.USER_MAP.has(d)||zi.USER_MAP.set(d,new zi(d)),zi.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,I.Z)(function*(){return Jn(f.auth,eu(f._delegate,d))})()}linkWithPhoneNumber(d,f){var _=this;return(0,I.Z)(function*(){return Mi(_.auth,function Yn(g,d,f){return un.apply(this,arguments)}(_._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,I.Z)(function*(){return Jn(f.auth,function Eo(g,d,f){return kr.apply(this,arguments)}(f._delegate,d,Ii))})()}linkWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield Ro(mn(f.auth)),function E(g,d,f){return function b(g,d,f){return A.apply(this,arguments)}(g,d,f)}(f._delegate,d,Ii)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,I.Z)(function*(){return Jn(f.auth,tu(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return Mi(this.auth,function Yl(g,d,f){return _o.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return Jn(this.auth,function de(g,d,f){return _i.apply(this,arguments)}(this._delegate,d,Ii))}reauthenticateWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield Ro(mn(f.auth)),function Co(g,d,f){return function Cn(g,d,f){return Wi.apply(this,arguments)}(g,d,f)}(f._delegate,d,Ii)})()}sendEmailVerification(d){return function Ec(g,d){return ia.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,I.Z)(function*(){return yield function br(g,d){return Ya.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function Bl(g,d){return js((0,P.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function Us(g,d){return js((0,P.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Ql(g,d){return yi.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Tc(g,d){return Cc.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Dc(g,d,f){return au.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zi.USER_MAP=new WeakMap;const on=V;let ko=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=f.options;on(S,"invalid-api-key",{appName:f.name}),on(S,"invalid-api-key",{appName:f.name});const N=typeof window<"u"?Ii:void 0;this._delegate=_.initialize({options:{persistence:Ki(S,f.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function Wa(g,d,f){const _=mn(g);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const S=!!f?.disableWarnings,N=Ti(d),{host:G,port:ie}=function Un(g){const d=Ti(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:as(_.substr(N.length+1))}}{const[N,G]=_.split(":");return{host:N,port:as(G)}}}(d);_.config.emulator={url:`${N}//${G}${null===ie?"":`:${ie}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:ie,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function us(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function ii(g,d){return Xo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return ea(this._delegate,f)}confirmPasswordReset(f,_){return function su(g,d,f){return oo.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var S=this;return(0,I.Z)(function*(){return Jn(S._delegate,function ta(g,d,f){return bn.apply(this,arguments)}(S._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function ou(g,d){return ra.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function $i(g,d){return"EMAIL_SIGNIN"===Ka.parseLink(d)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,I.Z)(function*(){on(zc(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function O(g,d){return H.apply(this,arguments)}(f._delegate,Ii);return _?Jn(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Cp(g,d){mn(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,_,S){const{next:N,error:G,complete:ie}=Po(f,_,S);return this._delegate.onAuthStateChanged(N,G,ie)}onIdTokenChanged(f,_,S){const{next:N,error:G,complete:ie}=Po(f,_,S);return this._delegate.onIdTokenChanged(N,G,ie)}sendSignInLinkToEmail(f,_){return function Ic(g,d,f){return Bs.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function iu(g,d,f){return Dn.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,I.Z)(function*(){let S;switch(function xp(g,d){Qs(Object.values(vi).includes(d),g,"invalid-persistence-type"),(0,P.b$)()?Qs(d!==vi.SESSION,g,"unsupported-persistence-type"):(0,P.UG)()?Qs(d===vi.NONE,g,"unsupported-persistence-type"):Mo()?Qs(d===vi.NONE||d===vi.LOCAL&&(0,P.hl)(),g,"unsupported-persistence-type"):Qs(d===vi.NONE||qc(),g,"unsupported-persistence-type")}(_._delegate,f),f){case vi.SESSION:S=Ai;break;case vi.LOCAL:S=(yield ht(ho)._isAvailable())?ho:oa;break;case vi.NONE:S=L;break;default:return Ie("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Jn(this._delegate,function xh(g){return En.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Jn(this._delegate,_n(this._delegate,f))}signInWithCustomToken(f){return Jn(this._delegate,function yc(g,d){return Jo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return Jn(this._delegate,function Si(g,d,f){return _n((0,P.m9)(g),Ci.credential(d,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return Jn(this._delegate,function gp(g,d,f){return na.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return Mi(this._delegate,function Is(g,d,f){return yo.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,I.Z)(function*(){return on(zc(),_._delegate,"operation-not-supported-in-this-environment"),Jn(_._delegate,function Xl(g,d,f){return ga.apply(this,arguments)}(_._delegate,f,Ii))})()}signInWithRedirect(f){var _=this;return(0,I.Z)(function*(){return on(zc(),_._delegate,"operation-not-supported-in-this-environment"),yield Ro(_._delegate),function $n(g,d,f){return function Ph(g,d,f){return Hn.apply(this,arguments)}(g,d,f)}(_._delegate,f,Ii)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function vc(g,d){return Vl.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=vi,g})();function Po(g,d,f){let _=g;"function"!=typeof g&&({next:_,error:d,complete:f}=g);const S=_;return{next:G=>S(G&&zi.getOrCreate(G)),error:d,complete:f}}function Ki(g,d){const f=function Ru(g,d){const f=Ea();if(!f)return[];const _=W(Yh,g,d);switch(f.getItem(_)){case vi.NONE:return[L];case vi.LOCAL:return[ho,Ai];case vi.SESSION:return[Ai];default:return[]}}(g,d);if(typeof self<"u"&&!f.includes(ho)&&f.push(ho),typeof window<"u")for(const _ of[oa,Ai])f.includes(_)||f.push(_);return f.includes(L)||f.push(L),f}class Xh{constructor(){this.providerId="phone",this._delegate=new vo(Qh(Q.Z.auth()))}static credential(d,f){return vo.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Xh.PHONE_SIGN_IN_METHOD=vo.PHONE_SIGN_IN_METHOD,Xh.PROVIDER_ID=vo.PROVIDER_ID;const Mp=V;class Fv{constructor(d,f,_=Q.Z.app()){var S;Mp(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ar(d,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ef(g){g.INTERNAL.registerComponent(new ue.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new ko(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ci,FacebookAuthProvider:Yo,GithubAuthProvider:pc,GoogleAuthProvider:Za,OAuthProvider:Ls,SAMLAuthProvider:ni,PhoneAuthProvider:Xh,PhoneMultiFactorGenerator:Ep,RecaptchaVerifier:Fv,TwitterAuthProvider:Gr,Auth:ko,AuthCredential:dr,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.3.3")}(Q.Z)},8766:(yt,xe,F)=>{F.d(xe,{Lj:()=>Ie,X3:()=>et});var I=F(5861);let P,re;const ue=new WeakMap,ce=new WeakMap,_e=new WeakMap,$=new WeakMap,U=new WeakMap;let Me={get(V,se,Re){if(V instanceof IDBTransaction){if("done"===se)return ce.get(V);if("objectStoreNames"===se)return V.objectStoreNames||_e.get(V);if("store"===se)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return he(V[se])},set:(V,se,Re)=>(V[se]=Re,!0),has:(V,se)=>V instanceof IDBTransaction&&("done"===se||"store"===se)||se in V};function le(V){return"function"==typeof V?function We(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...se){return V.apply(qe(this),se),he(ue.get(this))}:function(...se){return he(V.apply(qe(this),se))}:function(se,...Re){const tt=V.call(qe(this),se,...Re);return _e.set(tt,se.sort?se.sort():[se]),he(tt)}}(V):(V instanceof IDBTransaction&&function Ye(V){if(ce.has(V))return;const se=new Promise((Re,tt)=>{const ht=()=>{V.removeEventListener("complete",Qe),V.removeEventListener("error",ee),V.removeEventListener("abort",ee)},Qe=()=>{Re(),ht()},ee=()=>{tt(V.error||new DOMException("AbortError","AbortError")),ht()};V.addEventListener("complete",Qe),V.addEventListener("error",ee),V.addEventListener("abort",ee)});ce.set(V,se)}(V),((V,se)=>se.some(Re=>V instanceof Re))(V,function X(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Me):V)}function he(V){if(V instanceof IDBRequest)return function K(V){const se=new Promise((Re,tt)=>{const ht=()=>{V.removeEventListener("success",Qe),V.removeEventListener("error",ee)},Qe=()=>{Re(he(V.result)),ht()},ee=()=>{tt(V.error),ht()};V.addEventListener("success",Qe),V.addEventListener("error",ee)});return se.then(Re=>{Re instanceof IDBCursor&&ue.set(Re,V)}).catch(()=>{}),U.set(se,V),se}(V);if($.has(V))return $.get(V);const se=le(V);return se!==V&&($.set(V,se),U.set(se,V)),se}const qe=V=>U.get(V);function et(V,se,{blocked:Re,upgrade:tt,blocking:ht,terminated:Qe}={}){const ee=indexedDB.open(V,se),oe=he(ee);return tt&&ee.addEventListener("upgradeneeded",pe=>{tt(he(ee.result),pe.oldVersion,pe.newVersion,he(ee.transaction))}),Re&&ee.addEventListener("blocked",()=>Re()),oe.then(pe=>{Qe&&pe.addEventListener("close",()=>Qe()),ht&&pe.addEventListener("versionchange",()=>ht())}).catch(()=>{}),oe}function Ie(V,{blocked:se}={}){const Re=indexedDB.deleteDatabase(V);return se&&Re.addEventListener("blocked",()=>se()),he(Re).then(()=>{})}const fe=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],Le=new Map;function Be(V,se){if(!(V instanceof IDBDatabase)||se in V||"string"!=typeof se)return;if(Le.get(se))return Le.get(se);const Re=se.replace(/FromIndex$/,""),tt=se!==Re,ht=we.includes(Re);if(!(Re in(tt?IDBIndex:IDBObjectStore).prototype)||!ht&&!fe.includes(Re))return;const Qe=function(){var ee=(0,I.Z)(function*(oe,...pe){const Ce=this.transaction(oe,ht?"readwrite":"readonly");let Ae=Ce.store;return tt&&(Ae=Ae.index(pe.shift())),(yield Promise.all([Ae[Re](...pe),ht&&Ce.done]))[0]});return function(pe){return ee.apply(this,arguments)}}();return Le.set(se,Qe),Qe}!function Ne(V){Me=V(Me)}(V=>({...V,get:(se,Re,tt)=>Be(se,Re)||V.get(se,Re,tt),has:(se,Re)=>!!Be(se,Re)||V.has(se,Re)}))},5861:(yt,xe,F)=>{function I(P,re,X,ae,ue,ce,_e){try{var $=P[ce](_e),U=$.value}catch(K){return void X(K)}$.done?re(U):Promise.resolve(U).then(ae,ue)}function Q(P){return function(){var re=this,X=arguments;return new Promise(function(ae,ue){var ce=P.apply(re,X);function _e(U){I(ce,ae,ue,_e,$,"next",U)}function $(U){I(ce,ae,ue,_e,$,"throw",U)}_e(void 0)})}}F.d(xe,{Z:()=>Q})}},yt=>{yt(yt.s=2051)}]);